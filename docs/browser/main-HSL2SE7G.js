import{a as V,b as Ne,c as rp,d as R,e as GI,f as Bu,g as WI,h as KI,i as QI,j as ip,k as YI,l as Na,m as op,n as Uu,o as ZI,p as JI,q as sp,r as $e,s as Si,t as Bn,u as $u,v as Pa,w as XI,x as eE,y as Lr,z as Jt}from"./chunk-4ZHOUZTK.js";var cp=null;var ap=1,tE=Symbol("SIGNAL");function be(n){let e=cp;return cp=n,e}function nE(){return cp}var up={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function qM(n){if(!(pp(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ap)){if(!n.producerMustRecompute(n)&&!dp(n)){n.dirty=!1,n.lastCleanEpoch=ap;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ap}}function lp(n){return n&&(n.nextProducerIndex=0),be(n)}function rE(n,e){if(be(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(pp(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)fp(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function dp(n){gp(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(qM(t),r!==t.version))return!0}return!1}function hp(n){if(gp(n),pp(n))for(let e=0;e<n.producerNode.length;e++)fp(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function fp(n,e){if(zM(n),n.liveConsumerNode.length===1&&GM(n))for(let r=0;r<n.producerNode.length;r++)fp(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];gp(i),i.producerIndexOfThis[r]=e}}function pp(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function gp(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function zM(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function GM(n){return n.producerNode!==void 0}function WM(){throw new Error}var KM=WM;function iE(n){KM=n}function oe(n){return typeof n=="function"}function xo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Hu=xo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ai(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var We=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(o){e=o instanceof Hu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{oE(o)}catch(s){e=e??[],s instanceof Hu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Hu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)oE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ai(t,e)}remove(e){let{_finalizers:t}=this;t&&Ai(t,e),e instanceof n&&e._removeParent(this)}};We.EMPTY=(()=>{let n=new We;return n.closed=!0,n})();var mp=We.EMPTY;function qu(n){return n instanceof We||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function oE(n){oe(n)?n():n.unsubscribe()}var Cn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Mo={setTimeout(n,e,...t){let{delegate:r}=Mo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Mo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zu(n){Mo.setTimeout(()=>{let{onUnhandledError:e}=Cn;if(e)e(n);else throw n})}function ka(){}var sE=yp("C",void 0,void 0);function aE(n){return yp("E",void 0,n)}function cE(n){return yp("N",n,void 0)}function yp(n,e,t){return{kind:n,value:e,error:t}}var xi=null;function Ro(n){if(Cn.useDeprecatedSynchronousErrorHandling){let e=!xi;if(e&&(xi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=xi;if(xi=null,t)throw r}}else n()}function uE(n){Cn.useDeprecatedSynchronousErrorHandling&&xi&&(xi.errorThrown=!0,xi.error=n)}var Mi=class extends We{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qu(e)&&e.add(this)):this.destination=ZM}static create(e,t,r){return new cr(e,t,r)}next(e){this.isStopped?_p(cE(e),this):this._next(e)}error(e){this.isStopped?_p(aE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_p(sE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},QM=Function.prototype.bind;function vp(n,e){return QM.call(n,e)}var wp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Gu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Gu(r)}else Gu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Gu(t)}}},cr=class extends Mi{constructor(e,t,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Cn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vp(e.next,o),error:e.error&&vp(e.error,o),complete:e.complete&&vp(e.complete,o)}):i=e}this.destination=new wp(i)}};function Gu(n){Cn.useDeprecatedSynchronousErrorHandling?uE(n):zu(n)}function YM(n){throw n}function _p(n,e){let{onStoppedNotification:t}=Cn;t&&Mo.setTimeout(()=>t(n,e))}var ZM={closed:!0,next:ka,error:YM,complete:ka};var No=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rt(n){return n}function Ip(...n){return Ep(n)}function Ep(n){return n.length===0?Rt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=XM(t)?t:new cr(t,r,i);return Ro(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=lE(r),new r((i,o)=>{let s=new cr({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[No](){return this}pipe(...t){return Ep(t)(this)}toPromise(t){return t=lE(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function lE(n){var e;return(e=n??Cn.Promise)!==null&&e!==void 0?e:Promise}function JM(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}function XM(n){return n&&n instanceof Mi||JM(n)&&qu(n)}function Dp(n){return oe(n?.lift)}function le(n){return e=>{if(Dp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new Cp(n,e,t,r,i)}var Cp=class extends Mi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Po(){return le((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ko=class extends me{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Dp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new We;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=We.EMPTY)}return e}refCount(){return Po()(this)}};var dE=xo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Je=(()=>{class n extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Wu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new dE}next(t){Ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?mp:(this.currentObservers=null,o.push(t),new We(()=>{this.currentObservers=null,Ai(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new me;return t.source=this,t}}return n.create=(e,t)=>new Wu(e,t),n})(),Wu=class extends Je{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:mp}};var mt=class extends Je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Oa={now(){return(Oa.delegate||Date).now()},delegate:void 0};var Ku=class extends Je{constructor(e=1/0,t=1/0,r=Oa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Qu=class extends We{constructor(e,t){super()}schedule(e,t=0){return this}};var Fa={setInterval(n,e,...t){let{delegate:r}=Fa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Fa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Oo=class extends Qu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Fa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Fa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ai(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Fo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Fo.now=Oa.now;var Lo=class extends Fo{constructor(e,t=Fo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var La=new Lo(Oo);var Yu=class extends Oo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Zu=class extends Lo{};var Tp=new Zu(Yu);var Nt=new me(n=>n.complete());function hE(n){return n&&oe(n.schedule)}function bp(n){return n[n.length-1]}function fE(n){return oe(bp(n))?n.pop():void 0}function Un(n){return hE(bp(n))?n.pop():void 0}function pE(n,e){return typeof bp(n)=="number"?n.pop():e}var Ju=n=>n&&typeof n.length=="number"&&typeof n!="function";function Xu(n){return oe(n?.then)}function el(n){return oe(n[No])}function tl(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function nl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function eR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rl=eR();function il(n){return oe(n?.[rl])}function ol(n){return WI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Bu(t.read());if(i)return yield Bu(void 0);yield yield Bu(r)}}finally{t.releaseLock()}})}function sl(n){return oe(n?.getReader)}function He(n){if(n instanceof me)return n;if(n!=null){if(el(n))return tR(n);if(Ju(n))return nR(n);if(Xu(n))return rR(n);if(tl(n))return gE(n);if(il(n))return iR(n);if(sl(n))return oR(n)}throw nl(n)}function tR(n){return new me(e=>{let t=n[No]();if(oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nR(n){return new me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function rR(n){return new me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,zu)})}function iR(n){return new me(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function gE(n){return new me(e=>{sR(n,e).catch(t=>e.error(t))})}function oR(n){return gE(ol(n))}function sR(n,e){var t,r,i,o;return GI(this,void 0,void 0,function*(){try{for(t=KI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function $t(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function cn(n,e=0){return le((t,r)=>{t.subscribe(he(r,i=>$t(r,n,()=>r.next(i),e),()=>$t(r,n,()=>r.complete(),e),i=>$t(r,n,()=>r.error(i),e)))})}function Tn(n,e=0){return le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function mE(n,e){return He(n).pipe(Tn(e),cn(e))}function yE(n,e){return He(n).pipe(Tn(e),cn(e))}function vE(n,e){return new me(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function _E(n,e){return new me(t=>{let r;return $t(t,e,()=>{r=n[rl](),$t(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function al(n,e){if(!n)throw new Error("Iterable cannot be null");return new me(t=>{$t(t,e,()=>{let r=n[Symbol.asyncIterator]();$t(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function wE(n,e){return al(ol(n),e)}function IE(n,e){if(n!=null){if(el(n))return mE(n,e);if(Ju(n))return vE(n,e);if(Xu(n))return yE(n,e);if(tl(n))return al(n,e);if(il(n))return _E(n,e);if(sl(n))return wE(n,e)}throw nl(n)}function Ee(n,e){return e?IE(n,e):He(n)}function te(...n){let e=Un(n);return Ee(n,e)}function Vo(n,e){let t=oe(n)?n:()=>n,r=i=>i.error(t());return new me(e?i=>e.schedule(r,0,i):r)}function Sp(n){return!!n&&(n instanceof me||oe(n.lift)&&oe(n.subscribe))}var ur=xo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function W(n,e){return le((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:aR}=Array;function cR(n,e){return aR(e)?n(...e):n(e)}function EE(n){return W(e=>cR(n,e))}var{isArray:uR}=Array,{getPrototypeOf:lR,prototype:dR,keys:hR}=Object;function DE(n){if(n.length===1){let e=n[0];if(uR(e))return{args:e,keys:null};if(fR(e)){let t=hR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function fR(n){return n&&typeof n=="object"&&lR(n)===dR}function CE(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Va(...n){let e=Un(n),t=fE(n),{args:r,keys:i}=DE(n);if(r.length===0)return Ee([],e);let o=new me(pR(r,e,i?s=>CE(i,s):Rt));return t?o.pipe(EE(t)):o}function pR(n,e,t=Rt){return r=>{TE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)TE(e,()=>{let l=Ee(n[c],e),h=!1;l.subscribe(he(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function TE(n,e,t){n?$t(t,n,e):e()}function bE(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},y=M=>l<r?T(M):c.push(M),T=M=>{o&&e.next(M),l++;let N=!1;He(t(M,h++)).subscribe(he(e,B=>{i?.(B),o?y(B):e.next(B)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let B=c.shift();s?$t(e,s,()=>T(B)):T(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(he(e,y,()=>{p=!0,m()})),()=>{a?.()}}function it(n,e,t=1/0){return oe(e)?it((r,i)=>W((o,s)=>e(r,o,i,s))(He(n(r,i))),t):(typeof e=="number"&&(t=e),le((r,i)=>bE(r,i,n,t)))}function Vr(n=1/0){return it(Rt,n)}function SE(){return Vr(1)}function jo(...n){return SE()(Ee(n,Un(n)))}function cl(n){return new me(e=>{He(n()).subscribe(e)})}function Ap(...n){let e=Un(n),t=pE(n,1/0),r=n;return r.length?r.length===1?He(r[0]):Vr(t)(Ee(r,e)):Nt}function yt(n,e){return le((t,r)=>{let i=0;t.subscribe(he(r,o=>n.call(e,o,i++)&&r.next(o)))})}function jr(n){return le((e,t)=>{let r=null,i=!1,o;r=e.subscribe(he(t,void 0,void 0,s=>{o=He(n(s,jr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function AE(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(he(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Ri(n,e){return oe(e)?it(n,e,1):it(n,1)}function Br(n){return le((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function lr(n){return n<=0?()=>Nt:le((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function xp(n){return W(()=>n)}function Mp(n,e=Rt){return n=n??gR,le((t,r)=>{let i,o=!0;t.subscribe(he(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function gR(n,e){return n===e}function ul(n=mR){return le((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function mR(){return new ur}function ja(n){return le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function un(n,e){let t=arguments.length>=2;return r=>r.pipe(n?yt((i,o)=>n(i,o,r)):Rt,lr(1),t?Br(e):ul(()=>new ur))}function Bo(n){return n<=0?()=>Nt:le((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Rp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?yt((i,o)=>n(i,o,r)):Rt,Bo(1),t?Br(e):ul(()=>new ur))}function Ba(){return le((n,e)=>{let t,r=!1;n.subscribe(he(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Ni(n,e){return le(AE(n,e,arguments.length>=2,!0))}function xE(n={}){let{connector:e=()=>new Je,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=c=void 0,h=p=!1},T=()=>{let M=s;y(),M?.unsubscribe()};return le((M,N)=>{l++,!p&&!h&&m();let B=c=c??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=Np(T,i))}),B.subscribe(N),!s&&l>0&&(s=new cr({next:z=>B.next(z),error:z=>{p=!0,m(),a=Np(y,t,z),B.error(z)},complete:()=>{h=!0,m(),a=Np(y,r),B.complete()}}),He(M).subscribe(s))})(o)}}function Np(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new cr({next:()=>{r.unsubscribe(),n()}});return He(e(...t)).subscribe(r)}function ll(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,xE({connector:()=>new Ku(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Pi(...n){let e=Un(n);return le((t,r)=>{(e?jo(n,t,e):jo(n,t)).subscribe(r)})}function Ke(n,e){return le((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(he(r,c=>{i?.unsubscribe();let l=0,h=o++;He(n(c,h)).subscribe(i=he(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function dl(n,e){return oe(e)?Ke(()=>n,e):Ke(()=>n)}function Pp(n){return le((e,t)=>{He(n).subscribe(he(t,()=>t.complete(),ka)),!t.closed&&e.subscribe(t)})}function lt(n,e,t){let r=oe(n)||e||t?{next:n,error:e,complete:t}:n;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Rt}var pD="https://g.co/ng/security#xss",J=class extends Error{constructor(e,t){super(Mg(e,t)),this.code=e}};function Mg(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Xa(n){return{toString:n}.toString()}var hl="__parameters__";function yR(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function gD(n,e,t){return Xa(()=>{let r=yR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(hl)?c[hl]:Object.defineProperty(c,hl,{value:[]})[hl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Xt=globalThis;function xe(n){for(let e in n)if(n[e]===xe)return e;throw Error("Could not find renamed property on target object.")}function kt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(kt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function ME(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var vR=xe({__forward_ref__:xe});function mD(n){return n.__forward_ref__=mD,n.toString=function(){return kt(this())},n}function ln(n){return yD(n)?n():n}function yD(n){return typeof n=="function"&&n.hasOwnProperty(vR)&&n.__forward_ref__===mD}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ft(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wl(n){return RE(n,_D)||RE(n,wD)}function vD(n){return Wl(n)!==null}function RE(n,e){return n.hasOwnProperty(e)?n[e]:null}function _R(n){let e=n&&(n[_D]||n[wD]);return e||null}function NE(n){return n&&(n.hasOwnProperty(PE)||n.hasOwnProperty(wR))?n[PE]:null}var _D=xe({\u0275prov:xe}),PE=xe({\u0275inj:xe}),wD=xe({ngInjectableDef:xe}),wR=xe({ngInjectorDef:xe}),K=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ID(n){return n&&!!n.\u0275providers}var IR=xe({\u0275cmp:xe}),ER=xe({\u0275dir:xe}),DR=xe({\u0275pipe:xe}),CR=xe({\u0275mod:xe}),wl=xe({\u0275fac:xe}),$a=xe({__NG_ELEMENT_ID__:xe}),kE=xe({__NG_ENV_ID__:xe});function Rg(n){return typeof n=="string"?n:n==null?"":String(n)}function TR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Rg(n)}function bR(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new J(-200,n)}function Ng(n,e){throw new J(-201,!1)}var de=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(de||{}),Gp;function ED(){return Gp}function Ht(n){let e=Gp;return Gp=n,e}function DD(n,e,t){let r=Wl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&de.Optional)return null;if(e!==void 0)return e;Ng(n,"Injector")}var SR={},qa=SR,Wp="__NG_DI_FLAG__",Il="ngTempTokenPath",AR="ngTokenPath",xR=/\n/gm,MR="\u0275",OE="__source",zo;function RR(){return zo}function Ur(n){let e=zo;return zo=n,e}function NR(n,e=de.Default){if(zo===void 0)throw new J(-203,!1);return zo===null?DD(n,void 0,e):zo.get(n,e&de.Optional?null:void 0,e)}function O(n,e=de.Default){return(ED()||NR)(ln(n),e)}function j(n,e=de.Default){return O(n,Kl(e))}function Kl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Kp(n){let e=[];for(let t=0;t<n.length;t++){let r=ln(n[t]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=de.Default;for(let s=0;s<r.length;s++){let a=r[s],c=PR(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function CD(n,e){return n[Wp]=e,n.prototype[Wp]=e,n}function PR(n){return n[Wp]}function kR(n,e,t,r){let i=n[Il];throw e[OE]&&i.unshift(e[OE]),n.message=OR(`
`+n.message,i,t,r),n[AR]=i,n[Il]=null,n}function OR(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==MR?n.slice(2):n;let i=kt(e);if(Array.isArray(e))i=e.map(kt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):kt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(xR,`
  `)}`}var rs=CD(gD("Optional"),8);var Pg=CD(gD("SkipSelf"),4);function Li(n,e){let t=n.hasOwnProperty(wl);return t?n[wl]:null}function kg(n,e){n.forEach(t=>Array.isArray(t)?kg(t,e):e(t))}function TD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function El(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function FR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function LR(n,e,t){let r=ec(n,e);return r>=0?n[r|1]=t:(r=~r,FR(n,r,e,t)),r}function kp(n,e){let t=ec(n,e);if(t>=0)return n[t|1]}function ec(n,e){return VR(n,e,1)}function VR(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var za={},Sn=[],Wo=new K(""),bD=new K("",-1),SD=new K(""),Dl=class{get(e,t=qa){if(t===qa){let r=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw r.name="NullInjectorError",r}return t}},AD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(AD||{}),Hn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Hn||{}),qr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(qr||{});function jR(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Qp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];UR(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function BR(n){return n===3||n===4||n===6}function UR(n){return n.charCodeAt(0)===64}function Og(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?FE(n,t,i,null,e[++r]):FE(n,t,i,null,null))}}return n}function FE(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var xD="ng-template";function $R(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jR(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Fg(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Fg(n){return n.type===4&&n.value!==xD}function HR(n,e,t){let r=n.type===4&&!t?xD:n.value;return e===r}function qR(n,e,t){let r=4,i=n.attrs,o=i!==null?WR(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!bn(r)&&!bn(c))return!1;if(s&&bn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!HR(n,c,t)||c===""&&e.length===1){if(bn(r))return!1;s=!0}}else if(r&8){if(i===null||!$R(n,i,c,t)){if(bn(r))return!1;s=!0}}else{let l=e[++a],h=zR(c,i,Fg(n),t);if(h===-1){if(bn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(bn(r))return!1;s=!0}}}}return bn(r)||s}function bn(n){return(n&1)===0}function zR(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return KR(e,n)}function GR(n,e,t=!1){for(let r=0;r<e.length;r++)if(qR(n,e[r],t))return!0;return!1}function WR(n){for(let e=0;e<n.length;e++){let t=n[e];if(BR(t))return e}return n.length}function KR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function LE(n,e){return n?":not("+e.trim()+")":e}function QR(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!bn(s)&&(e+=LE(o,i),i=""),r=s,o=o||!bn(r);t++}return i!==""&&(e+=LE(o,i)),e}function YR(n){return n.map(QR).join(",")}function ZR(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!bn(i))break;i=o}r++}return{attrs:e,classes:t}}function ft(n){return Xa(()=>{let e=OD(n),t=Ne(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===AD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Hn.Emulated,styles:n.styles||Sn,_:null,schemas:n.schemas||null,tView:null,id:""});FD(t);let r=n.dependencies;return t.directiveDefs=jE(r,!1),t.pipeDefs=jE(r,!0),t.id=eN(t),t})}function JR(n){return zr(n)||RD(n)}function XR(n){return n!==null}function Lt(n){return Xa(()=>({type:n.type,bootstrap:n.bootstrap||Sn,declarations:n.declarations||Sn,imports:n.imports||Sn,exports:n.exports||Sn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function VE(n,e){if(n==null)return za;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=qr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==qr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function tc(n){return Xa(()=>{let e=OD(n);return FD(e),e})}function MD(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function zr(n){return n[IR]||null}function RD(n){return n[ER]||null}function ND(n){return n[DR]||null}function PD(n){let e=zr(n)||RD(n)||ND(n);return e!==null?e.standalone:!1}function kD(n,e){let t=n[CR]||null;if(!t&&e===!0)throw new Error(`Type ${kt(n)} does not have '\u0275mod' property.`);return t}function OD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||za,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Sn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:VE(n.inputs,e),outputs:VE(n.outputs),debugInfo:null}}function FD(n){n.features?.forEach(e=>e(n))}function jE(n,e){if(!n)return null;let t=e?ND:JR;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(XR)}function eN(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function tN(...n){return{\u0275providers:LD(!0,n),\u0275fromNgModule:!0}}function LD(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return kg(e,s=>{let a=s;Yp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&VD(i,o),t}function VD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Lg(i,o=>{e(o,r)})}}function Yp(n,e,t,r){if(n=ln(n),!n)return!1;let i=null,o=NE(n),s=!o&&zr(n);if(!o&&!s){let c=n.ngModule;if(o=NE(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Yp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{kg(o.imports,h=>{Yp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&VD(l,e)}if(!a){let l=Li(i)||(()=>new i);e({provide:i,useFactory:l,deps:Sn},i),e({provide:SD,useValue:i,multi:!0},i),e({provide:Wo,useValue:()=>O(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Lg(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Lg(n,e){for(let t of n)ID(t)&&(t=t.\u0275providers),Array.isArray(t)?Lg(t,e):e(t)}var nN=xe({provide:String,useValue:xe});function jD(n){return n!==null&&typeof n=="object"&&nN in n}function rN(n){return!!(n&&n.useExisting)}function iN(n){return!!(n&&n.useFactory)}function Zp(n){return typeof n=="function"}var Ql=new K(""),ml={},oN={},Op;function Vg(){return Op===void 0&&(Op=new Dl),Op}var en=class{},Ga=class extends en{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xp(e,s=>this.processProvider(s)),this.records.set(bD,Uo(void 0,this)),i.has("environment")&&this.records.set(en,Uo(void 0,this));let o=this.records.get(Ql);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(SD,Sn,de.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=be(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),be(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ur(this),r=Ht(void 0),i;try{return e()}finally{Ur(t),Ht(r)}}get(e,t=qa,r=de.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(kE))return e[kE](this);r=Kl(r);let i,o=Ur(this),s=Ht(void 0);try{if(!(r&de.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=dN(e)&&Wl(e);l&&this.injectableDefInScope(l)?c=Uo(Jp(e),ml):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&de.Self?Vg():this.parent;return t=r&de.Optional&&t===qa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Il]=a[Il]||[]).unshift(kt(e)),o)throw a;return kR(a,e,"R3InjectorError",this.source)}else throw a}finally{Ht(s),Ur(o)}}resolveInjectorInitializers(){let e=be(null),t=Ur(this),r=Ht(void 0),i;try{let o=this.get(Wo,Sn,de.Self);for(let s of o)s()}finally{Ur(t),Ht(r),be(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(kt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(e){e=ln(e);let t=Zp(e)?e:ln(e&&e.provide),r=aN(e);if(!Zp(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Uo(void 0,ml,!0),i.factory=()=>Kp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=be(null);try{return t.value===ml&&(t.value=oN,t.value=t.factory()),typeof t.value=="object"&&t.value&&lN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{be(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ln(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Jp(n){let e=Wl(n),t=e!==null?e.factory:Li(n);if(t!==null)return t;if(n instanceof K)throw new J(204,!1);if(n instanceof Function)return sN(n);throw new J(204,!1)}function sN(n){if(n.length>0)throw new J(204,!1);let t=_R(n);return t!==null?()=>t.factory(n):()=>new n}function aN(n){if(jD(n))return Uo(void 0,n.useValue);{let e=cN(n);return Uo(e,ml)}}function cN(n,e,t){let r;if(Zp(n)){let i=ln(n);return Li(i)||Jp(i)}else if(jD(n))r=()=>ln(n.useValue);else if(iN(n))r=()=>n.useFactory(...Kp(n.deps||[]));else if(rN(n))r=()=>O(ln(n.useExisting));else{let i=ln(n&&(n.useClass||n.provide));if(uN(n))r=()=>new i(...Kp(n.deps));else return Li(i)||Jp(i)}return r}function Uo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function uN(n){return!!n.deps}function lN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function dN(n){return typeof n=="function"||typeof n=="object"&&n instanceof K}function Xp(n,e){for(let t of n)Array.isArray(t)?Xp(t,e):t&&ID(t)?Xp(t.\u0275providers,e):e(t)}function Gn(n,e){n instanceof Ga&&n.assertNotDestroyed();let t,r=Ur(n),i=Ht(void 0);try{return e()}finally{Ur(r),Ht(i)}}function BD(){return ED()!==void 0||RR()!=null}function hN(n){if(!BD())throw new J(-203,!1)}function fN(n){let e=Xt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function pN(n){return typeof n=="function"}var gr=0,fe=1,se=2,Ot=3,An=4,xn=5,Cl=6,BE=7,dr=8,Ko=9,qn=10,Ct=11,Wa=12,UE=13,is=14,zn=15,Qo=16,$o=17,Yo=18,Yl=19,UD=20,Hr=21,Fp=22,dn=23,fn=25,$D=1;var Vi=7,Tl=8,bl=9,hn=10,Sl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Sl||{});function Oi(n){return Array.isArray(n)&&typeof n[$D]=="object"}function mr(n){return Array.isArray(n)&&n[$D]===!0}function jg(n){return(n.flags&4)!==0}function Zl(n){return n.componentOffset>-1}function Bg(n){return(n.flags&1)===1}function nc(n){return!!n.template}function eg(n){return(n[se]&512)!==0}var tg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function HD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Jl(){return qD}function qD(n){return n.type.prototype.ngOnChanges&&(n.setInput=mN),gN}Jl.ngInherit=!0;function gN(){let n=GD(this),e=n?.current;if(e){let t=n.previous;if(t===za)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function mN(n,e,t,r,i){let o=this.declaredInputs[r],s=GD(n)||yN(n,{previous:za,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new tg(l&&l.currentValue,t,c===za),HD(n,e,i,t)}var zD="__ngSimpleChanges__";function GD(n){return n[zD]||null}function yN(n,e){return n[zD]=e}var $E=null;var $r=function(n,e,t){$E?.(n,e,t)},vN="svg",_N="math";function hr(n){for(;Array.isArray(n);)n=n[gr];return n}function WD(n,e){return hr(e[n])}function Wn(n,e){return hr(e[n.index])}function KD(n,e){return n.data[e]}function QD(n,e){return n[e]}function os(n,e){let t=e[n];return Oi(t)?t:t[gr]}function Ug(n){return(n[se]&128)===128}function wN(n){return mr(n[Ot])}function Zo(n,e){return e==null?null:n[e]}function YD(n){n[$o]=0}function ZD(n){n[se]&1024||(n[se]|=1024,Ug(n)&&ed(n))}function IN(n,e){for(;n>0;)e=e[is],n--;return e}function Xl(n){return!!(n[se]&9216||n[dn]?.dirty)}function ng(n){n[qn].changeDetectionScheduler?.notify(8),n[se]&64&&(n[se]|=1024),Xl(n)&&ed(n)}function ed(n){n[qn].changeDetectionScheduler?.notify(0);let e=ji(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Ug(e)));)e=ji(e)}function JD(n,e){if((n[se]&256)===256)throw new J(911,!1);n[Hr]===null&&(n[Hr]=[]),n[Hr].push(e)}function EN(n,e){if(n[Hr]===null)return;let t=n[Hr].indexOf(e);t!==-1&&n[Hr].splice(t,1)}function ji(n){let e=n[Ot];return mr(e)?e[Ot]:e}var pe={lFrame:c0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var XD=!1;function DN(){return pe.lFrame.elementDepthCount}function CN(){pe.lFrame.elementDepthCount++}function TN(){pe.lFrame.elementDepthCount--}function e0(){return pe.bindingsEnabled}function bN(){return pe.skipHydrationRootTNode!==null}function SN(n){return pe.skipHydrationRootTNode===n}function AN(){pe.skipHydrationRootTNode=null}function Qe(){return pe.lFrame.lView}function Mn(){return pe.lFrame.tView}function Rn(){let n=t0();for(;n!==null&&n.type===64;)n=n.parent;return n}function t0(){return pe.lFrame.currentTNode}function xN(){let n=pe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Hi(n,e){let t=pe.lFrame;t.currentTNode=n,t.isParent=e}function $g(){return pe.lFrame.isParent}function n0(){pe.lFrame.isParent=!1}function MN(){return pe.lFrame.contextLView}function r0(){return XD}function HE(n){XD=n}function RN(){let n=pe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function NN(n){return pe.lFrame.bindingIndex=n}function i0(){return pe.lFrame.bindingIndex++}function PN(n){let e=pe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function kN(){return pe.lFrame.inI18n}function ON(n,e){let t=pe.lFrame;t.bindingIndex=t.bindingRootIndex=n,rg(e)}function FN(){return pe.lFrame.currentDirectiveIndex}function rg(n){pe.lFrame.currentDirectiveIndex=n}function LN(n){let e=pe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function o0(n){pe.lFrame.currentQueryIndex=n}function VN(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[xn]:null}function s0(n,e,t){if(t&de.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&de.Host);)if(i=VN(o),i===null||(o=o[is],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=pe.lFrame=a0();return r.currentTNode=e,r.lView=n,!0}function Hg(n){let e=a0(),t=n[fe];pe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function a0(){let n=pe.lFrame,e=n===null?null:n.child;return e===null?c0(n):e}function c0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function u0(){let n=pe.lFrame;return pe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var l0=u0;function qg(){let n=u0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function jN(n){return(pe.lFrame.contextLView=IN(n,pe.lFrame.contextLView))[dr]}function ss(){return pe.lFrame.selectedIndex}function Bi(n){pe.lFrame.selectedIndex=n}function d0(){let n=pe.lFrame;return KD(n.tView,n.selectedIndex)}function BN(){return pe.lFrame.currentNamespace}var h0=!0;function td(){return h0}function nd(n){h0=n}function UN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=qD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function rd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function yl(n,e,t){f0(n,e,3,t)}function vl(n,e,t,r){(n[se]&3)===t&&f0(n,e,t,r)}function Lp(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function f0(n,e,t,r){let i=r!==void 0?n[$o]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[$o]+=65536),(a<o||o==-1)&&($N(n,t,e,c),n[$o]=(n[$o]&4294901760)+c+2),c++}function qE(n,e){$r(4,n,e);let t=be(null);try{e.call(n)}finally{be(t),$r(5,n,e)}}function $N(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[se]>>14<n[$o]>>16&&(n[se]&3)===e&&(n[se]+=16384,qE(a,o)):qE(a,o)}var Go=-1,Ka=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function HN(n){return n instanceof Ka}function qN(n){return(n.flags&8)!==0}function zN(n){return(n.flags&16)!==0}var Vp={},ig=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Kl(r);let i=this.injector.get(e,Vp,r);return i!==Vp||t===Vp?i:this.parentInjector.get(e,t,r)}};function p0(n){return n!==Go}function Al(n){return n&32767}function GN(n){return n>>16}function xl(n,e){let t=GN(n),r=e;for(;t>0;)r=r[is],t--;return r}var og=!0;function Ml(n){let e=og;return og=n,e}var WN=256,g0=WN-1,m0=5,KN=0,$n={};function QN(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty($a)&&(r=t[$a]),r==null&&(r=t[$a]=KN++);let i=r&g0,o=1<<i;e.data[n+(i>>m0)]|=o}function y0(n,e){let t=v0(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,jp(r.data,n),jp(e,null),jp(r.blueprint,null));let i=zg(n,e),o=n.injectorIndex;if(p0(i)){let s=Al(i),a=xl(i,e),c=a[fe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function jp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function v0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function zg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=D0(i),r===null)return Go;if(t++,i=i[is],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Go}function YN(n,e,t){QN(n,e,t)}function _0(n,e,t){if(t&de.Optional||n!==void 0)return n;Ng(e,"NodeInjector")}function w0(n,e,t,r){if(t&de.Optional&&r===void 0&&(r=null),!(t&(de.Self|de.Host))){let i=n[Ko],o=Ht(void 0);try{return i?i.get(e,r,t&de.Optional):DD(e,r,t&de.Optional)}finally{Ht(o)}}return _0(r,e,t)}function I0(n,e,t,r=de.Default,i){if(n!==null){if(e[se]&2048&&!(r&de.Self)){let s=tP(n,e,t,r,$n);if(s!==$n)return s}let o=E0(n,e,t,r,$n);if(o!==$n)return o}return w0(e,t,r,i)}function E0(n,e,t,r,i){let o=XN(t);if(typeof o=="function"){if(!s0(e,n,r))return r&de.Host?_0(i,t,r):w0(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&de.Optional))Ng(t);else return s}finally{l0()}}else if(typeof o=="number"){let s=null,a=v0(n,e),c=Go,l=r&de.Host?e[zn][xn]:null;for((a===-1||r&de.SkipSelf)&&(c=a===-1?zg(n,e):e[a+8],c===Go||!GE(r,!1)?a=-1:(s=e[fe],a=Al(c),e=xl(c,e)));a!==-1;){let h=e[fe];if(zE(o,a,h.data)){let p=ZN(a,e,t,s,r,l);if(p!==$n)return p}c=e[a+8],c!==Go&&GE(r,e[fe].data[a+8]===l)&&zE(o,a,e)?(s=h,a=Al(c),e=xl(c,e)):a=-1}}return i}function ZN(n,e,t,r,i,o){let s=e[fe],a=s.data[n+8],c=r==null?Zl(a)&&og:r!=s&&(a.type&3)!==0,l=i&de.Host&&o===a,h=JN(a,s,t,c,l);return h!==null?Qa(e,s,h,a):$n}function JN(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let T=s[y];if(y<c&&t===T||y>=c&&T.type===t)return y}if(i){let y=s[c];if(y&&nc(y)&&y.type===t)return c}return null}function Qa(n,e,t,r){let i=n[t],o=e.data;if(HN(i)){let s=i;s.resolving&&bR(TR(o[t]));let a=Ml(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Ht(s.injectImpl):null,h=s0(n,r,de.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&UN(t,o[t],e)}finally{l!==null&&Ht(l),Ml(a),s.resolving=!1,l0()}}return i}function XN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty($a)?n[$a]:void 0;return typeof e=="number"?e>=0?e&g0:eP:e}function zE(n,e,t){let r=1<<n;return!!(t[e+(n>>m0)]&r)}function GE(n,e){return!(n&de.Self)&&!(n&de.Host&&e)}var Fi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return I0(this._tNode,this._lView,e,Kl(r),t)}};function eP(){return new Fi(Rn(),Qe())}function Gg(n){return Xa(()=>{let e=n.prototype.constructor,t=e[wl]||sg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[wl]||sg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function sg(n){return yD(n)?()=>{let e=sg(ln(n));return e&&e()}:Li(n)}function tP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!(s[se]&512);){let a=E0(o,s,t,r|de.Self,$n);if(a!==$n)return a;let c=o.parent;if(!c){let l=s[UD];if(l){let h=l.get(t,$n,r);if(h!==$n)return h}c=D0(s),s=s[is]}o=c}return i}function D0(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[xn]:null}function WE(n,e=null,t=null,r){let i=C0(n,e,t,r);return i.resolveInjectorInitializers(),i}function C0(n,e=null,t=null,r,i=new Set){let o=[t||Sn,tN(n)];return r=r||(typeof n=="object"?void 0:kt(n)),new Ga(o,e||Vg(),r||null,i)}var pn=class n{static{this.THROW_IF_NOT_FOUND=qa}static{this.NULL=new Dl}static create(e,t){if(Array.isArray(e))return WE({name:""},t,e,"");{let r=e.name??"";return WE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>O(bD)})}static{this.__NG_ELEMENT_ID__=-1}};var nP=new K("");nP.__NG_ELEMENT_ID__=n=>{let e=Rn();if(e===null)throw new J(204,!1);if(e.type&2)return e.value;if(n&de.Optional)return null;throw new J(204,!1)};var rP="ngOriginalError";function Bp(n){return n[rP]}var T0=!0,Wg=(()=>{class n{static{this.__NG_ELEMENT_ID__=iP}static{this.__NG_ENV_ID__=t=>t}}return n})(),ag=class extends Wg{constructor(e){super(),this._lView=e}onDestroy(e){return JD(this._lView,e),()=>EN(this._lView,e)}};function iP(){return new ag(Qe())}var as=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new mt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();var cg=class extends Je{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,BD()&&(this.destroyRef=j(Wg,{optional:!0})??void 0,this.pendingTasks=j(as,{optional:!0})??void 0)}emit(e){let t=be(null);try{super.next(e)}finally{be(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof We&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Pt=cg;function Rl(...n){}function b0(n){let e,t;function r(){n=Rl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function KE(n){return queueMicrotask(()=>n()),()=>{n=Rl}}var Kg="isAngularZone",Nl=Kg+"_ID",oP=0,ye=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pt(!1),this.onMicrotaskEmpty=new Pt(!1),this.onStable=new Pt(!1),this.onError=new Pt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=T0}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,cP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Kg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new J(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,sP,Rl,Rl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},sP={};function Qg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function aP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){b0(()=>{n.callbackScheduled=!1,ug(n),n.isCheckStableRunning=!0,Qg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),ug(n)}function cP(n){let e=()=>{aP(n)},t=oP++;n._inner=n._inner.fork({name:"angular",properties:{[Kg]:!0,[Nl]:t,[Nl+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(uP(c))return r.invokeTask(o,s,a,c);try{return QE(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),YE(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return QE(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!lP(c)&&e(),YE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,ug(n),Qg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function ug(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function QE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function YE(n){n._nesting--,Qg(n)}var Pl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pt,this.onMicrotaskEmpty=new Pt,this.onStable=new Pt,this.onError=new Pt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function uP(n){return S0(n,"__ignore_ng_zone__")}function lP(n){return S0(n,"__scheduler_tick__")}function S0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function dP(n="zone.js",e){return n==="noop"?new Pl:n==="zone.js"?new ye(e):n}var fr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Bp(e);for(;t&&Bp(t);)t=Bp(t);return t||null}},hP=new K("",{providedIn:"root",factory:()=>{let n=j(ye),e=j(fr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function fP(){return id(Rn(),Qe())}function id(n,e){return new od(Wn(n,e))}var od=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=fP}}return n})();function A0(n){return(n.flags&128)===128}var x0=new Map,pP=0;function gP(){return pP++}function mP(n){x0.set(n[Yl],n)}function lg(n){x0.delete(n[Yl])}var ZE="__ngContext__";function Gr(n,e){Oi(e)?(n[ZE]=e[Yl],mP(e)):n[ZE]=e}function M0(n){return N0(n[Wa])}function R0(n){return N0(n[An])}function N0(n){for(;n!==null&&!mr(n);)n=n[An];return n}var dg;function P0(n){dg=n}function yP(){if(dg!==void 0)return dg;if(typeof document<"u")return document;throw new J(210,!1)}var sd=new K("",{providedIn:"root",factory:()=>vP}),vP="ng",Yg=new K(""),qt=new K("",{providedIn:"platform",factory:()=>"unknown"});var Zg=new K("",{providedIn:"root",factory:()=>yP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _P="h",wP="b";var IP=()=>null;function Jg(n,e,t=!1){return IP(n,e,t)}var k0=!1,EP=new K("",{providedIn:"root",factory:()=>k0});var kl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pD})`}};function ad(n){return n instanceof kl?n.changingThisBreaksApplicationSecurity:n}function O0(n,e){let t=DP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${pD})`)}return t===e}function DP(n){return n instanceof kl&&n.getTypeName()||null}var CP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function F0(n){return n=String(n),n.match(CP)?n:"unsafe:"+n}var Xg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Xg||{});function L0(n){let e=TP();return e?e.sanitize(Xg.URL,n)||"":O0(n,"URL")?ad(n):F0(Rg(n))}function TP(){let n=Qe();return n&&n[qn].sanitizer}var bP=/^>|^->|<!--|-->|--!>|<!-$/g,SP=/(<|>)/g,AP="\u200B$1\u200B";function xP(n){return n.replace(bP,e=>e.replace(SP,AP))}function V0(n){return n instanceof Function?n():n}function MP(n){return(n??j(pn)).get(qt)==="browser"}var pr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(pr||{}),RP;function em(n,e){return RP(n,e)}function Ho(n,e,t,r,i){if(r!=null){let o,s=!1;mr(r)?o=r:Oi(r)&&(s=!0,r=r[gr]);let a=hr(r);n===0&&t!==null?i==null?H0(e,t,a):Ol(e,t,a,i||null,!0):n===1&&t!==null?Ol(e,t,a,i||null,!0):n===2?WP(e,a,s):n===3&&e.destroyNode(a),o!=null&&QP(e,n,o,t,i)}}function NP(n,e){return n.createText(e)}function PP(n,e,t){n.setValue(e,t)}function kP(n,e){return n.createComment(xP(e))}function j0(n,e,t){return n.createElement(e,t)}function OP(n,e){B0(n,e),e[gr]=null,e[xn]=null}function FP(n,e,t,r,i,o){r[gr]=i,r[xn]=e,ud(n,r,t,1,i,o)}function B0(n,e){e[qn].changeDetectionScheduler?.notify(9),ud(n,e,e[Ct],2,null,null)}function LP(n){let e=n[Wa];if(!e)return Up(n[fe],n);for(;e;){let t=null;if(Oi(e))t=e[Wa];else{let r=e[hn];r&&(t=r)}if(!t){for(;e&&!e[An]&&e!==n;)Oi(e)&&Up(e[fe],e),e=e[Ot];e===null&&(e=n),Oi(e)&&Up(e[fe],e),t=e&&e[An]}e=t}}function VP(n,e,t,r){let i=hn+r,o=t.length;r>0&&(t[i-1][An]=e),r<o-hn?(e[An]=t[i],TD(t,hn+r,e)):(t.push(e),e[An]=null),e[Ot]=t;let s=e[Qo];s!==null&&t!==s&&U0(s,e);let a=e[Yo];a!==null&&a.insertView(n),ng(e),e[se]|=128}function U0(n,e){let t=n[bl],r=e[Ot];if(Oi(r))n[se]|=Sl.HasTransplantedViews;else{let i=r[Ot][zn];e[zn]!==i&&(n[se]|=Sl.HasTransplantedViews)}t===null?n[bl]=[e]:t.push(e)}function tm(n,e){let t=n[bl],r=t.indexOf(e);t.splice(r,1)}function hg(n,e){if(n.length<=hn)return;let t=hn+e,r=n[t];if(r){let i=r[Qo];i!==null&&i!==n&&tm(i,r),e>0&&(n[t-1][An]=r[An]);let o=El(n,hn+e);OP(r[fe],r);let s=o[Yo];s!==null&&s.detachView(o[fe]),r[Ot]=null,r[An]=null,r[se]&=-129}return r}function $0(n,e){if(!(e[se]&256)){let t=e[Ct];t.destroyNode&&ud(n,e,t,3,null,null),LP(e)}}function Up(n,e){if(e[se]&256)return;let t=be(null);try{e[se]&=-129,e[se]|=256,e[dn]&&hp(e[dn]),BP(n,e),jP(n,e),e[fe].type===1&&e[Ct].destroy();let r=e[Qo];if(r!==null&&mr(e[Ot])){r!==e[Ot]&&tm(r,e);let i=e[Yo];i!==null&&i.detachView(n)}lg(e)}finally{be(t)}}function jP(n,e){let t=n.cleanup,r=e[BE];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[BE]=null);let i=e[Hr];if(i!==null){e[Hr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function BP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ka)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];$r(4,a,c);try{c.call(a)}finally{$r(5,a,c)}}else{$r(4,i,o);try{o.call(i)}finally{$r(5,i,o)}}}}}function UP(n,e,t){return $P(n,e.parent,t)}function $P(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[gr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Hn.None||o===Hn.Emulated)return null}return Wn(r,t)}}function Ol(n,e,t,r,i){n.insertBefore(e,t,r,i)}function H0(n,e,t){n.appendChild(e,t)}function JE(n,e,t,r,i){r!==null?Ol(n,e,t,r,i):H0(n,e,t)}function q0(n,e){return n.parentNode(e)}function HP(n,e){return n.nextSibling(e)}function qP(n,e,t){return GP(n,e,t)}function zP(n,e,t){return n.type&40?Wn(n,t):null}var GP=zP,XE;function cd(n,e,t,r){let i=UP(n,r,e),o=e[Ct],s=r.parent||e[xn],a=qP(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)JE(o,i,t[c],a,!1);else JE(o,i,t,a,!1);XE!==void 0&&XE(o,r,e,t,i)}function Ua(n,e){if(e!==null){let t=e.type;if(t&3)return Wn(e,n);if(t&4)return fg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ua(n,r);{let i=n[e.index];return mr(i)?fg(-1,i):hr(i)}}else{if(t&128)return Ua(n,e.next);if(t&32)return em(e,n)()||hr(n[e.index]);{let r=z0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ji(n[zn]);return Ua(i,r)}else return Ua(n,e.next)}}}return null}function z0(n,e){if(e!==null){let r=n[zn][xn],i=e.projection;return r.projection[i]}return null}function fg(n,e){let t=hn+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return Ua(r,i)}return e[Vi]}function WP(n,e,t){n.removeChild(null,e,t)}function nm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Gr(hr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)nm(n,e,t.child,r,i,o,!1),Ho(e,n,i,a,o);else if(c&32){let l=em(t,r),h;for(;h=l();)Ho(e,n,i,h,o);Ho(e,n,i,a,o)}else c&16?KP(n,e,r,t,i,o):Ho(e,n,i,a,o);t=s?t.projectionNext:t.next}}function ud(n,e,t,r,i,o){nm(t,r,n.firstChild,e,i,o,!1)}function KP(n,e,t,r,i,o){let s=t[zn],c=s[xn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Ho(e,n,i,h,o)}else{let l=c,h=s[Ot];A0(r)&&(l.flags|=128),nm(n,e,l,h,i,o,!0)}}function QP(n,e,t,r,i){let o=t[Vi],s=hr(t);o!==s&&Ho(e,n,r,o,i);for(let a=hn;a<t.length;a++){let c=t[a];ud(c[fe],c,n,e,r,o)}}function YP(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:pr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=pr.Important),n.setStyle(t,r,i,o))}}function ZP(n,e,t){n.setAttribute(e,"style",t)}function G0(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function W0(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Qp(n,e,r),i!==null&&G0(n,e,i),o!==null&&ZP(n,e,o)}var Qr={};function re(n=1){K0(Mn(),Qe(),ss()+n,!1)}function K0(n,e,t,r){if(!r)if((e[se]&3)===3){let o=n.preOrderCheckHooks;o!==null&&yl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&vl(e,o,0,t)}Bi(t)}function Pe(n,e=de.Default){let t=Qe();if(t===null)return O(n,e);let r=Rn();return I0(r,t,ln(n),e)}function Q0(){let n="invalid";throw new Error(n)}function Y0(n,e,t,r,i,o){let s=be(null);try{let a=null;i&qr.SignalBased&&(a=e[r][tE]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&qr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):HD(e,a,r,o)}finally{be(s)}}function JP(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Bi(~i);else{let o=i,s=t[++r],a=t[++r];ON(s,o);let c=e[o];a(2,c)}}}finally{Bi(-1)}}function ld(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[gr]=i,p[se]=r|4|128|8|64,(l!==null||n&&n[se]&2048)&&(p[se]|=2048),YD(p),p[Ot]=p[is]=n,p[dr]=t,p[qn]=s||n&&n[qn],p[Ct]=a||n&&n[Ct],p[Ko]=c||n&&n[Ko]||null,p[xn]=o,p[Yl]=gP(),p[Cl]=h,p[UD]=l,p[zn]=e.type==2?n[zn]:p,p}function rc(n,e,t,r,i){let o=n.data[e];if(o===null)o=XP(n,e,t,r,i),kN()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=xN();o.injectorIndex=s===null?-1:s.injectorIndex}return Hi(o,!0),o}function XP(n,e,t,r,i){let o=t0(),s=$g(),a=s?o:o&&o.parent,c=n.data[e]=i1(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Z0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function J0(n,e,t,r,i){let o=ss(),s=r&2;try{Bi(-1),s&&e.length>fn&&K0(n,e,fn,!1),$r(s?2:0,i),t(r,i)}finally{Bi(o),$r(s?3:1,i)}}function rm(n,e,t){if(jg(e)){let r=be(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{be(r)}}}function im(n,e,t){e0()&&(l1(n,e,t,Wn(t,e)),(t.flags&64)===64&&nC(n,e,t))}function om(n,e,t=Wn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function X0(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=sm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sm(n,e,t,r,i,o,s,a,c,l,h){let p=fn+r,m=p+i,y=e1(p,m),T=typeof l=="function"?l():l;return y[fe]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:h}}function e1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Qr);return t}function t1(n,e,t,r){let o=r.get(EP,k0)||t===Hn.ShadowDom,s=n.selectRootElement(e,o);return n1(s),s}function n1(n){r1(n)}var r1=()=>null;function i1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return bN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function eD(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=qr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?tD(r,t,l,a,c):tD(r,t,l,a)}return r}function tD(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function o1(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,y=m?m.inputs:null,T=m?m.outputs:null;c=eD(0,p.inputs,h,c,y),l=eD(1,p.outputs,h,l,T);let M=c!==null&&s!==null&&!Fg(e)?_1(c,h,s):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function s1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function eC(n,e,t,r,i,o,s,a){let c=Wn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(cm(n,t,h,r,i),Zl(e)&&a1(t,e.index)):e.type&3?(r=s1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function a1(n,e){let t=os(e,n);t[se]&16||(t[se]|=64)}function am(n,e,t,r){if(e0()){let i=r===null?null:{"":-1},o=h1(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&tC(n,e,t,s,i,a),i&&f1(t,r,i)}t.mergedAttrs=Og(t.mergedAttrs,t.attrs)}function tC(n,e,t,r,i,o){for(let l=0;l<r.length;l++)YN(y0(t,e),n,r[l].type);g1(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=Z0(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Og(t.mergedAttrs,h.hostAttrs),m1(n,t,e,c,h),p1(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}o1(n,t,o)}function c1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;u1(s)!=a&&s.push(a),s.push(t,r,o)}}function u1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function l1(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Zl(t)&&y1(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||y0(t,e),Gr(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=Qa(e,n,a,t);if(Gr(l,e),s!==null&&v1(e,a-i,l,c,t,s),nc(c)){let h=os(t.index,e);h[dr]=Qa(e,n,a,t)}}}function nC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=FN();try{Bi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];rg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&d1(c,l)}}finally{Bi(-1),rg(s)}}function d1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function h1(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(GR(e,s.selectors,!1))if(r||(r=[]),nc(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;pg(n,e,c)}else r.unshift(s),pg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function pg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function f1(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}}function p1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;nc(e)&&(t[""]=n)}}function g1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function m1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Li(i.type,!0)),s=new Ka(o,nc(i),Pe);n.blueprint[r]=s,t[r]=s,c1(n,e,r,Z0(n,t,i.hostVars,Qr),i)}function y1(n,e,t){let r=Wn(e,n),i=X0(t),o=n[qn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=dd(n,ld(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function v1(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];Y0(r,t,c,l,h,p)}}function _1(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function rC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function iC(n,e){let t=n.contentQueries;if(t!==null){let r=be(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];o0(o),a.contentQueries(2,e[s],s)}}}finally{be(r)}}}function dd(n,e){return n[Wa]?n[UE][An]=e:n[Wa]=e,n[UE]=e,e}function gg(n,e,t){o0(0);let r=be(null);try{e(n,t)}finally{be(r)}}function w1(n,e){let t=n[Ko],r=t?t.get(fr,null):null;r&&r.handleError(e)}function cm(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];Y0(h,l,r,a,c,i)}}function I1(n,e,t){let r=WD(e,n);PP(n[Ct],r,t)}function E1(n,e){let t=os(e,n),r=t[fe];D1(r,t);let i=t[gr];i!==null&&t[Cl]===null&&(t[Cl]=Jg(i,t[Ko])),um(r,t,t[dr])}function D1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function um(n,e,t){Hg(e);try{let r=n.viewQuery;r!==null&&gg(1,r,t);let i=n.template;i!==null&&J0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Yo]?.finishViewCreation(n),n.staticContentQueries&&iC(n,e),n.staticViewQueries&&gg(2,n.viewQuery,t);let o=n.components;o!==null&&C1(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[se]&=-5,qg()}}function C1(n,e){for(let t=0;t<e.length;t++)E1(n,e[t])}function T1(n,e,t,r){let i=be(null);try{let o=e.tView,a=n[se]&4096?4096:16,c=ld(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Qo]=l;let h=n[Yo];return h!==null&&(c[Yo]=h.createEmbeddedView(o)),um(o,c,t),c}finally{be(i)}}function nD(n,e){return!e||e.firstChild===null||A0(n)}function b1(n,e,t,r=!0){let i=e[fe];if(VP(i,e,n,t),r){let s=fg(t,n),a=e[Ct],c=q0(a,n[Vi]);c!==null&&FP(i,n[xn],a,e,c,s)}let o=e[Cl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Fl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(hr(o)),mr(o)&&S1(o,r);let s=t.type;if(s&8)Fl(n,e,t.child,r);else if(s&32){let a=em(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=z0(e,t);if(Array.isArray(a))r.push(...a);else{let c=ji(e[zn]);Fl(c[fe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function S1(n,e){for(let t=hn;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&Fl(r[fe],r,i,e)}n[Vi]!==n[gr]&&e.push(n[Vi])}var oC=[];function A1(n){return n[dn]??x1(n)}function x1(n){let e=oC.pop()??Object.create(R1);return e.lView=n,e}function M1(n){n.lView[dn]!==n&&(n.lView=null,oC.push(n))}var R1=Ne(V({},up),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{ed(n.lView)},consumerOnSignalRead(){this.lView[dn]=this}});function N1(n){let e=n[dn]??Object.create(P1);return e.lView=n,e}var P1=Ne(V({},up),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ji(n.lView);for(;e&&!sC(e[fe]);)e=ji(e);e&&ZD(e)},consumerOnSignalRead(){this.lView[dn]=this}});function sC(n){return n.type!==2}var k1=100;function aC(n,e=!0,t=0){let r=n[qn],i=r.rendererFactory,o=!1;o||i.begin?.();try{O1(n,t)}catch(s){throw e&&w1(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function O1(n,e){let t=r0();try{HE(!0),mg(n,e);let r=0;for(;Xl(n);){if(r===k1)throw new J(103,!1);r++,mg(n,1)}}finally{HE(t)}}function F1(n,e,t,r){let i=e[se];if((i&256)===256)return;let o=!1,s=!1;!o&&e[qn].inlineEffectRunner?.flush(),Hg(e);let a=!0,c=null,l=null;o||(sC(n)?(l=A1(e),c=lp(l)):nE()===null?(a=!1,l=N1(e),c=lp(l)):e[dn]&&(hp(e[dn]),e[dn]=null));try{YD(e),NN(n.bindingStartIndex),t!==null&&J0(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&yl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&vl(e,y,0,null),Lp(e,0)}if(s||L1(e),cC(e,0),n.contentQueries!==null&&iC(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&yl(e,y)}else{let y=n.contentHooks;y!==null&&vl(e,y,1),Lp(e,1)}JP(n,e);let p=n.components;p!==null&&lC(e,p,0);let m=n.viewQuery;if(m!==null&&gg(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&yl(e,y)}else{let y=n.viewHooks;y!==null&&vl(e,y,2),Lp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Fp]){for(let y of e[Fp])y();e[Fp]=null}o||(e[se]&=-73)}catch(h){throw o||ed(e),h}finally{l!==null&&(rE(l,c),a&&M1(l)),qg()}}function cC(n,e){for(let t=M0(n);t!==null;t=R0(t))for(let r=hn;r<t.length;r++){let i=t[r];uC(i,e)}}function L1(n){for(let e=M0(n);e!==null;e=R0(e)){if(!(e[se]&Sl.HasTransplantedViews))continue;let t=e[bl];for(let r=0;r<t.length;r++){let i=t[r];ZD(i)}}}function V1(n,e,t){let r=os(e,n);uC(r,t)}function uC(n,e){Ug(n)&&mg(n,e)}function mg(n,e){let r=n[fe],i=n[se],o=n[dn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&dp(o)),s||=!1,o&&(o.dirty=!1),n[se]&=-9217,s)F1(r,n,r.template,n[dr]);else if(i&8192){cC(n,1);let a=r.components;a!==null&&lC(n,a,1)}}function lC(n,e,t){for(let r=0;r<e.length;r++)V1(n,e[r],t)}function dC(n,e){let t=r0()?64:1088;for(n[qn].changeDetectionScheduler?.notify(e);n;){n[se]|=t;let r=ji(n);if(eg(n)&&!r)return n;n=r}return null}var Ui=class{get rootNodes(){let e=this._lView,t=e[fe];return Fl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dr]}set context(e){this._lView[dr]=e}get destroyed(){return(this._lView[se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ot];if(mr(e)){let t=e[Tl],r=t?t.indexOf(this):-1;r>-1&&(hg(e,r),El(t,r))}this._attachedToViewContainer=!1}$0(this._lView[fe],this._lView)}onDestroy(e){JD(this._lView,e)}markForCheck(){dC(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){ng(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,aC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=eg(this._lView),t=this._lView[Qo];t!==null&&!e&&tm(t,this._lView),B0(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let t=eg(this._lView),r=this._lView[Qo];r!==null&&!t&&U0(r,this._lView),ng(this._lView)}},hd=(()=>{class n{static{this.__NG_ELEMENT_ID__=U1}}return n})(),j1=hd,B1=class extends j1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=T1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ui(i)}};function U1(){return hC(Rn(),Qe())}function hC(n,e){return n.type&4?new B1(e,n,id(n,e)):null}var o3=new RegExp(`^(\\d+)*(${wP}|${_P})*(.*)`);var $1=()=>null;function rD(n,e){return $1(n,e)}var Jo=class{},lm=new K("",{providedIn:"root",factory:()=>!1});var fC=new K(""),pC=new K(""),yg=class{},Ll=class{};function H1(n){let e=Error(`No component factory found for ${kt(n)}.`);return e[q1]=n,e}var q1="ngComponent";var vg=class{resolveComponentFactory(e){throw H1(e)}},Xo=class{static{this.NULL=new vg}},es=class{};var z1=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})();function Vl(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ME(i,a);else if(o==2){let c=a,l=e[++s];r=ME(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var jl=class extends Xo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=zr(e);return new ts(t,this.ngModule)}};function iD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:qr.None;e?t.push({propName:s,templateName:r,isSignal:(a&qr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function G1(n){let e=n.toLowerCase();return e==="svg"?vN:e==="math"?_N:null}var ts=class extends Ll{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=iD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return iD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=YR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=be(null);try{i=i||this.ngModule;let s=i instanceof en?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new ig(e,s):e,c=a.get(es,null);if(c===null)throw new J(407,!1);let l=a.get(z1,null),h=a.get(Jo,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",T=r?t1(m,r,this.componentDef.encapsulation,a):j0(m,y,G1(y)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let N=null;T!==null&&(N=Jg(T,a,!0));let B=sm(0,null,null,1,0,null,null,null,null,null,null),z=ld(null,B,null,M,null,null,p,m,a,null,N);Hg(z);let F,X,ne=null;try{let ee=this.componentDef,I,v=null;ee.findHostDirectiveDefs?(I=[],v=new Map,ee.findHostDirectiveDefs(ee,I,v),I.push(ee)):I=[ee];let w=W1(z,T);ne=K1(w,T,ee,I,z,p,m),X=KD(B,fn),T&&Z1(m,ee,T,r),t!==void 0&&J1(X,this.ngContentSelectors,t),F=Y1(ne,ee,I,v,z,[X1]),um(B,z,null)}catch(ee){throw ne!==null&&lg(ne),lg(z),ee}finally{qg()}return new _g(this.componentType,F,id(X,z),z,X)}finally{be(o)}}},_g=class extends yg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ui(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;cm(o[fe],o,i,e,t),this.previousInputValues.set(e,t);let s=os(this._tNode.index,o);dC(s,1)}}get injector(){return new Fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function W1(n,e){let t=n[fe],r=fn;return n[r]=e,rc(t,r,2,"#host",null)}function K1(n,e,t,r,i,o,s){let a=i[fe];Q1(r,n,e,s);let c=null;e!==null&&(c=Jg(e,i[Ko]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=ld(i,X0(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&pg(a,n,r.length-1),dd(i,p),i[n.index]=p}function Q1(n,e,t,r){for(let i of n)e.mergedAttrs=Og(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Vl(e,e.mergedAttrs,!0),t!==null&&W0(r,t,e))}function Y1(n,e,t,r,i,o){let s=Rn(),a=i[fe],c=Wn(s,i);tC(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=Qa(i,a,p,s);Gr(m,i)}nC(a,i,s),c&&Gr(c,i);let l=Qa(i,a,s.directiveStart+s.componentOffset,s);if(n[dr]=i[dr]=l,o!==null)for(let h of o)h(l,e);return rm(a,s,i),l}function Z1(n,e,t,r){if(r)Qp(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=ZR(e.selectors[0]);i&&Qp(n,t,i),o&&o.length>0&&G0(n,t,o.join(" "))}}function J1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function X1(){let n=Rn();rd(Qe()[fe],n)}var cs=(()=>{class n{static{this.__NG_ELEMENT_ID__=ek}}return n})();function ek(){let n=Rn();return nk(n,Qe())}var tk=cs,gC=class extends tk{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return id(this._hostTNode,this._hostLView)}get injector(){return new Fi(this._hostTNode,this._hostLView)}get parentInjector(){let e=zg(this._hostTNode,this._hostLView);if(p0(e)){let t=xl(e,this._hostLView),r=Al(e),i=t[fe].data[r+8];return new Fi(i,t)}else return new Fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=oD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-hn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=rD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,nD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!pN(e),a;if(s)a=t;else{let T=t||{};a=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}let c=s?e:new ts(zr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let M=(s?l:this.parentInjector).get(en,null);M&&(o=M)}let h=zr(c.componentType??{}),p=rD(this._lContainer,h?.id??null),m=p?.firstChild??null,y=c.create(l,i,m,o);return this.insertImpl(y.hostView,a,nD(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(wN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ot],l=new gC(c,c[xn],c[Ot]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return b1(s,i,o,r),e.attachToViewContainerRef(),TD($p(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=oD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=hg(this._lContainer,t);r&&(El($p(this._lContainer),t),$0(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=hg(this._lContainer,t);return r&&El($p(this._lContainer),t)!=null?new Ui(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function oD(n){return n[Tl]}function $p(n){return n[Tl]||(n[Tl]=[])}function nk(n,e){let t,r=e[n.index];return mr(r)?t=r:(t=rC(r,e,null,n),e[n.index]=t,dd(e,t)),ik(t,e,n,r),new gC(t,n,e)}function rk(n,e){let t=n[Ct],r=t.createComment(""),i=Wn(e,n),o=q0(t,i);return Ol(t,o,r,HP(t,i),!1),r}var ik=ak,ok=()=>!1;function sk(n,e,t){return ok(n,e,t)}function ak(n,e,t,r){if(n[Vi])return;let i;t.type&8?i=hr(r):i=rk(e,t),n[Vi]=i}var sD=new Set;function dm(n){sD.has(n)||(sD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function ck(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(hk))}return o}return Bl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>fk(o));e.push(c)}),lk(),Promise.all(e).then(()=>{})}var Bl=new Map,uk=new Set;function lk(){let n=Bl;return Bl=new Map,n}function dk(){return Bl.size===0}function hk(n){return typeof n=="string"?n:n.text()}function fk(n){uk.delete(n)}var Wr=class{},Ya=class{};var Ul=class extends Wr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jl(this);let o=kD(e);this._bootstrapComponents=V0(o.bootstrap),this._r3Injector=C0(e,t,[{provide:Wr,useValue:this},{provide:Xo,useValue:this.componentFactoryResolver},...r],kt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},$l=class extends Ya{constructor(e){super(),this.moduleType=e}create(e){return new Ul(this.moduleType,e,[])}};function pk(n,e,t){return new Ul(n,e,t,!1)}var wg=class extends Wr{constructor(e){super(),this.componentFactoryResolver=new jl(this),this.instance=null;let t=new Ga([...e.providers,{provide:Wr,useValue:this},{provide:Xo,useValue:this.componentFactoryResolver}],e.parent||Vg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function fd(n,e,t=null){return new wg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function mC(n){return mk(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function gk(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function mk(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function yk(n,e,t){return n[e]=t}function Za(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function vk(n,e,t,r){let i=Za(n,e,t);return Za(n,e+1,r)||i}function _k(n){return(n.flags&32)===32}function wk(n,e,t,r,i,o,s,a,c){let l=e.consts,h=rc(e,n,4,s||null,a||null);am(e,t,h,Zo(l,c)),rd(e,h);let p=h.tView=sm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Ik(n,e,t,r,i,o,s,a,c,l){let h=t+fn,p=e.firstCreatePass?wk(h,e,n,r,i,o,s,a,c):e.data[h];Hi(p,!1);let m=Ek(e,n,p,t);td()&&cd(e,n,m,p),Gr(m,n);let y=rC(m,n,m,p);return n[h]=y,dd(n,y),sk(y,p,n),Bg(p)&&im(e,n,p),c!=null&&om(n,p,l),p}function Ve(n,e,t,r,i,o,s,a){let c=Qe(),l=Mn(),h=Zo(l.consts,o);return Ik(c,l,n,e,t,r,i,h,s,a),Ve}var Ek=Dk;function Dk(n,e,t,r){return nd(!0),e[Ct].createComment("")}var qo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(qo||{}),yC=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Ig=class n{constructor(){this.ngZone=j(ye),this.scheduler=j(Jo),this.errorHandler=j(fr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[qo.EarlyRead,qo.Write,qo.MixedReadWrite,qo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}},Eg=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function hm(n,e){!e?.injector&&hN(hm);let t=e?.injector??j(pn);return MP(t)?(dm("NgAfterNextRender"),Tk(n,t,e,!0)):bk}function Ck(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Tk(n,e,t,r){let i=e.get(yC);i.impl??=e.get(Ig);let o=t?.phase??qo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Wg):null,a=new Eg(i.impl,Ck(n,o),r,s);return i.impl.register(a),a}var bk={destroy(){}};function vC(n,e,t,r){return Za(n,i0(),t)?e+Rg(t)+r:Qr}function fl(n,e){return n<<17|e<<2}function $i(n){return n>>17&32767}function Sk(n){return(n&2)==2}function Ak(n,e){return n&131071|e<<17}function Dg(n){return n|2}function ns(n){return(n&131068)>>2}function Hp(n,e){return n&-131069|e<<2}function xk(n){return(n&1)===1}function Cg(n){return n|1}function Mk(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=$i(s),c=ns(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||ec(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let m=$i(n[a+1]);n[r+1]=fl(m,a),m!==0&&(n[m+1]=Hp(n[m+1],r)),n[a+1]=Ak(n[a+1],r)}else n[r+1]=fl(a,0),a!==0&&(n[a+1]=Hp(n[a+1],r)),a=r;else n[r+1]=fl(c,0),a===0?a=r:n[c+1]=Hp(n[c+1],r),c=r;l&&(n[r+1]=Dg(n[r+1])),aD(n,h,r,!0),aD(n,h,r,!1),Rk(e,h,n,r,o),s=fl(a,c),o?e.classBindings=s:e.styleBindings=s}function Rk(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ec(o,e)>=0&&(t[r+1]=Cg(t[r+1]))}function aD(n,e,t,r){let i=n[t+1],o=e===null,s=r?$i(i):ns(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];Nk(c,e)&&(a=!0,n[s+1]=r?Cg(l):Dg(l)),s=r?$i(l):ns(l)}a&&(n[t+1]=r?Dg(i):Cg(i))}function Nk(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ec(n,e)>=0:!1}function je(n,e,t){let r=Qe(),i=i0();if(Za(r,i,e)){let o=Mn(),s=d0();eC(o,s,r,n,e,r[Ct],t,!1)}return je}function cD(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";cm(n,t,o[s],s,r)}function pd(n,e,t){return Pk(n,e,t,!1),pd}function Pk(n,e,t,r){let i=Qe(),o=Mn(),s=PN(2);if(o.firstUpdatePass&&Ok(o,n,s,r),e!==Qr&&Za(i,s,e)){let a=o.data[ss()];Bk(o,a,i,i[Ct],n,i[s+1]=Uk(e,t),r,s)}}function kk(n,e){return e>=n.expandoStartIndex}function Ok(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ss()],s=kk(n,t);$k(o,r)&&e===null&&!s&&(e=!1),e=Fk(i,o,e,r),Mk(i,o,e,t,s,r)}}function Fk(n,e,t,r){let i=LN(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=qp(null,n,e,t,r),t=Ja(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=qp(i,n,e,t,r),o===null){let c=Lk(n,e,r);c!==void 0&&Array.isArray(c)&&(c=qp(null,n,e,c[1],r),c=Ja(c,e.attrs,r),Vk(n,e,r,c))}else o=jk(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Lk(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ns(r)!==0)return n[$i(r)]}function Vk(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[$i(i)]=r}function jk(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ja(r,s,t)}return Ja(r,e.attrs,t)}function qp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ja(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ja(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),LR(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Bk(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=xk(l)?uD(c,e,t,i,ns(l),s):void 0;if(!Hl(h)){Hl(o)||Sk(l)&&(o=uD(c,null,t,i,a,s));let p=WD(ss(),t);YP(r,s,p,i,o)}}function uD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=t[i+1];m===Qr&&(m=p?Sn:void 0);let y=p?kp(m,r):h===r?m:void 0;if(l&&!Hl(y)&&(y=kp(c,r)),Hl(y)&&(a=y,s))return a;let T=n[i+1];i=s?$i(T):ns(T)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=kp(c,r))}return a}function Hl(n){return n!==void 0}function Uk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=kt(ad(n)))),n}function $k(n,e){return(n.flags&(e?8:16))!==0}function Hk(n,e,t,r,i,o){let s=e.consts,a=Zo(s,i),c=rc(e,n,2,r,a);return am(e,t,c,Zo(s,o)),c.attrs!==null&&Vl(c,c.attrs,!1),c.mergedAttrs!==null&&Vl(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Y(n,e,t,r){let i=Qe(),o=Mn(),s=fn+n,a=i[Ct],c=o.firstCreatePass?Hk(s,o,i,e,t,r):o.data[s],l=qk(o,i,c,a,e,n);i[s]=l;let h=Bg(c);return Hi(c,!0),W0(a,l,c),!_k(c)&&td()&&cd(o,i,l,c),DN()===0&&Gr(l,i),CN(),h&&(im(o,i,c),rm(o,c,i)),r!==null&&om(i,c),Y}function q(){let n=Rn();$g()?n0():(n=n.parent,Hi(n,!1));let e=n;SN(e)&&AN(),TN();let t=Mn();return t.firstCreatePass&&(rd(t,n),jg(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&qN(e)&&cD(t,e,Qe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&zN(e)&&cD(t,e,Qe(),e.stylesWithoutHost,!1),q}function Tt(n,e,t,r){return Y(n,e,t,r),q(),Tt}var qk=(n,e,t,r,i,o)=>(nd(!0),j0(r,i,BN()));function zk(n,e,t,r,i){let o=e.consts,s=Zo(o,r),a=rc(e,n,8,"ng-container",s);s!==null&&Vl(a,s,!0);let c=Zo(o,i);return am(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function ic(n,e,t){let r=Qe(),i=Mn(),o=n+fn,s=i.firstCreatePass?zk(o,i,r,e,t):i.data[o];Hi(s,!0);let a=Gk(i,r,s,n);return r[o]=a,td()&&cd(i,r,a,s),Gr(a,r),Bg(s)&&(im(i,r,s),rm(i,s,r)),t!=null&&om(r,s),ic}function oc(){let n=Rn(),e=Mn();return $g()?n0():(n=n.parent,Hi(n,!1)),e.firstCreatePass&&(rd(e,n),jg(n)&&e.queries.elementEnd(n)),oc}var Gk=(n,e,t,r)=>(nd(!0),kP(e[Ct],""));var ki=void 0;function Wk(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var Kk=["en",[["a","p"],["AM","PM"],ki],[["AM","PM"],ki,ki],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ki,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ki,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ki,"{1} 'at' {0}",ki],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Wk],zp={};function gn(n){let e=Qk(n),t=lD(e);if(t)return t;let r=e.split("-")[0];if(t=lD(r),t)return t;if(r==="en")return Kk;throw new J(701,!1)}function lD(n){return n in zp||(zp[n]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[n]),zp[n]}var Xe=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Xe||{});function Qk(n){return n.toLowerCase().replace(/_/g,"-")}var ql="en-US";var Yk=ql;function Zk(n){typeof n=="string"&&(Yk=n.toLowerCase().replace(/_/g,"-"))}function bt(n=1){return jN(n)}function fm(n,e,t){return _C(n,"",e,"",t),fm}function _C(n,e,t,r,i){let o=Qe(),s=vC(o,e,t,r);if(s!==Qr){let a=Mn(),c=d0();eC(a,c,o,n,s,o[Ct],i,!1)}return _C}function Jk(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function zt(n){let e=MN();return QD(e,fn+n)}function ie(n,e=""){let t=Qe(),r=Mn(),i=n+fn,o=r.firstCreatePass?rc(r,i,1,e,null):r.data[i],s=Xk(r,t,o,e,n);t[i]=s,td()&&cd(r,t,s,o),Hi(o,!1)}var Xk=(n,e,t,r,i)=>(nd(!0),NP(e[Ct],r));function Ye(n){return tn("",n,""),Ye}function tn(n,e,t){let r=Qe(),i=vC(r,n,e,t);return i!==Qr&&I1(r,ss(),i),tn}var eO=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=LD(!1,t.type),i=r.length>0?fd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(O(en))})}}return n})();function wC(n){dm("NgStandalone"),n.getStandaloneInjector=e=>e.get(eO).getOrCreateStandaloneInjector(n)}function tO(n,e){let t=n[e];return t===Qr?void 0:t}function nO(n,e,t,r,i,o,s){let a=e+t;return vk(n,a,i,o)?yk(n,a+2,s?r.call(s,i,o):r(i,o)):tO(n,a+2)}function Yr(n,e){let t=Mn(),r,i=n+fn;t.firstCreatePass?(r=rO(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Li(r.type,!0)),s,a=Ht(Pe);try{let c=Ml(!1),l=o();return Ml(c),Jk(t,Qe(),i,l),l}finally{Ht(a)}}function rO(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Zr(n,e,t,r){let i=n+fn,o=Qe(),s=QD(o,i);return iO(o,i)?nO(o,RN(),e,s.transform,t,r,s):s.transform(t,r)}function iO(n,e){return n[fe].data[e].pure}function Gt(n,e){return hC(n,e)}var pl=null;function oO(n){pl!==null&&(n.defaultEncapsulation!==pl.defaultEncapsulation||n.preserveWhitespaces!==pl.preserveWhitespaces)||(pl=n)}var Kr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},IC=new Kr("18.2.13");var gd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var pm=new K(""),sc=new K(""),md=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,gm||(sO(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(ye),O(yd),O(sc))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),yd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return gm?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function sO(n){gm=n}var gm;function ac(n){return!!n&&typeof n.then=="function"}function EC(n){return!!n&&typeof n.subscribe=="function"}var vd=new K(""),DC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=j(vd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ac(o))t.push(o);else if(EC(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mm=new K("");function aO(){iE(()=>{throw new J(600,!1)})}function cO(n){return n.isBoundToModule}var uO=10;function lO(n,e,t){try{let r=t();return ac(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function CC(n,e){return Array.isArray(e)?e.reduce(CC,n):V(V({},n),e)}var Jr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(hP),this.afterRenderManager=j(yC),this.zonelessEnabled=j(lm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Je,this.afterTick=new Je,this.componentTypes=[],this.components=[],this.isStable=j(as).hasPendingTasks.pipe(W(t=>!t)),this._injector=j(en)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Ll;if(!this._injector.get(DC).done){let m=!i&&PD(t),y=!1;throw new J(405,y)}let s;i?s=t:s=this._injector.get(Xo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=cO(s)?void 0:this._injector.get(Wr),c=r||s.selector,l=s.create(pn.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(pm,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),_l(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new J(101,!1);let t=be(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,be(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(es,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<uO;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)dO(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Xl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;_l(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(mm,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>_l(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new J(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _l(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function dO(n,e,t,r){if(!t&&!Xl(n))return;aC(n,e,t&&!r?0:1)}var Tg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},_d=(()=>{class n{compileModuleSync(t){return new $l(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=kD(t),o=V0(i.declarations).reduce((s,a)=>{let c=zr(a);return c&&s.push(new ts(c)),s},[]);return new Tg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hO=new K("");function fO(n,e,t){let r=new $l(t);return Promise.resolve(r)}function dD(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var pO=(()=>{class n{constructor(){this.zone=j(ye),this.changeDetectionScheduler=j(Jo),this.applicationRef=j(Jr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gO({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ye(Ne(V({},TC()),{scheduleInRootZone:t})),[{provide:ye,useFactory:n},{provide:Wo,multi:!0,useFactory:()=>{let r=j(pO,{optional:!0});return()=>r.initialize()}},{provide:Wo,multi:!0,useFactory:()=>{let r=j(mO);return()=>{r.initialize()}}},e===!0?{provide:fC,useValue:!0}:[],{provide:pC,useValue:t??T0}]}function TC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var mO=(()=>{class n{constructor(){this.subscription=new We,this.initialized=!1,this.zone=j(ye),this.pendingTasks=j(as)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var yO=(()=>{class n{constructor(){this.appRef=j(Jr),this.taskService=j(as),this.ngZone=j(ye),this.zonelessEnabled=j(lm),this.disableScheduling=j(fC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new We,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(pC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Pl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?KE:b0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,KE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function vO(){return typeof $localize<"u"&&$localize.locale||ql}var wd=new K("",{providedIn:"root",factory:()=>j(wd,de.Optional|de.SkipSelf)||vO()});var zl=new K("");function gl(n){return!n.moduleRef}function _O(n){let e=gl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ye);return t.run(()=>{gl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(fr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),gl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(zl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(zl);s.add(o),n.moduleRef.onDestroy(()=>{_l(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return lO(r,t,()=>{let o=e.get(DC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(wd,ql);if(Zk(s||ql),gl(n)){let a=e.get(Jr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return wO(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function wO(n,e){let t=n.injector.get(Jr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new J(-403,!1);e.push(n)}var bC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>dP(r?.ngZone,Ne(V({},TC({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[gO({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Jo,useExisting:yO}],c=pk(t.moduleType,this.injector,a);return _O({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=CC({},r);return fO(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new J(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(zl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(pn))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ha=null,SC=new K("");function IO(n){if(Ha&&!Ha.get(SC,!1))throw new J(400,!1);aO(),Ha=n;let e=n.get(bC);return CO(n),e}function ym(n,e,t=[]){let r=`Platform: ${e}`,i=new K(r);return(o=[])=>{let s=AC();if(!s||s.injector.get(SC,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):IO(EO(a,r))}return DO(i)}}function EO(n=[],e){return pn.create({name:e,providers:[{provide:Ql,useValue:"platform"},{provide:zl,useValue:new Set([()=>Ha=null])},...n]})}function DO(n){let e=AC();if(!e)throw new J(401,!1);return e}function AC(){return Ha?.get(bC)??null}function CO(n){n.get(Yg,null)?.forEach(t=>t())}function vm(){return!1}var cc=(()=>{class n{static{this.__NG_ELEMENT_ID__=TO}}return n})();function TO(n){return bO(Rn(),Qe(),(n&16)===16)}function bO(n,e,t){if(Zl(n)&&!t){let r=os(n.index,e);return new Ui(r,r)}else if(n.type&175){let r=e[zn];return new Ui(r,e)}return null}var bg=class{constructor(){}supports(e){return mC(e)}create(e){return new Sg(e)}},SO=(n,e)=>e,Sg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||SO}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<hD(r,i,o)?t:r,a=hD(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,T=y+m;h<=T&&T<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!mC(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,gk(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Ag(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Gl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Gl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ag=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},xg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Gl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new xg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function hD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function fD(){return new _m([new bg])}var _m=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:fD})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||fD()),deps:[[n,new Pg,new rs]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new J(901,!1)}}return n})();var xC=ym(null,"core",[]),MC=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(Jr))}}static{this.\u0275mod=Lt({type:n})}static{this.\u0275inj=Ft({})}}return n})();function RC(n){let e=zr(n);if(!e)return null;let t=new ts(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var VC=null;function qi(){return VC}function jC(n){VC??=n}var xd=class{};var Wt=new K(""),Sm=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(RO),providedIn:"platform"})}}return n})(),BC=new K(""),RO=(()=>{class n extends Sm{constructor(){super(),this._doc=j(Wt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qi().getBaseHref(this._doc)}onPopState(t){let r=qi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=qi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Am(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function NC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function vr(n){return n&&n[0]!=="?"?"?"+n:n}var zi=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(xm),providedIn:"root"})}}return n})(),UC=new K(""),xm=(()=>{class n extends zi{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(Wt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Am(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+vr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+vr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+vr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Sm),O(UC,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$C=(()=>{class n extends zi{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Am(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+vr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+vr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Sm),O(UC,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),us=(()=>{class n{constructor(t){this._subject=new Pt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=kO(NC(PC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+vr(r))}normalize(t){return n.stripTrailingSlash(PO(this._basePath,PC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=vr}static{this.joinWithSlash=Am}static{this.stripTrailingSlash=NC}static{this.\u0275fac=function(r){return new(r||n)(O(zi))}}static{this.\u0275prov=H({token:n,factory:()=>NO(),providedIn:"root"})}}return n})();function NO(){return new us(O(zi))}function PO(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function PC(n){return n.replace(/\/index.html$/,"")}function kO(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Vt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Vt||{}),Me=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Me||{}),nn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(nn||{}),Xr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function OO(n){return gn(n)[Xe.LocaleId]}function FO(n,e,t){let r=gn(n),i=[r[Xe.DayPeriodsFormat],r[Xe.DayPeriodsStandalone]],o=mn(i,e);return mn(o,t)}function LO(n,e,t){let r=gn(n),i=[r[Xe.DaysFormat],r[Xe.DaysStandalone]],o=mn(i,e);return mn(o,t)}function VO(n,e,t){let r=gn(n),i=[r[Xe.MonthsFormat],r[Xe.MonthsStandalone]],o=mn(i,e);return mn(o,t)}function jO(n,e){let r=gn(n)[Xe.Eras];return mn(r,e)}function Id(n,e){let t=gn(n);return mn(t[Xe.DateFormat],e)}function Ed(n,e){let t=gn(n);return mn(t[Xe.TimeFormat],e)}function Dd(n,e){let r=gn(n)[Xe.DateTimeFormat];return mn(r,e)}function Nd(n,e){let t=gn(n),r=t[Xe.NumberSymbols][e];if(typeof r>"u"){if(e===Xr.CurrencyDecimal)return t[Xe.NumberSymbols][Xr.Decimal];if(e===Xr.CurrencyGroup)return t[Xe.NumberSymbols][Xr.Group]}return r}function HC(n){if(!n[Xe.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Xe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function BO(n){let e=gn(n);return HC(e),(e[Xe.ExtraData][2]||[]).map(r=>typeof r=="string"?wm(r):[wm(r[0]),wm(r[1])])}function UO(n,e,t){let r=gn(n);HC(r);let i=[r[Xe.ExtraData][0],r[Xe.ExtraData][1]],o=mn(i,e)||[];return mn(o,t)||[]}function mn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function wm(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var $O=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Cd={},HO=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,_r=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(_r||{}),Ce=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Ce||{}),De=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(De||{});function qO(n,e,t,r){let i=XO(n);e=yr(t,e)||e;let s=[],a;for(;e;)if(a=HO.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=zC(r,c),i=JO(i,r,!0));let l="";return s.forEach(h=>{let p=YO(h);l+=p?p(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Md(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function yr(n,e){let t=OO(n);if(Cd[t]??={},Cd[t][e])return Cd[t][e];let r="";switch(e){case"shortDate":r=Id(n,nn.Short);break;case"mediumDate":r=Id(n,nn.Medium);break;case"longDate":r=Id(n,nn.Long);break;case"fullDate":r=Id(n,nn.Full);break;case"shortTime":r=Ed(n,nn.Short);break;case"mediumTime":r=Ed(n,nn.Medium);break;case"longTime":r=Ed(n,nn.Long);break;case"fullTime":r=Ed(n,nn.Full);break;case"short":let i=yr(n,"shortTime"),o=yr(n,"shortDate");r=Td(Dd(n,nn.Short),[i,o]);break;case"medium":let s=yr(n,"mediumTime"),a=yr(n,"mediumDate");r=Td(Dd(n,nn.Medium),[s,a]);break;case"long":let c=yr(n,"longTime"),l=yr(n,"longDate");r=Td(Dd(n,nn.Long),[c,l]);break;case"full":let h=yr(n,"fullTime"),p=yr(n,"fullDate");r=Td(Dd(n,nn.Full),[h,p]);break}return r&&(Cd[t][e]=r),r}function Td(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Nn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function zO(n,e){return Nn(n,3).substring(0,e)}function ot(n,e,t=0,r=!1,i=!1){return function(o,s){let a=GO(n,o);if((t>0||a>-t)&&(a+=t),n===Ce.Hours)a===0&&t===-12&&(a=12);else if(n===Ce.FractionalSeconds)return zO(a,e);let c=Nd(s,Xr.MinusSign);return Nn(a,e,c,r,i)}}function GO(n,e){switch(n){case Ce.FullYear:return e.getFullYear();case Ce.Month:return e.getMonth();case Ce.Date:return e.getDate();case Ce.Hours:return e.getHours();case Ce.Minutes:return e.getMinutes();case Ce.Seconds:return e.getSeconds();case Ce.FractionalSeconds:return e.getMilliseconds();case Ce.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function ke(n,e,t=Vt.Format,r=!1){return function(i,o){return WO(i,o,n,e,t,r)}}function WO(n,e,t,r,i,o){switch(t){case De.Months:return VO(e,i,r)[n.getMonth()];case De.Days:return LO(e,i,r)[n.getDay()];case De.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let l=BO(e),h=UO(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,T]=m,M=s>=y.hours&&a>=y.minutes,N=s<T.hours||s===T.hours&&a<T.minutes;if(y.hours<T.hours){if(M&&N)return!0}else if(M||N)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return FO(e,i,r)[s<12?0:1];case De.Eras:return jO(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function bd(n){return function(e,t,r){let i=-1*r,o=Nd(t,Xr.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case _r.Short:return(i>=0?"+":"")+Nn(s,2,o)+Nn(Math.abs(i%60),2,o);case _r.ShortGMT:return"GMT"+(i>=0?"+":"")+Nn(s,1,o);case _r.Long:return"GMT"+(i>=0?"+":"")+Nn(s,2,o)+":"+Nn(Math.abs(i%60),2,o);case _r.Extended:return r===0?"Z":(i>=0?"+":"")+Nn(s,2,o)+":"+Nn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var KO=0,Ad=4;function QO(n){let e=Md(n,KO,1).getDay();return Md(n,0,1+(e<=Ad?Ad:Ad+7)-e)}function qC(n){let e=n.getDay(),t=e===0?-3:Ad-e;return Md(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Im(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=qC(t),s=QO(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Nn(i,n,Nd(r,Xr.MinusSign))}}function Sd(n,e=!1){return function(t,r){let o=qC(t).getFullYear();return Nn(o,n,Nd(r,Xr.MinusSign),e)}}var Em={};function YO(n){if(Em[n])return Em[n];let e;switch(n){case"G":case"GG":case"GGG":e=ke(De.Eras,Me.Abbreviated);break;case"GGGG":e=ke(De.Eras,Me.Wide);break;case"GGGGG":e=ke(De.Eras,Me.Narrow);break;case"y":e=ot(Ce.FullYear,1,0,!1,!0);break;case"yy":e=ot(Ce.FullYear,2,0,!0,!0);break;case"yyy":e=ot(Ce.FullYear,3,0,!1,!0);break;case"yyyy":e=ot(Ce.FullYear,4,0,!1,!0);break;case"Y":e=Sd(1);break;case"YY":e=Sd(2,!0);break;case"YYY":e=Sd(3);break;case"YYYY":e=Sd(4);break;case"M":case"L":e=ot(Ce.Month,1,1);break;case"MM":case"LL":e=ot(Ce.Month,2,1);break;case"MMM":e=ke(De.Months,Me.Abbreviated);break;case"MMMM":e=ke(De.Months,Me.Wide);break;case"MMMMM":e=ke(De.Months,Me.Narrow);break;case"LLL":e=ke(De.Months,Me.Abbreviated,Vt.Standalone);break;case"LLLL":e=ke(De.Months,Me.Wide,Vt.Standalone);break;case"LLLLL":e=ke(De.Months,Me.Narrow,Vt.Standalone);break;case"w":e=Im(1);break;case"ww":e=Im(2);break;case"W":e=Im(1,!0);break;case"d":e=ot(Ce.Date,1);break;case"dd":e=ot(Ce.Date,2);break;case"c":case"cc":e=ot(Ce.Day,1);break;case"ccc":e=ke(De.Days,Me.Abbreviated,Vt.Standalone);break;case"cccc":e=ke(De.Days,Me.Wide,Vt.Standalone);break;case"ccccc":e=ke(De.Days,Me.Narrow,Vt.Standalone);break;case"cccccc":e=ke(De.Days,Me.Short,Vt.Standalone);break;case"E":case"EE":case"EEE":e=ke(De.Days,Me.Abbreviated);break;case"EEEE":e=ke(De.Days,Me.Wide);break;case"EEEEE":e=ke(De.Days,Me.Narrow);break;case"EEEEEE":e=ke(De.Days,Me.Short);break;case"a":case"aa":case"aaa":e=ke(De.DayPeriods,Me.Abbreviated);break;case"aaaa":e=ke(De.DayPeriods,Me.Wide);break;case"aaaaa":e=ke(De.DayPeriods,Me.Narrow);break;case"b":case"bb":case"bbb":e=ke(De.DayPeriods,Me.Abbreviated,Vt.Standalone,!0);break;case"bbbb":e=ke(De.DayPeriods,Me.Wide,Vt.Standalone,!0);break;case"bbbbb":e=ke(De.DayPeriods,Me.Narrow,Vt.Standalone,!0);break;case"B":case"BB":case"BBB":e=ke(De.DayPeriods,Me.Abbreviated,Vt.Format,!0);break;case"BBBB":e=ke(De.DayPeriods,Me.Wide,Vt.Format,!0);break;case"BBBBB":e=ke(De.DayPeriods,Me.Narrow,Vt.Format,!0);break;case"h":e=ot(Ce.Hours,1,-12);break;case"hh":e=ot(Ce.Hours,2,-12);break;case"H":e=ot(Ce.Hours,1);break;case"HH":e=ot(Ce.Hours,2);break;case"m":e=ot(Ce.Minutes,1);break;case"mm":e=ot(Ce.Minutes,2);break;case"s":e=ot(Ce.Seconds,1);break;case"ss":e=ot(Ce.Seconds,2);break;case"S":e=ot(Ce.FractionalSeconds,1);break;case"SS":e=ot(Ce.FractionalSeconds,2);break;case"SSS":e=ot(Ce.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=bd(_r.Short);break;case"ZZZZZ":e=bd(_r.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=bd(_r.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=bd(_r.Long);break;default:return null}return Em[n]=e,e}function zC(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function ZO(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function JO(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=zC(e,i);return ZO(n,r*(o-i))}function XO(n){if(kC(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Md(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match($O))return eF(r)}let e=new Date(n);if(!kC(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function eF(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function kC(n){return n instanceof Date&&!isNaN(n.valueOf())}function GC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Dm=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},yn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Dm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),OC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);OC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Pe(cs),Pe(hd),Pe(_m))}}static{this.\u0275dir=tc({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function OC(n,e){n.context.$implicit=e.item}var vn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Cm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){FC("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){FC("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Pe(cs),Pe(hd))}}static{this.\u0275dir=tc({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Cm=class{constructor(){this.$implicit=null,this.ngIf=null}};function FC(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${kt(e)}'.`)}function tF(n,e){return new J(2100,!1)}var nF="mediumDate",rF=new K(""),iF=new K(""),ls=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??nF,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return qO(t,s,o||this.locale,a)}catch(s){throw tF(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(Pe(wd,16),Pe(rF,24),Pe(iF,24))}}static{this.\u0275pipe=MD({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var WC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Lt({type:n})}static{this.\u0275inj=Ft({})}}return n})(),Mm="browser",oF="server";function sF(n){return n===Mm}function Gi(n){return n===oF}var KC=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>sF(j(qt))?new Tm(j(Wt),window):new bm})}}return n})(),Tm=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=aF(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function aF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var bm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Rd=class{};var Pm=class extends xd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},km=class n extends Pm{static makeCurrent(){jC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=uF();return t==null?null:lF(t)}resetBaseElement(){uc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return GC(document.cookie,e)}},uc=null;function uF(){return uc=uc||document.querySelector("base"),uc?uc.getAttribute("href"):null}function lF(n){return new URL(n,document.baseURI).pathname}var Om=class{addToWindow(e){Xt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new J(5103,!1);return o},Xt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Xt.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Xt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Xt.frameworkStabilizers||(Xt.frameworkStabilizers=[]),Xt.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?qi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},dF=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Fm=new K(""),JC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(Fm),O(ye))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Pd=class{constructor(e){this._doc=e}},Rm="ng-app-id",XC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Gi(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Rm}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Rm),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Rm,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(Wt),O(sd),O(Zg,8),O(qt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Nm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Vm=/%COMP%/g,eT="%COMP%",hF=`_nghost-${eT}`,fF=`_ngcontent-${eT}`,pF=!0,gF=new K("",{providedIn:"root",factory:()=>pF});function mF(n){return fF.replace(Vm,n)}function yF(n){return hF.replace(Vm,n)}function tT(n,e){return e.map(t=>t.replace(Vm,n))}var QC=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Gi(a),this.defaultRenderer=new lc(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Hn.ShadowDom&&(r=Ne(V({},r),{encapsulation:Hn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof kd?i.applyToHost(t):i instanceof dc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Hn.Emulated:o=new kd(c,l,r,this.appId,h,s,a,p);break;case Hn.ShadowDom:return new Lm(c,l,t,r,s,a,this.nonce,p);default:o=new dc(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(JC),O(XC),O(sd),O(gF),O(Wt),O(qt),O(ye),O(Zg))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),lc=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Nm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(YC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(YC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Nm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Nm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(pr.DashCase|pr.Important)?e.style.setProperty(t,r,i&pr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&pr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=qi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function YC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Lm=class extends lc{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=tT(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},dc=class extends lc{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?tT(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},kd=class extends dc{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=mF(l),this.hostAttr=yF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},vF=(()=>{class n extends Pd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(Wt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),ZC=["alt","control","meta","shift"],_F={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},IF=(()=>{class n extends Pd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),ZC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=_F[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ZC.forEach(s=>{if(s!==i){let a=wF[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(Wt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function EF(){km.makeCurrent()}function DF(){return new fr}function CF(){return P0(document),document}var TF=[{provide:qt,useValue:Mm},{provide:Yg,useValue:EF,multi:!0},{provide:Wt,useFactory:CF,deps:[]}],nT=ym(xC,"browser",TF),bF=new K(""),SF=[{provide:sc,useClass:Om,deps:[]},{provide:pm,useClass:md,deps:[ye,yd,sc]},{provide:md,useClass:md,deps:[ye,yd,sc]}],AF=[{provide:Ql,useValue:"root"},{provide:fr,useFactory:DF,deps:[]},{provide:Fm,useClass:vF,multi:!0,deps:[Wt,ye,qt]},{provide:Fm,useClass:IF,multi:!0,deps:[Wt]},QC,XC,JC,{provide:es,useExisting:QC},{provide:Rd,useClass:dF,deps:[]},[]],rT=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:sd,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(bF,12))}}static{this.\u0275mod=Lt({type:n})}static{this.\u0275inj=Ft({providers:[...AF,...SF],imports:[WC,MC]})}}return n})();var iT=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(Wt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ue="primary",bc=Symbol("RouteTitle"),Hm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ys(n){return new Hm(n)}function xF(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function MF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Kn(n[t],e[t]))return!1;return!0}function Kn(n,e){let t=n?qm(n):void 0,r=e?qm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!mT(n[i],e[i]))return!1;return!0}function qm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function mT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function yT(n){return n.length>0?n[n.length-1]:null}function ti(n){return Sp(n)?n:ac(n)?Ee(Promise.resolve(n)):te(n)}var RF={exact:_T,subset:wT},vT={exact:NF,subset:PF,ignored:()=>!0};function sT(n,e,t){return RF[t.paths](n.root,e.root,t.matrixParams)&&vT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function NF(n,e){return Kn(n,e)}function _T(n,e,t){if(!Ki(n.segments,e.segments)||!Ld(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!_T(n.children[r],e.children[r],t))return!1;return!0}function PF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>mT(n[t],e[t]))}function wT(n,e,t){return IT(n,e,e.segments,t)}function IT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ki(i,t)||e.hasChildren()||!Ld(i,t,r))}else if(n.segments.length===t.length){if(!Ki(n.segments,t)||!Ld(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!wT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ki(n.segments,i)||!Ld(n.segments,i,r)||!n.children[ue]?!1:IT(n.children[ue],e,o,r)}}function Ld(n,e,t){return e.every((r,i)=>vT[t](n[i].parameters,r.parameters))}var Ir=class{constructor(e=new Te([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ys(this.queryParams),this._queryParamMap}toString(){return FF.serialize(this)}},Te=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vd(this)}},Wi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ys(this.parameters),this._parameterMap}toString(){return DT(this)}};function kF(n,e){return Ki(n,e)&&n.every((t,r)=>Kn(t.parameters,e[r].parameters))}function Ki(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function OF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ue&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ue&&(t=t.concat(e(i,r)))}),t}var Sc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new vs,providedIn:"root"})}}return n})(),vs=class{parse(e){let t=new Gm(e);return new Ir(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${hc(e.root,!0)}`,r=jF(e.queryParams),i=typeof e.fragment=="string"?`#${LF(e.fragment)}`:"";return`${t}${r}${i}`}},FF=new vs;function Vd(n){return n.segments.map(e=>DT(e)).join("/")}function hc(n,e){if(!n.hasChildren())return Vd(n);if(e){let t=n.children[ue]?hc(n.children[ue],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ue&&r.push(`${i}:${hc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=OF(n,(r,i)=>i===ue?[hc(n.children[ue],!1)]:[`${i}:${hc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ue]!=null?`${Vd(n)}/${t[0]}`:`${Vd(n)}/(${t.join("//")})`}}function ET(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Od(n){return ET(n).replace(/%3B/gi,";")}function LF(n){return encodeURI(n)}function zm(n){return ET(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jd(n){return decodeURIComponent(n)}function aT(n){return jd(n.replace(/\+/g,"%20"))}function DT(n){return`${zm(n.path)}${VF(n.parameters)}`}function VF(n){return Object.entries(n).map(([e,t])=>`;${zm(e)}=${zm(t)}`).join("")}function jF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Od(t)}=${Od(i)}`).join("&"):`${Od(t)}=${Od(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var BF=/^[^\/()?;#]+/;function jm(n){let e=n.match(BF);return e?e[0]:""}var UF=/^[^\/()?;=#]+/;function $F(n){let e=n.match(UF);return e?e[0]:""}var HF=/^[^=?&#]+/;function qF(n){let e=n.match(HF);return e?e[0]:""}var zF=/^[^&#]+/;function GF(n){let e=n.match(zF);return e?e[0]:""}var Gm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ue]=new Te(e,t)),r}parseSegment(){let e=jm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new Wi(jd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=$F(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=jm(this.remaining);i&&(r=i,this.capture(r))}e[jd(t)]=jd(r)}parseQueryParam(e){let t=qF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=GF(this.remaining);s&&(r=s,this.capture(r))}let i=aT(t),o=aT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=jm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ue);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ue]:new Te([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function CT(n){return n.segments.length>0?new Te([],{[ue]:n}):n}function TT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=TT(i);if(r===ue&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Te(n.segments,e);return WF(t)}function WF(n){if(n.numberOfChildren===1&&n.children[ue]){let e=n.children[ue];return new Te(n.segments.concat(e.segments),e.children)}return n}function vc(n){return n instanceof Ir}function KF(n,e,t=null,r=null){let i=bT(n);return ST(i,e,t,r)}function bT(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Te(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=CT(r);return e??i}function ST(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Bm(i,i,i,t,r);let o=QF(e);if(o.toRoot())return Bm(i,i,new Te([],{}),t,r);let s=YF(o,i,n),a=s.processChildren?gc(s.segmentGroup,s.index,o.commands):xT(s.segmentGroup,s.index,o.commands);return Bm(i,s.segmentGroup,a,t,r)}function Bd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function _c(n){return typeof n=="object"&&n!=null&&n.outlets}function Bm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=AT(n,e,t);let a=CT(TT(s));return new Ir(a,o,i)}function AT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=AT(o,e,t)}),new Te(n.segments,r)}var Ud=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bd(r[0]))throw new J(4003,!1);let i=r.find(_c);if(i&&i!==yT(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function QF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ud(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ud(t,e,r)}var ps=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function YF(n,e,t){if(n.isAbsolute)return new ps(e,!0,0);if(!t)return new ps(e,!1,NaN);if(t.parent===null)return new ps(t,!0,0);let r=Bd(n.commands[0])?0:1,i=t.segments.length-1+r;return ZF(t,i,n.numberOfDoubleDots)}function ZF(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new ps(r,!1,i-o)}function JF(n){return _c(n[0])?n[0].outlets:{[ue]:n}}function xT(n,e,t){if(n??=new Te([],{}),n.segments.length===0&&n.hasChildren())return gc(n,e,t);let r=XF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Te(n.segments.slice(0,r.pathIndex),{});return o.children[ue]=new Te(n.segments.slice(r.pathIndex),n.children),gc(o,0,i)}else return r.match&&i.length===0?new Te(n.segments,{}):r.match&&!n.hasChildren()?Wm(n,e,t):r.match?gc(n,0,i):Wm(n,e,t)}function gc(n,e,t){if(t.length===0)return new Te(n.segments,{});{let r=JF(t),i={};if(Object.keys(r).some(o=>o!==ue)&&n.children[ue]&&n.numberOfChildren===1&&n.children[ue].segments.length===0){let o=gc(n.children[ue],e,t);return new Te(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=xT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Te(n.segments,i)}}function XF(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(_c(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!uT(c,l,s))return o;r+=2}else{if(!uT(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Wm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(_c(o)){let c=eL(o.outlets);return new Te(r,c)}if(i===0&&Bd(t[0])){let c=n.segments[e];r.push(new Wi(c.path,cT(t[0]))),i++;continue}let s=_c(o)?o.outlets[ue]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Bd(a)?(r.push(new Wi(s,cT(a))),i+=2):(r.push(new Wi(s,{})),i++)}return new Te(r,{})}function eL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Wm(new Te([],{}),0,r))}),e}function cT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function uT(n,e,t){return n==t.path&&Kn(e,t.parameters)}var mc="imperative",pt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(pt||{}),_n=class{constructor(e,t){this.id=e,this.url=t}},_s=class extends _n{constructor(e,t,r="imperative",i=null){super(e,t),this.type=pt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Er=class extends _n{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=pt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},on=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(on||{}),$d=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}($d||{}),wr=class extends _n{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=pt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ei=class extends _n{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=pt.NavigationSkipped}},wc=class extends _n{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=pt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Hd=class extends _n{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=pt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Km=class extends _n{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=pt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qm=class extends _n{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=pt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ym=class extends _n{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=pt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zm=class extends _n{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=pt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jm=class{constructor(e){this.route=e,this.type=pt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xm=class{constructor(e){this.route=e,this.type=pt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ey=class{constructor(e){this.snapshot=e,this.type=pt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ty=class{constructor(e){this.snapshot=e,this.type=pt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ny=class{constructor(e){this.snapshot=e,this.type=pt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ry=class{constructor(e){this.snapshot=e,this.type=pt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=pt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ic=class{},ws=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function tL(n,e){return n.providers&&!n._injector&&(n._injector=fd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Pn(n){return n.outlet||ue}function nL(n,e){let t=n.filter(r=>Pn(r)===e);return t.push(...n.filter(r=>Pn(r)!==e)),t}function Ac(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var iy=class{get injector(){return Ac(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new xc(this.rootInjector),this.attachRef=null}},xc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new iy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(en))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=oy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=oy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=sy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return sy(e,this._root).map(t=>t.value)}};function oy(n,e){if(n===e.value)return e;for(let t of e.children){let r=oy(n,t);if(r)return r}return null}function sy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=sy(n,t);if(r.length)return r.unshift(e),r}return[]}var rn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function fs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Gd=class extends zd{constructor(e,t){super(e),this.snapshot=t,gy(this,e)}toString(){return this.snapshot.toString()}};function MT(n){let e=rL(n),t=new mt([new Wi("",{})]),r=new mt({}),i=new mt({}),o=new mt({}),s=new mt(""),a=new Is(t,r,o,s,i,ue,n,e.root);return a.snapshot=e.root,new Gd(new rn(a,[]),e)}function rL(n){let e={},t={},r={},i="",o=new gs([],e,r,i,t,ue,n,null,{});return new Kd("",new rn(o,[]))}var Is=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(W(l=>l[bc]))??te(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(W(e=>ys(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(W(e=>ys(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Wd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&NT(i)&&(r.resolve[bc]=i.title),r}var gs=class{get title(){return this.data?.[bc]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ys(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ys(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Kd=class extends zd{constructor(e,t){super(t),this.url=e,gy(this,t)}toString(){return RT(this._root)}};function gy(n,e){e.value._routerState=n,e.children.forEach(t=>gy(n,t))}function RT(n){let e=n.children.length>0?` { ${n.children.map(RT).join(", ")} } `:"";return`${n.value}${e}`}function Um(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Kn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Kn(e.params,t.params)||n.paramsSubject.next(t.params),MF(e.url,t.url)||n.urlSubject.next(t.url),Kn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ay(n,e){let t=Kn(n.params,e.params)&&kF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ay(n.parent,e.parent))}function NT(n){return typeof n.title=="string"||n.title===null}var my=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new Pt,this.deactivateEvents=new Pt,this.attachEvents=new Pt,this.detachEvents=new Pt,this.parentContexts=j(xc),this.location=j(cs),this.changeDetector=j(cc),this.inputBinder=j(Xd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new cy(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=tc({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Jl]})}}return n})(),cy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Is?this.route:e===xc?this.childContexts:this.parent.get(e,t)}},Xd=new K(""),lT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Va([r.queryParams,r.params,r.data]).pipe(Ke(([o,s,a],c)=>(a=V(V(V({},o),s),a),c===0?te(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=RC(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function iL(n,e,t){let r=Ec(n,e._root,t?t._root:void 0);return new Gd(r,e)}function Ec(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=oL(n,e,t);return new rn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ec(n,a)),s}}let r=sL(e.value),i=e.children.map(o=>Ec(n,o));return new rn(r,i)}}function oL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ec(n,r,i);return Ec(n,r)})}function sL(n){return new Is(new mt(n.url),new mt(n.params),new mt(n.queryParams),new mt(n.fragment),new mt(n.data),n.outlet,n.component,n)}var Dc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},PT="ngNavigationCancelingError";function Qd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=vc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kT(!1,on.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function kT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[PT]=!0,t.cancellationCode=e,t}function aL(n){return OT(n)&&vc(n.url)}function OT(n){return!!n&&n[PT]}var cL=(n,e,t,r)=>W(i=>(new uy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),uy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Um(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=fs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=fs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=fs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=fs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ry(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ty(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Um(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Um(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Yd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ms=class{constructor(e,t){this.component=e,this.route=t}};function uL(n,e,t){let r=n._root,i=e?e._root:null;return fc(r,i,t,[r.value])}function lL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ds(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!vD(n)?n:e.get(n):r}function fc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=fs(e);return n.children.forEach(s=>{dL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>yc(a,t.getContext(s),i)),i}function dL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=hL(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Yd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?fc(n,e,a?a.children:null,r,i):fc(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ms(a.outlet.component,s))}else s&&yc(e,a,i),i.canActivateChecks.push(new Yd(r)),o.component?fc(n,null,a?a.children:null,r,i):fc(n,null,t,r,i);return i}function hL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ki(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ki(n.url,e.url)||!Kn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ay(n,e)||!Kn(n.queryParams,e.queryParams);case"paramsChange":default:return!ay(n,e)}}function yc(n,e,t){let r=fs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?yc(s,e.children.getContext(o),t):yc(s,null,t):yc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ms(e.outlet.component,i)):t.canDeactivateChecks.push(new ms(null,i)):t.canDeactivateChecks.push(new ms(null,i))}function Mc(n){return typeof n=="function"}function fL(n){return typeof n=="boolean"}function pL(n){return n&&Mc(n.canLoad)}function gL(n){return n&&Mc(n.canActivate)}function mL(n){return n&&Mc(n.canActivateChild)}function yL(n){return n&&Mc(n.canDeactivate)}function vL(n){return n&&Mc(n.canMatch)}function FT(n){return n instanceof ur||n?.name==="EmptyError"}var Fd=Symbol("INITIAL_VALUE");function Es(){return Ke(n=>Va(n.map(e=>e.pipe(lr(1),Pi(Fd)))).pipe(W(e=>{for(let t of e)if(t!==!0){if(t===Fd)return Fd;if(t===!1||_L(t))return t}return!0}),yt(e=>e!==Fd),lr(1)))}function _L(n){return vc(n)||n instanceof Dc}function wL(n,e){return it(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?te(Ne(V({},t),{guardsResult:!0})):IL(s,r,i,n).pipe(it(a=>a&&fL(a)?EL(r,o,n,e):te(a)),W(a=>Ne(V({},t),{guardsResult:a})))})}function IL(n,e,t,r){return Ee(n).pipe(it(i=>SL(i.component,i.route,t,e,r)),un(i=>i!==!0,!0))}function EL(n,e,t,r){return Ee(e).pipe(Ri(i=>jo(CL(i.route.parent,r),DL(i.route,r),bL(n,i.path,t),TL(n,i.route,t))),un(i=>i!==!0,!0))}function DL(n,e){return n!==null&&e&&e(new ny(n)),te(!0)}function CL(n,e){return n!==null&&e&&e(new ey(n)),te(!0)}function TL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return te(!0);let i=r.map(o=>cl(()=>{let s=Ac(e)??t,a=Ds(o,s),c=gL(a)?a.canActivate(e,n):Gn(s,()=>a(e,n));return ti(c).pipe(un())}));return te(i).pipe(Es())}function bL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>lL(s)).filter(s=>s!==null).map(s=>cl(()=>{let a=s.guards.map(c=>{let l=Ac(s.node)??t,h=Ds(c,l),p=mL(h)?h.canActivateChild(r,n):Gn(l,()=>h(r,n));return ti(p).pipe(un())});return te(a).pipe(Es())}));return te(o).pipe(Es())}function SL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return te(!0);let s=o.map(a=>{let c=Ac(e)??i,l=Ds(a,c),h=yL(l)?l.canDeactivate(n,e,t,r):Gn(c,()=>l(n,e,t,r));return ti(h).pipe(un())});return te(s).pipe(Es())}function AL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return te(!0);let o=i.map(s=>{let a=Ds(s,n),c=pL(a)?a.canLoad(e,t):Gn(n,()=>a(e,t));return ti(c)});return te(o).pipe(Es(),LT(r))}function LT(n){return Ip(lt(e=>{if(typeof e!="boolean")throw Qd(n,e)}),W(e=>e===!0))}function xL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return te(!0);let o=i.map(s=>{let a=Ds(s,n),c=vL(a)?a.canMatch(e,t):Gn(n,()=>a(e,t));return ti(c)});return te(o).pipe(Es(),LT(r))}var Cc=class{constructor(e){this.segmentGroup=e||null}},Tc=class extends Error{constructor(e){super(),this.urlTree=e}};function hs(n){return Vo(new Cc(n))}function ML(n){return Vo(new J(4e3,!1))}function RL(n){return Vo(kT(!1,on.GuardRejected))}var ly=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return te(r);if(i.numberOfChildren>1||!i.children[ue])return ML(`${e.redirectTo}`);i=i.children[ue]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:T,title:M}=i,N=Gn(o,()=>a({params:y,data:T,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(N instanceof Ir)throw new Tc(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Tc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ir(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Te(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},dy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NL(n,e,t,r,i){let o=VT(n,e,t);return o.matched?(r=tL(e,r),xL(r,e,t,i).pipe(W(s=>s===!0?o:V({},dy)))):te(o)}function VT(n,e,t){if(e.path==="**")return PL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},dy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||xF)(t,n,e);if(!i)return V({},dy);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function PL(n){return{matched:!0,parameters:n.length>0?yT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function dT(n,e,t,r){return t.length>0&&FL(n,t,r)?{segmentGroup:new Te(e,OL(r,new Te(t,n.children))),slicedSegments:[]}:t.length===0&&LL(n,t,r)?{segmentGroup:new Te(n.segments,kL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Te(n.segments,n.children),slicedSegments:t}}function kL(n,e,t,r){let i={};for(let o of t)if(eh(n,e,o)&&!r[Pn(o)]){let s=new Te([],{});i[Pn(o)]=s}return V(V({},r),i)}function OL(n,e){let t={};t[ue]=e;for(let r of n)if(r.path===""&&Pn(r)!==ue){let i=new Te([],{});t[Pn(r)]=i}return t}function FL(n,e,t){return t.some(r=>eh(n,e,r)&&Pn(r)!==ue)}function LL(n,e,t){return t.some(r=>eh(n,e,r))}function eh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function VL(n,e,t){return e.length===0&&!n.children[t]}var hy=class{};function jL(n,e,t,r,i,o,s="emptyOnly"){return new fy(n,e,t,r,i,s,o).recognize()}var BL=31,fy=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ly(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=dT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(W(({children:t,rootSnapshot:r})=>{let i=new rn(r,t),o=new Kd("",i),s=KF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new gs([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ue,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ue,t).pipe(W(r=>({children:r,rootSnapshot:t})),jr(r=>{if(r instanceof Tc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Cc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(W(s=>s instanceof rn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ee(o).pipe(Ri(s=>{let a=r.children[s],c=nL(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Ni((s,a)=>(s.push(...a),s)),Br(null),Rp(),it(s=>{if(s===null)return hs(r);let a=jT(s);return UL(a),te(a)}))}processSegment(e,t,r,i,o,s,a){return Ee(t).pipe(Ri(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(jr(l=>{if(l instanceof Cc)return te(null);throw l}))),un(c=>!!c),jr(c=>{if(FT(c))return VL(r,i,o)?te(new hy):hs(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Pn(r)!==s&&(s===ue||!eh(i,o,r))?hs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):hs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=VT(t,i,o);if(!c)return hs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>BL&&(this.allowRedirects=!1));let y=new gs(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,hT(i),Pn(i),i.component??i._loadedComponent??null,i,fT(i)),T=Wd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(T.params),y.data=Object.freeze(T.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(it(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=NL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ke(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ke(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=c,T=new gs(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,hT(r),Pn(r),r.component??r._loadedComponent??null,r,fT(r)),M=Wd(T,s,this.paramsInheritanceStrategy);T.params=Object.freeze(M.params),T.data=Object.freeze(M.data);let{segmentGroup:N,slicedSegments:B}=dT(t,m,y,l);if(B.length===0&&N.hasChildren())return this.processChildren(h,l,N,T).pipe(W(F=>new rn(T,F)));if(l.length===0&&B.length===0)return te(new rn(T,[]));let z=Pn(r)===o;return this.processSegment(h,l,N,B,z?ue:o,!0,T).pipe(W(F=>new rn(T,F instanceof rn?[F]:[])))}))):hs(t)))}getChildConfig(e,t,r){return t.children?te({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?te({routes:t._loadedRoutes,injector:t._loadedInjector}):AL(e,t,r,this.urlSerializer).pipe(it(i=>i?this.configLoader.loadChildren(e,t).pipe(lt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):RL(t))):te({routes:[],injector:e})}};function UL(n){n.sort((e,t)=>e.value.outlet===ue?-1:t.value.outlet===ue?1:e.value.outlet.localeCompare(t.value.outlet))}function $L(n){let e=n.value.routeConfig;return e&&e.path===""}function jT(n){let e=[],t=new Set;for(let r of n){if(!$L(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=jT(r.children);e.push(new rn(r.value,i))}return e.filter(r=>!t.has(r))}function hT(n){return n.data||{}}function fT(n){return n.resolve||{}}function HL(n,e,t,r,i,o){return it(s=>jL(n,e,t,r,s.extractedUrl,i,o).pipe(W(({state:a,tree:c})=>Ne(V({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function qL(n,e){return it(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return te(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of BT(c))s.add(l);let a=0;return Ee(s).pipe(Ri(c=>o.has(c)?zL(c,r,n,e):(c.data=Wd(c,c.parent,n).resolve,te(void 0))),lt(()=>a++),Bo(1),it(c=>a===s.size?te(t):Nt))})}function BT(n){let e=n.children.map(t=>BT(t)).flat();return[n,...e]}function zL(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!NT(i)&&(o[bc]=i.title),GL(o,n,e,r).pipe(W(s=>(n._resolvedData=s,n.data=Wd(n,n.parent,t).resolve,null)))}function GL(n,e,t,r){let i=qm(n);if(i.length===0)return te({});let o={};return Ee(i).pipe(it(s=>WL(n[s],e,t,r).pipe(un(),lt(a=>{if(a instanceof Dc)throw Qd(new vs,a);o[s]=a}))),Bo(1),xp(o),jr(s=>FT(s)?Nt:Vo(s)))}function WL(n,e,t,r){let i=Ac(e)??r,o=Ds(n,i),s=o.resolve?o.resolve(e,t):Gn(i,()=>o(e,t));return ti(s)}function $m(n){return Ke(e=>{let t=n(e);return t?Ee(t).pipe(W(()=>e)):te(e)})}var UT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ue);return r}getResolvedTitleForRoute(t){return t.data[bc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(KL),providedIn:"root"})}}return n})(),KL=(()=>{class n extends UT{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(iT))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Rc=new K("",{providedIn:"root",factory:()=>({})}),QL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ft({type:n,selectors:[["ng-component"]],standalone:!0,features:[wC],decls:1,vars:0,template:function(r,i){r&1&&Tt(0,"router-outlet")},dependencies:[my],encapsulation:2})}}return n})();function yy(n){let e=n.children&&n.children.map(yy),t=e?Ne(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ue&&(t.component=QL),t}var Zd=new K(""),vy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(_d)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return te(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ti(t.loadComponent()).pipe(W($T),lt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ja(()=>{this.componentLoaders.delete(t)})),i=new ko(r,()=>new Je).pipe(Po());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=YL(r,this.compiler,t,this.onLoadEndListener).pipe(ja(()=>{this.childrenLoaders.delete(r)})),s=new ko(o,()=>new Je).pipe(Po());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YL(n,e,t,r){return ti(n.loadChildren()).pipe(W($T),it(i=>i instanceof Ya||Array.isArray(i)?te(i):Ee(e.compileModuleAsync(i))),W(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Zd,[],{optional:!0,self:!0}).flat()),{routes:s.map(yy),injector:o}}))}function ZL(n){return n&&typeof n=="object"&&"default"in n}function $T(n){return ZL(n)?n.default:n}var _y=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(JL),providedIn:"root"})}}return n})(),JL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),HT=new K(""),qT=new K("");function XL(n,e,t){let r=n.get(qT),i=n.get(Wt);return n.get(ye).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),eV(n))),{onViewTransitionCreated:c}=r;return c&&Gn(n,()=>c({transition:a,from:e,to:t})),s})}function eV(n){return new Promise(e=>{hm({read:()=>setTimeout(e)},{injector:n})})}var tV=new K(""),wy=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Je,this.transitionAbortSubject=new Je,this.configLoader=j(vy),this.environmentInjector=j(en),this.urlSerializer=j(Sc),this.rootContexts=j(xc),this.location=j(us),this.inputBindingEnabled=j(Xd,{optional:!0})!==null,this.titleStrategy=j(UT),this.options=j(Rc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(_y),this.createViewTransition=j(HT,{optional:!0}),this.navigationErrorHandler=j(tV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>te(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Jm(i)),r=i=>this.events.next(new Xm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ne(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new mt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:mc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(yt(o=>o.id!==0),W(o=>Ne(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ke(o=>{let s=!1,a=!1;return te(o).pipe(Ke(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",on.SupersededByNewNavigation),Nt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ne(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ei(c.id,this.urlSerializer.serialize(c.rawUrl),p,$d.IgnoredSameUrlNavigation)),c.resolve(!1),Nt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return te(c).pipe(Ke(p=>{let m=this.transitions?.getValue();return this.events.next(new _s(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Nt:Promise.resolve(p)}),HL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),lt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Ne(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Hd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:T,extras:M}=c,N=new _s(p,this.urlSerializer.serialize(m),y,T);this.events.next(N);let B=MT(this.rootComponentType).snapshot;return this.currentTransition=o=Ne(V({},c),{targetSnapshot:B,urlAfterRedirects:m,extras:Ne(V({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,te(o)}else{let p="";return this.events.next(new ei(c.id,this.urlSerializer.serialize(c.extractedUrl),p,$d.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Nt}}),lt(c=>{let l=new Km(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),W(c=>(this.currentTransition=o=Ne(V({},c),{guards:uL(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),wL(this.environmentInjector,c=>this.events.next(c)),lt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Qd(this.urlSerializer,c.guardsResult);let l=new Qm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),yt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",on.GuardRejected),!1)),$m(c=>{if(c.guards.canActivateChecks.length)return te(c).pipe(lt(l=>{let h=new Ym(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ke(l=>{let h=!1;return te(l).pipe(qL(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",on.NoDataFromResolver)}}))}),lt(l=>{let h=new Zm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),$m(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(lt(m=>{h.component=m}),W(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Va(l(c.targetSnapshot.root)).pipe(Br(null),lr(1))}),$m(()=>this.afterPreactivation()),Ke(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Ee(h).pipe(W(()=>o)):te(o)}),W(c=>{let l=iL(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Ne(V({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),lt(()=>{this.events.next(new Ic)}),cL(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),lr(1),lt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Er(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Pp(this.transitionAbortSubject.pipe(lt(c=>{throw c}))),ja(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",on.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),jr(c=>{if(a=!0,OT(c))this.events.next(new wr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),aL(c)?this.events.next(new ws(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new wc(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=Gn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Dc){let{message:p,cancellationCode:m}=Qd(this.urlSerializer,h);this.events.next(new wr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new ws(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Nt}))}))}cancelNavigationTransition(t,r,i){let o=new wr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nV(n){return n!==mc}var rV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(iV),providedIn:"root"})}}return n})(),py=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},iV=(()=>{class n extends py{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Gg(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(oV),providedIn:"root"})}}return n})(),oV=(()=>{class n extends zT{constructor(){super(...arguments),this.location=j(us),this.urlSerializer=j(Sc),this.options=j(Rc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(_y),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ir,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=MT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof _s)this.stateMemento=this.createStateMemento();else if(t instanceof ei)this.rawUrlTree=r.initialUrl;else if(t instanceof Hd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ic?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof wr&&(t.code===on.GuardRejected||t.code===on.NoDataFromResolver)?this.restoreHistory(r):t instanceof wc?this.restoreHistory(r,!0):t instanceof Er&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Ir?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Gg(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(pc||{});function GT(n,e){n.events.pipe(yt(t=>t instanceof Er||t instanceof wr||t instanceof wc||t instanceof ei),W(t=>t instanceof Er||t instanceof ei?pc.COMPLETE:(t instanceof wr?t.code===on.Redirect||t.code===on.SupersededByNewNavigation:!1)?pc.REDIRECTING:pc.FAILED),yt(t=>t!==pc.REDIRECTING),lr(1)).subscribe(()=>{e()})}function sV(n){throw n}var aV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(gd),this.stateManager=j(zT),this.options=j(Rc,{optional:!0})||{},this.pendingTasks=j(as),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(wy),this.urlSerializer=j(Sc),this.location=j(us),this.urlHandlingStrategy=j(_y),this._events=new Je,this.errorHandler=this.options.errorHandler||sV,this.navigated=!1,this.routeReuseStrategy=j(rV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(Zd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(Xd,{optional:!0}),this.eventsSubscription=new We,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof wr&&r.code!==on.Redirect&&r.code!==on.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Er)this.navigated=!0;else if(r instanceof ws){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||nV(i.source)},s);this.scheduleNavigation(a,mc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}lV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),mc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(yy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=bT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return ST(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=vc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,mc,null,r)}navigate(t,r={skipLocationChange:!1}){return uV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},aV):r===!1?i=V({},cV):i=r,vc(t))return sT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return sT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return GT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function uV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new J(4008,!1)}function lV(n){return!(n instanceof Ic)&&!(n instanceof ws)}var Jd=class{};var dV=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(yt(t=>t instanceof Er),Ri(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=fd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ee(i).pipe(Vr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=te(null);let o=i.pipe(it(s=>s===null?te(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ee([o,s]).pipe(Vr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(Qi),O(_d),O(en),O(Jd),O(vy))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),WT=new K(""),hV=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _s?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Er?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ei&&t.code===$d.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof qd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new qd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){Q0()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function fV(n){return n.routerState.root}function Nc(n,e){return{\u0275kind:n,\u0275providers:e}}function pV(){let n=j(pn);return e=>{let t=n.get(Jr);if(e!==t.components[0])return;let r=n.get(Qi),i=n.get(KT);n.get(Iy)===1&&r.initialNavigation(),n.get(QT,null,de.Optional)?.setUpPreloading(),n.get(WT,null,de.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var KT=new K("",{factory:()=>new Je}),Iy=new K("",{providedIn:"root",factory:()=>1});function gV(){return Nc(2,[{provide:Iy,useValue:0},{provide:vd,multi:!0,deps:[pn],useFactory:e=>{let t=e.get(BC,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Qi),o=e.get(KT);GT(i,()=>{r(!0)}),e.get(wy).afterPreactivation=()=>(r(!0),o.closed?te(void 0):o),i.initialNavigation()}))}}])}function mV(){return Nc(3,[{provide:vd,multi:!0,useFactory:()=>{let e=j(Qi);return()=>{e.setUpLocationChangeListener()}}},{provide:Iy,useValue:2}])}var QT=new K("");function yV(n){return Nc(0,[{provide:QT,useExisting:dV},{provide:Jd,useExisting:n}])}function vV(){return Nc(8,[lT,{provide:Xd,useExisting:lT}])}function _V(n){let e=[{provide:HT,useValue:XL},{provide:qT,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return Nc(9,e)}var pT=new K("ROUTER_FORROOT_GUARD"),wV=[us,{provide:Sc,useClass:vs},Qi,xc,{provide:Is,useFactory:fV,deps:[Qi]},vy,[]],Ey=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[wV,[],{provide:Zd,multi:!0,useValue:t},{provide:pT,useFactory:CV,deps:[[Qi,new rs,new Pg]]},{provide:Rc,useValue:r||{}},r?.useHash?EV():DV(),IV(),r?.preloadingStrategy?yV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?TV(r):[],r?.bindToComponentInputs?vV().\u0275providers:[],r?.enableViewTransitions?_V().\u0275providers:[],bV()]}}static forChild(t){return{ngModule:n,providers:[{provide:Zd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(pT,8))}}static{this.\u0275mod=Lt({type:n})}static{this.\u0275inj=Ft({})}}return n})();function IV(){return{provide:WT,useFactory:()=>{let n=j(KC),e=j(ye),t=j(Rc),r=j(wy),i=j(Sc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new hV(i,r,n,e,t)}}}function EV(){return{provide:zi,useClass:$C}}function DV(){return{provide:zi,useClass:xm}}function CV(n){return"guarded"}function TV(n){return[n.initialNavigation==="disabled"?mV().\u0275providers:[],n.initialNavigation==="enabledBlocking"?gV().\u0275providers:[]]}var gT=new K("");function bV(){return[{provide:gT,useFactory:pV},{provide:mm,multi:!0,useExisting:gT}]}var AV=[],YT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Lt({type:n})}static{this.\u0275inj=Ft({imports:[Ey.forRoot(AV),Ey]})}}return n})();var th=class{constructor(){this.name="name",this.goallife="goal",this.photoUrl="photo",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var xV="firebase",MV="10.14.1";Lr(xV,MV,"app");var Pc=new Kr("ANGULARFIRE2_VERSION");var RV=(n,e)=>{let t=e?[e]:eE(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Yi=class{constructor(){return RV(NV)}},NV="app-check";function Dy(){}var nh=class{zone;delegate;constructor(e,t=Tp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Cy=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dy,{},Dy,Dy)),t.pipe(lt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},rh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new nh(Zone.current)),this.insideAngular=t.run(()=>new nh(Zone.current,La)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(ye))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PV(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Kt(n){return kV(PV())(n)}function kV(n){return function(t){return t=t.lift(new Cy(n.ngZone)),t.pipe(Tn(n.outsideAngular),cn(n.insideAngular))}}var LV=new Map,VV={activated:!1,tokenObservers:[]},jV={initialized:!1,enabled:!1};function kn(n){return LV.get(n)||Object.assign({},VV)}function nb(){return jV}var BV="https://content-firebaseappcheck.googleapis.com/v1";var UV="exchangeDebugToken",JT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},V5=24*60*60*1e3;var by=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return R(this,null,function*(){this.stop();try{this.pending=new ip,this.pending.promise.catch(t=>{}),yield $V(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ip,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function $V(n){return new Promise(e=>{setTimeout(e,n)})}var HV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ni=new JI("appCheck","AppCheck",HV);function rb(n){if(!kn(n).activated)throw ni.create("use-before-activation",{appName:n.name})}function ib(r,i){return R(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(y){throw ni.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw ni.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw ni.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw ni.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function ob(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${BV}/projects/${t}/apps/${r}:${UV}?key=${i}`,body:{debug_token:e}}}var qV="firebase-app-check-database",zV=1,Sy="firebase-app-check-store";var ih=null;function GV(){return ih||(ih=new Promise((n,e)=>{try{let t=indexedDB.open(qV,zV);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ni.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Sy,{keyPath:"compositeKey"})}}}catch(t){e(ni.create("storage-open",{originalErrorMessage:t?.message}))}}),ih)}function WV(n,e){return KV(QV(n),e)}function KV(n,e){return R(this,null,function*(){let r=(yield GV()).transaction(Sy,"readwrite"),o=r.objectStore(Sy).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(ni.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function QV(n){return`${n.options.appId}-${n.name}`}var Ay=new $u("@firebase/app-check");function Ty(n,e){return Uu()?WV(n,e).catch(t=>{Ay.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sb(){return nb().enabled}function ab(){return R(this,null,function*(){let n=nb();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var YV={error:"UNKNOWN_ERROR"};function ZV(n){return QI.encodeString(JSON.stringify(n),!1)}function xy(n,e=!1){return R(this,null,function*(){let t=n.app;rb(t);let r=kn(t),i=r.token,o;if(i&&!kc(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(kc(c)?i=c:yield Ty(t,void 0))}if(!e&&i&&kc(i))return{token:i.token};let s=!1;if(sb()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ib(ob(t,yield ab()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Ty(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield kn(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Ay.warn(c.message):Ay.error(c),o=c}let a;return i?o?kc(i)?a={token:i.token,internalError:o}:a=eb(o):(a={token:i.token},r.token=i,yield Ty(t,i)):a=eb(o),s&&t2(t,a),a})}function JV(n){return R(this,null,function*(){let e=n.app;rb(e);let{provider:t}=kn(e);if(sb()){let r=yield ab(),{token:i}=yield ib(ob(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function XV(n,e,t,r){let{app:i}=n,o=kn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&kc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),XT(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>XT(n))}function cb(n,e){let t=kn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function XT(n){let{app:e}=n,t=kn(e),r=t.tokenRefresher;r||(r=e2(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function e2(n){let{app:e}=n;return new by(()=>R(this,null,function*(){let t=kn(e),r;if(t.token?r=yield xy(n,!0):r=yield xy(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=kn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},JT.RETRIAL_MIN_WAIT,JT.RETRIAL_MAX_WAIT)}function t2(n,e){let t=kn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function kc(n){return n.expireTimeMillis-Date.now()>0}function eb(n){return{token:ZV(YV),error:n}}var My=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=kn(this.app);for(let t of e)cb(this.app,t.next);return Promise.resolve()}};function n2(n,e){return new My(n,e)}function r2(n){return{getToken:e=>xy(n,e),getLimitedUseToken:()=>JV(n),addTokenListener:e=>XV(n,"INTERNAL",e),removeTokenListener:e=>cb(n.app,e)}}var i2="@firebase/app-check",o2="0.8.8";var s2="app-check",tb="app-check-internal";function a2(){Pa(new Si(s2,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return n2(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tb).initialize()})),Pa(new Si(tb,n=>{let e=n.getProvider("app-check").getImmediate();return r2(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Lr(i2,o2)}a2();var c2=["localhost","0.0.0.0","127.0.0.1"],Y5=typeof window<"u"&&c2.includes(window.location.hostname);var u2="firebase",l2="10.14.1";Jt.registerVersion(u2,l2,"app-compat");var d2=["ngOnDestroy"],db=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(d2.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var oh=class{constructor(e){return e}},Cs=new K("angularfire2.app.options"),Ts=new K("angularfire2.app.name");function Oc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Jt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Jt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;h2("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new oh(s)}var h2=(n,...e)=>{vm()&&typeof console<"u"&&console[n](...e)},f2={provide:oh,useFactory:Oc,deps:[Cs,ye,[new rs,Ts]]},hb=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Cs,useValue:t},{provide:Ts,useValue:r}]}}constructor(t){Jt.registerVersion("angularfire",Pc.full,"core"),Jt.registerVersion("angularfire",Pc.full,"app-compat"),Jt.registerVersion("angular",IC.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(qt))};static \u0275mod=Lt({type:n});static \u0275inj=Ft({providers:[f2]})}return n})();function sh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return p2(i,s)||(lb("error",`${e} was already initialized on the ${t} Firebase App with different settings.${g2?" You may need to reload as Firebase is not HMR aware.":""}`),lb("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function p2(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var g2=typeof module<"u"&&!!module.hot,lb=(n,...e)=>{vm()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Ry=new K("angularfire2.auth.use-emulator"),Ny=new K("angularfire2.auth.settings"),Py=new K("angularfire2.auth.tenant-id"),ky=new K("angularfire2.auth.langugage-code"),Oy=new K("angularfire2.auth.use-device-language"),Fy=new K("angularfire.auth.persistence"),Ly=(n,e,t,r,i,o,s,a)=>sh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),fb=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,y){let T=new Je,M=te(void 0).pipe(cn(s.outsideAngular),Ke(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),W(()=>Oc(t,o,r)),W(N=>Ly(N,o,a,l,h,p,c,m)),ll({bufferSize:1,refCount:!1}));if(Gi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=te(null);else{M.pipe(un()).subscribe();let N=M.pipe(Ke(F=>F.getRedirectResult().then(X=>X,()=>null)),Kt,ll({bufferSize:1,refCount:!1})),B=M.pipe(Ke(F=>new me(X=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ne=>X.next(ne),ne=>X.error(ne),()=>X.complete()))})))),z=M.pipe(Ke(F=>new me(X=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ne=>X.next(ne),ne=>X.error(ne),()=>X.complete()))}))));this.authState=N.pipe(dl(B),Tn(s.outsideAngular),cn(s.insideAngular)),this.user=N.pipe(dl(z),Tn(s.outsideAngular),cn(s.insideAngular)),this.idToken=this.user.pipe(Ke(F=>F?Ee(F.getIdToken()):te(null))),this.idTokenResult=this.user.pipe(Ke(F=>F?Ee(F.getIdTokenResult()):te(null))),this.credential=Ap(N,T,this.authState.pipe(yt(F=>!F))).pipe(W(F=>F?.user?F:null),Tn(s.outsideAngular),cn(s.insideAngular))}return db(this,M,o,{spy:{apply:(N,B,z)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&z.then(F=>T.next(F))}}})}static \u0275fac=function(r){return new(r||n)(O(Cs),O(Ts,8),O(qt),O(ye),O(rh),O(Ry,8),O(Ny,8),O(Py,8),O(ky,8),O(Oy,8),O(Fy,8),O(Yi,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var pb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gb={};var ri,Vy;(function(){var n;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,b){for(var _=Array(arguments.length-2),or=2;or<arguments.length;or++)_[or-2]=arguments[or];return v.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var E=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)E[D]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],D=I.g[2];var b=I.g[3],_=v+(b^w&(D^b))+E[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=b+(D^v&(w^D))+E[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(w^b&(v^w))+E[2]+606105819&4294967295,D=b+(_<<17&4294967295|_>>>15),_=w+(v^D&(b^v))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(b^w&(D^b))+E[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=b+(D^v&(w^D))+E[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(w^b&(v^w))+E[6]+2821735955&4294967295,D=b+(_<<17&4294967295|_>>>15),_=w+(v^D&(b^v))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(b^w&(D^b))+E[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=b+(D^v&(w^D))+E[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(w^b&(v^w))+E[10]+4294925233&4294967295,D=b+(_<<17&4294967295|_>>>15),_=w+(v^D&(b^v))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(b^w&(D^b))+E[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=b+(D^v&(w^D))+E[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(w^b&(v^w))+E[14]+2792965006&4294967295,D=b+(_<<17&4294967295|_>>>15),_=w+(v^D&(b^v))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(D^b&(w^D))+E[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=b+(w^D&(v^w))+E[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(b^v))+E[11]+643717713&4294967295,D=b+(_<<14&4294967295|_>>>18),_=w+(b^v&(D^b))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^b&(w^D))+E[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=b+(w^D&(v^w))+E[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(b^v))+E[15]+3634488961&4294967295,D=b+(_<<14&4294967295|_>>>18),_=w+(b^v&(D^b))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^b&(w^D))+E[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=b+(w^D&(v^w))+E[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(b^v))+E[3]+4107603335&4294967295,D=b+(_<<14&4294967295|_>>>18),_=w+(b^v&(D^b))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^b&(w^D))+E[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=b+(w^D&(v^w))+E[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(b^v))+E[7]+1735328473&4294967295,D=b+(_<<14&4294967295|_>>>18),_=w+(b^v&(D^b))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(w^D^b)+E[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=b+(v^w^D)+E[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^w)+E[11]+1839030562&4294967295,D=b+(_<<16&4294967295|_>>>16),_=w+(D^b^v)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^b)+E[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=b+(v^w^D)+E[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^w)+E[7]+4139469664&4294967295,D=b+(_<<16&4294967295|_>>>16),_=w+(D^b^v)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^b)+E[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=b+(v^w^D)+E[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^w)+E[3]+3572445317&4294967295,D=b+(_<<16&4294967295|_>>>16),_=w+(D^b^v)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^b)+E[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=b+(v^w^D)+E[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^w)+E[15]+530742520&4294967295,D=b+(_<<16&4294967295|_>>>16),_=w+(D^b^v)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(D^(w|~b))+E[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=b+(w^(v|~D))+E[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~w))+E[14]+2878612391&4294967295,D=b+(_<<15&4294967295|_>>>17),_=w+(b^(D|~v))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~b))+E[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=b+(w^(v|~D))+E[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~w))+E[10]+4293915773&4294967295,D=b+(_<<15&4294967295|_>>>17),_=w+(b^(D|~v))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~b))+E[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=b+(w^(v|~D))+E[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~w))+E[6]+2734768916&4294967295,D=b+(_<<15&4294967295|_>>>17),_=w+(b^(D|~v))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~b))+E[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=b+(w^(v|~D))+E[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~w))+E[2]+718787259&4294967295,D=b+(_<<15&4294967295|_>>>17),_=w+(b^(D|~v))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,E=this.B,D=this.h,b=0;b<v;){if(D==0)for(;b<=w;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<v;)if(E[D++]=I.charCodeAt(b++),D==this.blockSize){i(this,E),D=0;break}}else for(;b<v;)if(E[D++]=I[b++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var E=0;32>E;E+=8)I[w++]=this.g[v]>>>E&255;return I};function o(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function s(I,v){this.h=v;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var b=I[D]|0;E&&b==v||(w[D]=b,E=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var v=[],w=1,E=0;I>=w;E++)v[E]=I/w|0,w*=4294967296;return new s(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return N(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),E=p,D=0;D<I.length;D+=8){var b=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+b),v);8>b?(b=l(Math.pow(v,b)),E=E.j(b).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=c(0),m=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-N(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(M(this))return"-"+N(this).toString(I);for(var v=l(Math.pow(I,6)),w=this,E="";;){var D=X(w,v).g;w=B(w,D.j(v));var b=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,T(w))return b+E;for(;6>b.length;)b="0"+b;E=b+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=B(this,I),M(I)?-1:T(I)?0:1};function N(I){for(var v=I.g.length,w=[],E=0;E<v;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return M(this)?N(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=v;D++){var b=E+(this.i(D)&65535)+(I.i(D)&65535),_=(b>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,b&=65535,_&=65535,w[D]=_<<16|b}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(I,v){return I.add(N(v))}n.j=function(I){if(T(this)||T(I))return p;if(M(this))return M(I)?N(this).j(N(I)):N(N(this).j(I));if(M(I))return N(this.j(N(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],E=0;E<2*v;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var b=this.i(E)>>>16,_=this.i(E)&65535,or=I.i(D)>>>16,fa=I.i(D)&65535;w[2*E+2*D]+=_*fa,z(w,2*E+2*D),w[2*E+2*D+1]+=b*fa,z(w,2*E+2*D+1),w[2*E+2*D+1]+=_*or,z(w,2*E+2*D+1),w[2*E+2*D+2]+=b*or,z(w,2*E+2*D+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new s(w,0)};function z(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function F(I,v){this.g=I,this.h=v}function X(I,v){if(T(v))throw Error("division by zero");if(T(I))return new F(p,p);if(M(I))return v=X(N(I),v),new F(N(v.g),N(v.h));if(M(v))return v=X(I,N(v)),new F(N(v.g),v.h);if(30<I.g.length){if(M(I)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=v;0>=E.l(I);)w=ne(w),E=ne(E);var D=ee(w,1),b=ee(E,1);for(E=ee(E,2),w=ee(w,2);!T(E);){var _=b.add(E);0>=_.l(I)&&(D=D.add(w),b=_),E=ee(E,1),w=ee(w,1)}return v=B(I,D.j(v)),new F(D,v)}for(D=p;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),b=l(w),_=b.j(v);M(_)||0<_.l(I);)w-=E,b=l(w),_=b.j(v);T(b)&&(b=m),D=D.add(b),I=B(I,_)}return new F(D,I)}n.A=function(I){return X(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function ne(I){for(var v=I.g.length+1,w=[],E=0;E<v;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function ee(I,v){var w=v>>5;v%=32;for(var E=I.g.length-w,D=[],b=0;b<E;b++)D[b]=0<v?I.i(b+w)>>>v|I.i(b+w+1)<<32-v:I.i(b+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Vy=gb.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ri=gb.Integer=s}).apply(typeof pb<"u"?pb:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dr={};var jy,y2,bs,By,Fc,ch,Uy,$y,Hy;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var A=f++;return{value:d(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function T(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,A){for(var L=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)L[Ae-2]=arguments[Ae];return d.prototype[C].apply(g,L)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function N(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,A=g.length||0;u.length=C+A;for(let L=0;L<A;L++)u[C+L]=g[L]}else u.push(g)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function X(u){return X[" "](u),u}X[" "]=function(){};var ne=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function ee(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function b(u){a.setTimeout(()=>{throw u},0)}function _(){var u=Nf;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class or{constructor(){this.h=this.g=null}add(d,f){let g=fa.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var fa=new B(()=>new lM,u=>u.reset());class lM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let pa,ga=!1,Nf=new or,zw=()=>{let u=a.Promise.resolve(void 0);pa=()=>{u.then(dM)}};var dM=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(f){b(f)}var d=fa;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}ga=!1};function Pr(){this.s=this.s,this.C=this.C}Pr.prototype.s=!1,Pr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function wt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var hM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function ma(u,d){if(wt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ne){e:{try{X(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:fM[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ma.aa.h.call(this)}}T(ma,wt);var fM={2:"touch",3:"pen",4:"mouse"};ma.prototype.h=function(){ma.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ya="closure_listenable_"+(1e6*Math.random()|0),pM=0;function gM(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++pM,this.da=this.fa=!1}function Du(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Cu(u){this.src=u,this.g={},this.h=0}Cu.prototype.add=function(u,d,f,g,C){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var L=kf(u,d,g,C);return-1<L?(d=u[L],f||(d.fa=!1)):(d=new gM(d,this.src,A,!!g,C),d.fa=f,u.push(d)),d};function Pf(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Du(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function kf(u,d,f,g){for(var C=0;C<u.length;++C){var A=u[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Of="closure_lm_"+(1e6*Math.random()|0),Ff={};function Gw(u,d,f,g,C){if(g&&g.once)return Kw(u,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Gw(u,d[A],f,g,C);return null}return f=Bf(f),u&&u[ya]?u.K(d,f,l(g)?!!g.capture:!!g,C):Ww(u,d,f,!1,g,C)}function Ww(u,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,Ae=Vf(u);if(Ae||(u[Of]=Ae=new Cu(u)),f=Ae.add(d,f,g,L,A),f.proxy)return f;if(g=mM(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)hM||(C=L),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(Yw(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function mM(){function u(f){return d.call(u.src,u.listener,f)}let d=yM;return u}function Kw(u,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Kw(u,d[A],f,g,C);return null}return f=Bf(f),u&&u[ya]?u.L(d,f,l(g)?!!g.capture:!!g,C):Ww(u,d,f,!0,g,C)}function Qw(u,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)Qw(u,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Bf(f),u&&u[ya]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],f=kf(A,f,g,C),-1<f&&(Du(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=Vf(u))&&(d=u.g[d.toString()],u=-1,d&&(u=kf(d,f,g,C)),(f=-1<u?d[u]:null)&&Lf(f))}function Lf(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[ya])Pf(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(Yw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Vf(d))?(Pf(f,u),f.h==0&&(f.src=null,d[Of]=null)):Du(u)}}}function Yw(u){return u in Ff?Ff[u]:Ff[u]="on"+u}function yM(u,d){if(u.da)u=!0;else{d=new ma(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Lf(u),u=f.call(g,d)}return u}function Vf(u){return u=u[Of],u instanceof Cu?u:null}var jf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bf(u){return typeof u=="function"?u:(u[jf]||(u[jf]=function(d){return u.handleEvent(d)}),u[jf])}function It(){Pr.call(this),this.i=new Cu(this),this.M=this,this.F=null}T(It,Pr),It.prototype[ya]=!0,It.prototype.removeEventListener=function(u,d,f,g){Qw(this,u,d,f,g)};function xt(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new wt(d,u);else if(d instanceof wt)d.target=d.target||u;else{var C=d;d=new wt(g,u),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=Tu(L,g,!0,d)&&C}if(L=d.g=u,C=Tu(L,g,!0,d)&&C,C=Tu(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=Tu(L,g,!1,d)&&C}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)Du(f[g]);delete u.g[d],u.h--}}this.F=null},It.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},It.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function Tu(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var Ae=L.listener,gt=L.ha||L.src;L.fa&&Pf(u.i,L),C=Ae.call(gt,g)!==!1&&C}}return C&&!g.defaultPrevented}function Zw(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Jw(u){u.g=Zw(()=>{u.g=null,u.i&&(u.i=!1,Jw(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class vM extends Pr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Jw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function va(u){Pr.call(this),this.h=u,this.g={}}T(va,Pr);var Xw=[];function eI(u){ee(u.g,function(d,f){this.g.hasOwnProperty(f)&&Lf(d)},u),u.g={}}va.prototype.N=function(){va.aa.N.call(this),eI(this)},va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Uf=a.JSON.stringify,_M=a.JSON.parse,wM=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function $f(){}$f.prototype.h=null;function tI(u){return u.h||(u.h=u.i())}function nI(){}var _a={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hf(){wt.call(this,"d")}T(Hf,wt);function qf(){wt.call(this,"c")}T(qf,wt);var Di={},rI=null;function bu(){return rI=rI||new It}Di.La="serverreachability";function iI(u){wt.call(this,Di.La,u)}T(iI,wt);function wa(u){let d=bu();xt(d,new iI(d))}Di.STAT_EVENT="statevent";function oI(u,d){wt.call(this,Di.STAT_EVENT,u),this.stat=d}T(oI,wt);function Mt(u){let d=bu();xt(d,new oI(d,u))}Di.Ma="timingevent";function sI(u,d){wt.call(this,Di.Ma,u),this.size=d}T(sI,wt);function Ia(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Ea(){this.g=!0}Ea.prototype.xa=function(){this.g=!1};function IM(u,d,f,g,C,A){u.info(function(){if(u.g)if(A)for(var L="",Ae=A.split("&"),gt=0;gt<Ae.length;gt++){var Ie=Ae[gt].split("=");if(1<Ie.length){var Et=Ie[0];Ie=Ie[1];var Dt=Et.split("_");L=2<=Dt.length&&Dt[1]=="type"?L+(Et+"="+Ie+"&"):L+(Et+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function EM(u,d,f,g,C,A,L){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function To(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+CM(u,f)+(g?" "+g:"")})}function DM(u,d){u.info(function(){return"TIMEOUT: "+d})}Ea.prototype.info=function(){};function CM(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return Uf(f)}catch{return d}}var Su={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},aI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zf;function Au(){}T(Au,$f),Au.prototype.g=function(){return new XMLHttpRequest},Au.prototype.i=function(){return{}},zf=new Au;function kr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new va(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cI}function cI(){this.i=null,this.g="",this.h=!1}var uI={},Gf={};function Wf(u,d,f){u.L=1,u.v=Nu(sr(d)),u.m=f,u.P=!0,lI(u,null)}function lI(u,d){u.F=Date.now(),xu(u),u.A=sr(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),CI(f.i,"t",g),u.C=0,f=u.j.J,u.h=new cI,u.g=$I(u.j,f?d:null,!u.m),0<u.O&&(u.M=new vM(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(Xw[0]=C.toString()),C=Xw);for(var A=0;A<C.length;A++){var L=Gw(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),wa(),IM(u.i,u.u,u.A,u.l,u.R,u.m)}kr.prototype.ca=function(u){u=u.target;let d=this.M;d&&ar(u)==3?d.j():this.Y(u)},kr.prototype.Y=function(u){try{if(u==this.g)e:{let Dt=ar(this.g);var d=this.g.Ba();let Ao=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||RI(this.g)))){this.J||Dt!=4||d==7||(d==8||0>=Ao?wa(3):wa(2)),Kf(this);var f=this.g.Z();this.X=f;t:if(dI(this)){var g=RI(this.g);u="";var C=g.length,A=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ci(this),Da(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,EM(this.i,this.u,this.A,this.l,this.R,Dt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,gt=this.g;if((Ae=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Ae)){var Ie=Ae;break t}}Ie=null}if(f=Ie)To(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qf(this,f);else{this.o=!1,this.s=3,Mt(12),Ci(this),Da(this);break e}}if(this.P){f=!0;let Dn;for(;!this.J&&this.C<L.length;)if(Dn=TM(this,L),Dn==Gf){Dt==4&&(this.s=4,Mt(14),f=!1),To(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==uI){this.s=4,Mt(15),To(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else To(this.i,this.l,Dn,null),Qf(this,Dn);if(dI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||L.length!=0||this.h.h||(this.s=1,Mt(16),f=!1),this.o=this.o&&f,!f)To(this.i,this.l,L,"[Invalid Chunked Response]"),Ci(this),Da(this);else if(0<L.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),tp(Et),Et.M=!0,Mt(11))}}else To(this.i,this.l,L,null),Qf(this,L);Dt==4&&Ci(this),this.o&&!this.J&&(Dt==4?VI(this.j,this):(this.o=!1,xu(this)))}else $M(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Ci(this),Da(this)}}}catch{}finally{}};function dI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function TM(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Gf:(f=Number(d.substring(f,g)),isNaN(f)?uI:(g+=1,g+f>d.length?Gf:(d=d.slice(g,g+f),u.C=g+f,d)))}kr.prototype.cancel=function(){this.J=!0,Ci(this)};function xu(u){u.S=Date.now()+u.I,hI(u,u.I)}function hI(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ia(m(u.ba,u),d)}function Kf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}kr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(DM(this.i,this.A),this.L!=2&&(wa(),Mt(17)),Ci(this),this.s=2,Da(this)):hI(this,this.S-u)};function Da(u){u.j.G==0||u.J||VI(u.j,u)}function Ci(u){Kf(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,eI(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Qf(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Yf(f.h,u))){if(!u.K&&Yf(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)Lu(f),Ou(f);else break e;ep(f),Mt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ia(m(f.Za,f),6e3));if(1>=gI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else bi(f,11)}else if((u.K||f.g==u)&&Lu(f),!z(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Ie=C[d];if(f.T=Ie[0],Ie=Ie[1],f.G==2)if(Ie[0]=="c"){f.K=Ie[1],f.ia=Ie[2];let Et=Ie[3];Et!=null&&(f.la=Et,f.j.info("VER="+f.la));let Dt=Ie[4];Dt!=null&&(f.Aa=Dt,f.j.info("SVER="+f.Aa));let Ao=Ie[5];Ao!=null&&typeof Ao=="number"&&0<Ao&&(g=1.5*Ao,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Dn=u.g;if(Dn){let ju=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ju){var A=g.h;A.g||ju.indexOf("spdy")==-1&&ju.indexOf("quic")==-1&&ju.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Zf(A,A.h),A.h=null))}if(g.D){let np=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;np&&(g.ya=np,Fe(g.I,g.D,np))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=u;if(g.qa=UI(g,g.J?g.ia:null,g.W),L.K){mI(g.h,L);var Ae=L,gt=g.L;gt&&(Ae.I=gt),Ae.B&&(Kf(Ae),xu(Ae)),g.g=L}else FI(g);0<f.i.length&&Fu(f)}else Ie[0]!="stop"&&Ie[0]!="close"||bi(f,7);else f.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?bi(f,7):Xf(f):Ie[0]!="noop"&&f.l&&f.l.ta(Ie),f.v=0)}}wa(4)}catch{}}var bM=class{constructor(u,d){this.g=u,this.map=d}};function fI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function gI(u){return u.h?1:u.g?u.g.size:0}function Yf(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Zf(u,d){u.g?u.g.add(d):u.h=d}function mI(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}fI.prototype.cancel=function(){if(this.i=yI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function yI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function SM(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function AM(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function vI(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=AM(u),g=SM(u),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],u)}var _I=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xM(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var A=u[f].substring(0,g);C=u[f].substring(g+1)}else A=u[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Ti(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ti){this.h=u.h,Mu(this,u.j),this.o=u.o,this.g=u.g,Ru(this,u.s),this.l=u.l;var d=u.i,f=new ba;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),wI(this,f),this.m=u.m}else u&&(d=String(u).match(_I))?(this.h=!1,Mu(this,d[1]||"",!0),this.o=Ca(d[2]||""),this.g=Ca(d[3]||"",!0),Ru(this,d[4]),this.l=Ca(d[5]||"",!0),wI(this,d[6]||"",!0),this.m=Ca(d[7]||"")):(this.h=!1,this.i=new ba(null,this.h))}Ti.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ta(d,II,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ta(d,II,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Ta(f,f.charAt(0)=="/"?NM:RM,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Ta(f,kM)),u.join("")};function sr(u){return new Ti(u)}function Mu(u,d,f){u.j=f?Ca(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Ru(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function wI(u,d,f){d instanceof ba?(u.i=d,OM(u.i,u.h)):(f||(d=Ta(d,PM)),u.i=new ba(d,u.h))}function Fe(u,d,f){u.i.set(d,f)}function Nu(u){return Fe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ca(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ta(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,MM),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function MM(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var II=/[#\/\?@]/g,RM=/[#\?:]/g,NM=/[#\?]/g,PM=/[#\?@]/g,kM=/#/g;function ba(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Or(u){u.g||(u.g=new Map,u.h=0,u.i&&xM(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ba.prototype,n.add=function(u,d){Or(this),this.i=null,u=bo(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function EI(u,d){Or(u),d=bo(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function DI(u,d){return Or(u),d=bo(u,d),u.g.has(d)}n.forEach=function(u,d){Or(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},n.na=function(){Or(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(u){Or(this);let d=[];if(typeof u=="string")DI(this,u)&&(d=d.concat(this.g.get(bo(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return Or(this),this.i=null,u=bo(this,u),DI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function CI(u,d,f){EI(u,d),0<f.length&&(u.i=null,u.g.set(bo(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),u.push(C)}}return this.i=u.join("&")};function bo(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function OM(u,d){d&&!u.j&&(Or(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(EI(this,g),CI(this,C,f))},u)),u.j=d}function FM(u,d){let f=new Ea;if(a.Image){let g=new Image;g.onload=y(Fr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Fr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Fr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Fr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function LM(u,d){let f=new Ea,g=new AbortController,C=setTimeout(()=>{g.abort(),Fr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?Fr(f,"TestPingServer: ok",!0,d):Fr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Fr(f,"TestPingServer: error",!1,d)})}function Fr(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function VM(){this.g=new wM}function jM(u,d,f){let g=f||"";try{vI(u,function(C,A){let L=C;l(C)&&(L=Uf(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Sa(u){this.l=u.Ub||null,this.j=u.eb||!1}T(Sa,$f),Sa.prototype.g=function(){return new Pu(this.l,this.j)},Sa.prototype.i=function(u){return function(){return u}}({});function Pu(u,d){It.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Pu,It),n=Pu.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,xa(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Aa(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xa(this)),this.g&&(this.readyState=3,xa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;TI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function TI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Aa(this):xa(this),this.readyState==3&&TI(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Aa(this))},n.Qa=function(u){this.g&&(this.response=u,Aa(this))},n.ga=function(){this.g&&Aa(this)};function Aa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,xa(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function xa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Pu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function bI(u){let d="";return ee(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Jf(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=bI(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Fe(u,d,f))}function Ge(u){It.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Ge,It);var BM=/^https?$/i,UM=["POST","PUT"];n=Ge.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zf.g(),this.v=this.o?tI(this.o):tI(zf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){SI(this,A);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(UM,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{MI(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){SI(this,A)}};function SI(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,AI(u),ku(u)}function AI(u){u.A||(u.A=!0,xt(u,"complete"),xt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,xt(this,"complete"),xt(this,"abort"),ku(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ku(this,!0)),Ge.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?xI(this):this.bb())},n.bb=function(){xI(this)};function xI(u){if(u.h&&typeof s<"u"&&(!u.v[1]||ar(u)!=4||u.Z()!=2)){if(u.u&&ar(u)==4)Zw(u.Ea,0,u);else if(xt(u,"readystatechange"),ar(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(u.D).match(_I)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!BM.test(C?C.toLowerCase():"")}f=g}if(f)xt(u,"complete"),xt(u,"success");else{u.m=6;try{var A=2<ar(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",AI(u)}}finally{ku(u)}}}}function ku(u,d){if(u.g){MI(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||xt(u,"ready");try{f.onreadystatechange=g}catch{}}}function MI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function ar(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),_M(d)}};function RI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $M(u){let d={};u=(u.g&&2<=ar(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(z(u[g]))continue;var f=D(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ma(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function NI(u){this.Aa=0,this.i=[],this.j=new Ea,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ma("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ma("baseRetryDelayMs",5e3,u),this.cb=Ma("retryDelaySeedMs",1e4,u),this.Wa=Ma("forwardChannelMaxRetries",2,u),this.wa=Ma("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new fI(u&&u.concurrentRequestLimit),this.Da=new VM,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=NI.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){Mt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=UI(this,null,this.W),Fu(this)};function Xf(u){if(PI(u),u.G==3){var d=u.U++,f=sr(u.I);if(Fe(f,"SID",u.K),Fe(f,"RID",d),Fe(f,"TYPE","terminate"),Ra(u,f),d=new kr(u,u.j,d),d.L=2,d.v=Nu(sr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=$I(d.j,null),d.g.ea(d.v)),d.F=Date.now(),xu(d)}BI(u)}function Ou(u){u.g&&(tp(u),u.g.cancel(),u.g=null)}function PI(u){Ou(u),u.u&&(a.clearTimeout(u.u),u.u=null),Lu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Fu(u){if(!pI(u.h)&&!u.s){u.s=!0;var d=u.Ga;pa||zw(),ga||(pa(),ga=!0),Nf.add(d,u),u.B=0}}function HM(u,d){return gI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ia(m(u.Ga,u,d),jI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new kr(this,this.j,u),A=this.o;if(this.S&&(A?(A=v(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=OI(this,C,d),f=sr(this.I),Fe(f,"RID",u),Fe(f,"CVER",22),this.D&&Fe(f,"X-HTTP-Session-Id",this.D),Ra(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(bI(A)))+"&"+d:this.m&&Jf(f,this.m,A)),Zf(this.h,C),this.Ua&&Fe(f,"TYPE","init"),this.P?(Fe(f,"$req",d),Fe(f,"SID","null"),C.T=!0,Wf(C,f,null)):Wf(C,f,d),this.G=2}}else this.G==3&&(u?kI(this,u):this.i.length==0||pI(this.h)||kI(this))};function kI(u,d){var f;d?f=d.l:f=u.U++;let g=sr(u.I);Fe(g,"SID",u.K),Fe(g,"RID",f),Fe(g,"AID",u.T),Ra(u,g),u.m&&u.o&&Jf(g,u.m,u.o),f=new kr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=OI(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Zf(u.h,f),Wf(f,g,d)}function Ra(u,d){u.H&&ee(u.H,function(f,g){Fe(d,g,f)}),u.l&&vI({},function(f,g){Fe(d,g,f)})}function OI(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let Ae=!0;for(let gt=0;gt<f;gt++){let Ie=C[gt].g,Et=C[gt].map;if(Ie-=A,0>Ie)A=Math.max(0,C[gt].g-100),Ae=!1;else try{jM(Et,L,"req"+Ie+"_")}catch{g&&g(Et)}}if(Ae){g=L.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function FI(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;pa||zw(),ga||(pa(),ga=!0),Nf.add(d,u),u.v=0}}function ep(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ia(m(u.Fa,u),jI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,LI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ia(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),Ou(this),LI(this))};function tp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function LI(u){u.g=new kr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=sr(u.qa);Fe(d,"RID","rpc"),Fe(d,"SID",u.K),Fe(d,"AID",u.T),Fe(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Fe(d,"TO",u.ja),Fe(d,"TYPE","xmlhttp"),Ra(u,d),u.m&&u.o&&Jf(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=Nu(sr(d)),f.m=null,f.P=!0,lI(f,u)}n.Za=function(){this.C!=null&&(this.C=null,Ou(this),ep(this),Mt(19))};function Lu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function VI(u,d){var f=null;if(u.g==d){Lu(u),tp(u),u.g=null;var g=2}else if(Yf(u.h,d))f=d.D,mI(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=bu(),xt(g,new sI(g,f)),Fu(u)}else FI(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&HM(u,d)||g==2&&ep(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:bi(u,5);break;case 4:bi(u,10);break;case 3:bi(u,6);break;default:bi(u,2)}}}function jI(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function bi(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new Ti(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Mu(g,"https"),Nu(g),C?FM(g.toString(),f):LM(g.toString(),f)}else Mt(2);u.G=0,u.l&&u.l.sa(d),BI(u),PI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function BI(u){if(u.G=0,u.ka=[],u.l){let d=yI(u.h);(d.length!=0||u.i.length!=0)&&(N(u.ka,d),N(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function UI(u,d,f){var g=f instanceof Ti?sr(f):new Ti(f);if(g.g!="")d&&(g.g=d+"."+g.g),Ru(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Ti(null);g&&Mu(A,g),d&&(A.g=d),C&&Ru(A,C),f&&(A.l=f),g=A}return f=u.D,d=u.ya,f&&d&&Fe(g,f,d),Fe(g,"VER",u.la),Ra(u,g),g}function $I(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ge(new Sa({eb:f})):new Ge(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function HI(){}n=HI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Vu(){}Vu.prototype.g=function(u,d){return new Zt(u,d)};function Zt(u,d){It.call(this),this.g=new NI(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!z(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new So(this)}T(Zt,It),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Xf(this.g)},Zt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=Uf(u),u=f);d.i.push(new bM(d.Ya++,u)),d.G==3&&Fu(d)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Xf(this.g),delete this.g,Zt.aa.N.call(this)};function qI(u){Hf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}T(qI,Hf);function zI(){qf.call(this),this.status=1}T(zI,qf);function So(u){this.g=u}T(So,HI),So.prototype.ua=function(){xt(this.g,"a")},So.prototype.ta=function(u){xt(this.g,new qI(u))},So.prototype.sa=function(u){xt(this.g,new zI)},So.prototype.ra=function(){xt(this.g,"b")},Vu.prototype.createWebChannel=Vu.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,Hy=Dr.createWebChannelTransport=function(){return new Vu},$y=Dr.getStatEventTarget=function(){return bu()},Uy=Dr.Event=Di,ch=Dr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Su.NO_ERROR=0,Su.TIMEOUT=8,Su.HTTP_ERROR=6,Fc=Dr.ErrorCode=Su,aI.COMPLETE="complete",By=Dr.EventType=aI,nI.EventType=_a,_a.OPEN="a",_a.CLOSE="b",_a.ERROR="c",_a.MESSAGE="d",It.prototype.listen=It.prototype.K,bs=Dr.WebChannel=nI,y2=Dr.FetchXmlHttpFactory=Sa,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,jy=Dr.XhrIo=Ge}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});var mb="@firebase/firestore";var ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");var ra="10.14.0";var li=new $u("@firebase/firestore");function Rs(){return li.logLevel}function _S(n){li.setLogLevel(n)}function k(n,...e){if(li.logLevel<=Bn.DEBUG){let t=e.map(K_);li.debug(`Firestore (${ra}): ${n}`,...t)}}function et(n,...e){if(li.logLevel<=Bn.ERROR){let t=e.map(K_);li.error(`Firestore (${ra}): ${n}`,...t)}}function On(n,...e){if(li.logLevel<=Bn.WARN){let t=e.map(K_);li.warn(`Firestore (${ra}): ${n}`,...t)}}function K_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function G(n="Unexpected state"){let e=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: `+n;throw et(e),new Error(e)}function Q(n,e){n||G()}function wS(n,e){n||G()}function U(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends ZI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var dt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var vh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Qy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ct.UNAUTHENTICATED))}shutdown(){}},Yy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Zy=class{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Q(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new dt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new dt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>R(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new dt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new vh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new ct(e)}},Jy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Xy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Jy(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ev=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},tv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Q(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Q(typeof t.token=="string"),this.R=t.token,new ev(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function v2(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var _h=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=v2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ae(n,e){return n<e?-1:n>e?1:0}function Bs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function IS(n){return n+"\0"}var qe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new qe(0,0))}static max(){return new n(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var wh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&G(),r===void 0?r=e.length-t:r>e.length-t&&G(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},_e=class n extends wh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},_2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tt=class n extends wh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return _2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(_e.fromString(e))}static fromName(e){return new n(_e.fromString(e).popFirst(5))}static empty(){return new n(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new _e(e.slice()))}};var Us=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function nv(n){return n.fields.find(e=>e.kind===2)}function Ji(n){return n.fields.filter(e=>e.kind!==2)}Us.UNKNOWN_ID=-1;var Ls=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Kc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,In.min())}};function ES(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new qe(t+1,0):new qe(t,r));return new In(i,$.empty(),e)}function DS(n){return new In(n.readTime,n.key,-1)}var In=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Z.min(),$.empty(),-1)}static max(){return new n(Z.max(),$.empty(),-1)}};function Q_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var CS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ih=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function wi(n){return R(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==CS)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Eh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new dt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new io(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Y_(r.target.error);this.V.reject(new io(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new io(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new iv(t)}},di=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Na())===12.2&&et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Xi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Uu())return!1;if(n.v())return!0;let e=Na(),t=n.S(e),r=0<t&&t<10,i=TS(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return R(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new io(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new io(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Eh.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function TS(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var rv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Xi(this.B.delete())}},io=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ii(n){return n.name==="IndexedDbTransactionError"}var iv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xi(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Xi(this.store.add(e))}get(e){return Xi(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Xi(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Xi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Y_(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new rv(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Xi(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Y_(r.target.error);t(i)}})}var yb=!1;function Y_(n){let e=di.S(Na());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yb||(yb=!0,setTimeout(()=>{throw r},0)),r}}return n}var ov=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Ii(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield wi(t)}yield this.X(6e4)}))}},sv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=DS(o);Q_(s,r)>0&&(r=s)}),new In(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var sn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function gu(n){return n==null}function Qc(n){return n===0&&1/n==-1/0}function bS(n){return typeof n=="number"&&Number.isInteger(n)&&!Qc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function jt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vb(e)),e=w2(n.get(t),e);return vb(e)}function w2(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function vb(n){return n+""}function Qn(n){let e=n.length;if(Q(e>=2),e===2)return Q(n.charAt(0)===""&&n.charAt(1)===""),_e.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&G(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:G()}o=s+2}return new _e(r)}var _b=["userId","batchId"];function fh(n,e){return[n,jt(e)]}function SS(n,e,t){return[n,jt(e),t]}var I2={},E2=["prefixPath","collectionGroup","readTime","documentId"],D2=["prefixPath","collectionGroup","documentId"],C2=["collectionGroup","readTime","prefixPath","documentId"],T2=["canonicalId","targetId"],b2=["targetId","path"],S2=["path","targetId"],A2=["collectionId","parent"],x2=["indexId","uid"],M2=["uid","sequenceNumber"],R2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],N2=["indexId","uid","orderedDocumentKey"],P2=["userId","collectionPath","documentId"],k2=["userId","collectionPath","largestBatchId"],O2=["userId","collectionGroup","largestBatchId"],AS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],F2=[...AS,"documentOverlays"],xS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],MS=xS,Z_=[...MS,"indexConfiguration","indexState","indexEntries"],L2=Z_,V2=[...Z_,"globals"];var Yc=class extends Ih{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function ht(n,e){let t=U(n);return di.F(t._e,e)}function wb(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Le=class n{constructor(e,t){this.comparator=e,this.root=t||Zn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fs(this.root,e,this.comparator,!0)}},Fs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}};Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1;Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Zn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Re=class n{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dh(this.data.getIterator())}getIteratorFrom(e){return new Dh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Dh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ss(n){return n.hasNext()?n.getNext():void 0}var an=class n{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Re(tt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ch=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function NS(){return typeof atob<"u"}var rt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ch("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var j2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(n){if(Q(!!n),typeof n=="string"){let e=0,t=j2.exec(n);if(Q(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(n.seconds),nanos:Ue(n.nanos)}}function Ue(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function hi(n){return typeof n=="string"?rt.fromBase64String(n):rt.fromUint8Array(n)}function mf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function J_(n){let e=n.mapValue.fields.__previous_value__;return mf(e)?J_(e):e}function Zc(n){let e=br(n.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}var av=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},fi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ci={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ph={nullValue:"NULL_VALUE"};function oo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mf(n)?4:PS(n)?9007199254740991:yf(n)?10:11:G()}function er(n,e){if(n===e)return!0;let t=oo(n);if(t!==oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zc(n).isEqual(Zc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=br(i.timestampValue),a=br(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return hi(i.bytesValue).isEqual(hi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ue(i.geoPointValue.latitude)===Ue(o.geoPointValue.latitude)&&Ue(i.geoPointValue.longitude)===Ue(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ue(i.integerValue)===Ue(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ue(i.doubleValue),a=Ue(o.doubleValue);return s===a?Qc(s)===Qc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Bs(n.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(wb(s)!==wb(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!er(s[c],a[c])))return!1;return!0}(n,e);default:return G()}}function Jc(n,e){return(n.values||[]).find(t=>er(t,e))!==void 0}function pi(n,e){if(n===e)return 0;let t=oo(n),r=oo(e);if(t!==r)return ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ue(o.integerValue||o.doubleValue),c=Ue(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Ib(n.timestampValue,e.timestampValue);case 4:return Ib(Zc(n),Zc(e));case 5:return ae(n.stringValue,e.stringValue);case 6:return function(o,s){let a=hi(o),c=hi(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ae(a[l],c[l]);if(h!==0)return h}return ae(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ae(Ue(o.latitude),Ue(s.latitude));return a!==0?a:ae(Ue(o.longitude),Ue(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Eb(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,T=(c=m.value)===null||c===void 0?void 0:c.arrayValue,M=ae(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:Eb(y,T)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===ci.mapValue&&s===ci.mapValue)return 0;if(o===ci.mapValue)return 1;if(s===ci.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=ae(c[p],h[p]);if(m!==0)return m;let y=pi(a[c[p]],l[h[p]]);if(y!==0)return y}return ae(c.length,h.length)}(n.mapValue,e.mapValue);default:throw G()}}function Ib(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=br(n),r=br(e),i=ae(t.seconds,r.seconds);return i!==0?i:ae(t.nanos,r.nanos)}function Eb(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=pi(t[i],r[i]);if(o)return o}return ae(t.length,r.length)}function $s(n){return cv(n)}function cv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=br(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return hi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=cv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${cv(t.fields[s])}`;return i+"}"}(n.mapValue):G()}function so(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uv(n){return!!n&&"integerValue"in n}function Xc(n){return!!n&&"arrayValue"in n}function Db(n){return!!n&&"nullValue"in n}function Cb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gh(n){return!!n&&"mapValue"in n}function yf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Hc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return yo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var kS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function B2(n){return"nullValue"in n?ph:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?so(fi.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?yf(n)?kS:{mapValue:{}}:G()}function U2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?so(fi.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?kS:"mapValue"in n?yf(n)?{mapValue:{}}:ci:G()}function Tb(n,e){let t=pi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function bb(n,e){let t=pi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var At=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(t)}setAll(e){let t=tt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Hc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());gh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){yo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Hc(this.value))}};function OS(n){let e=[];return yo(n.fields,(t,r)=>{let i=new tt([t]);if(gh(r)){let o=OS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new an(e)}var ut=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Z.min(),Z.min(),Z.min(),At.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Z.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Z.min(),Z.min(),At.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Z.min(),Z.min(),At.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var tr=class{constructor(e,t){this.position=e,this.inclusive=t}};function Sb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=pi(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ab(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!er(n.position[t],e.position[t]))return!1;return!0}var ao=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function $2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Th=class{},ge=class n extends Th{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hv(e,t,r):t==="array-contains"?new gv(e,r):t==="in"?new bh(e,r):t==="not-in"?new mv(e,r):t==="array-contains-any"?new yv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new fv(e,r):new pv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(pi(t,this.value)):t!==null&&oo(this.value)===oo(t)&&this.matchesComparison(pi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Se=class n extends Th{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Hs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Hs(n){return n.op==="and"}function lv(n){return n.op==="or"}function X_(n){return FS(n)&&Hs(n)}function FS(n){for(let e of n.filters)if(e instanceof Se)return!1;return!0}function dv(n){if(n instanceof ge)return n.field.canonicalString()+n.op.toString()+$s(n.value);if(X_(n))return n.filters.map(e=>dv(e)).join(",");{let e=n.filters.map(t=>dv(t)).join(",");return`${n.op}(${e})`}}function LS(n,e){return n instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&er(r.value,i.value)}(n,e):n instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&LS(s,i.filters[a]),!0):!1}(n,e):void G()}function VS(n,e){let t=n.filters.concat(e);return Se.create(t,n.op)}function jS(n){return n instanceof ge?function(t){return`${t.field.canonicalString()} ${t.op} ${$s(t.value)}`}(n):n instanceof Se?function(t){return t.op.toString()+" {"+t.getFilters().map(jS).join(" ,")+"}"}(n):"Filter"}var hv=class extends ge{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},fv=class extends ge{constructor(e,t){super(e,"in",t),this.keys=BS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},pv=class extends ge{constructor(e,t){super(e,"not-in",t),this.keys=BS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function BS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var gv=class extends ge{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Xc(t)&&Jc(t.arrayValue,this.value)}},bh=class extends ge{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Jc(this.value.arrayValue,t)}},mv=class extends ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Jc(this.value.arrayValue,t)}},yv=class extends ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Xc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Jc(this.value.arrayValue,r))}};var vv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function _v(n,e=null,t=[],r=[],i=null,o=null,s=null){return new vv(n,e,t,r,i,o,s)}function co(n){let e=U(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>dv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),gu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$s(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$s(r)).join(",")),e.ue=t}return e.ue}function mu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ab(n.startAt,e.startAt)&&Ab(n.endAt,e.endAt)}function Sh(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ah(n,e){return n.filters.filter(t=>t instanceof ge&&t.field.isEqual(e))}function xb(n,e,t){let r=ph,i=!0;for(let o of Ah(n,e)){let s=ph,a=!0;switch(o.op){case"<":case"<=":s=B2(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=ph}Tb({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];Tb({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function Mb(n,e,t){let r=ci,i=!0;for(let o of Ah(n,e)){let s=ci,a=!0;switch(o.op){case">=":case">":s=U2(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ci}bb({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];bb({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Fn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function US(n,e,t,r,i,o,s,a){return new Fn(n,e,t,r,i,o,s,a)}function ia(n){return new Fn(n)}function Rb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ew(n){return n.collectionGroup!==null}function Vs(n){let e=U(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Re(tt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ao(o,r))}),t.has(tt.keyField().canonicalString())||e.ce.push(new ao(tt.keyField(),r))}return e.ce}function Bt(n){let e=U(n);return e.le||(e.le=H2(e,Vs(n))),e.le}function H2(n,e){if(n.limitType==="F")return _v(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ao(i.field,o)});let t=n.endAt?new tr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new tr(n.startAt.position,n.startAt.inclusive):null;return _v(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function wv(n,e){let t=n.filters.concat([e]);return new Fn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xh(n,e,t){return new Fn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yu(n,e){return mu(Bt(n),Bt(e))&&n.limitType===e.limitType}function $S(n){return`${co(Bt(n))}|lt:${n.limitType}`}function Ns(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>jS(i)).join(", ")}]`),gu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$s(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$s(i)).join(",")),`Target(${r})`}(Bt(n))}; limitType=${n.limitType})`}function vu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Vs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=Sb(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Vs(r),i)||r.endAt&&!function(s,a,c){let l=Sb(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Vs(r),i))}(n,e)}function HS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qS(n){return(e,t)=>{let r=!1;for(let i of Vs(n)){let o=q2(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function q2(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?pi(c,l):G()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}var nr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return RS(this.inner)}size(){return this.innerSize}};var z2=new Le($.comparator);function Qt(){return z2}var zS=new Le($.comparator);function Uc(...n){let e=zS;for(let t of n)e=e.insert(t.key,t);return e}function GS(n){let e=zS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Yn(){return qc()}function WS(){return qc()}function qc(){return new nr(n=>n.toString(),(n,e)=>n.isEqual(e))}var G2=new Le($.comparator),W2=new Re($.comparator);function ce(...n){let e=W2;for(let t of n)e=e.add(t);return e}var K2=new Re(ae);function tw(){return K2}function nw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(e)?"-0":e}}function KS(n){return{integerValue:""+n}}function QS(n,e){return bS(e)?KS(e):nw(n,e)}var qs=class{constructor(){this._=void 0}};function Q2(n,e,t){return n instanceof gi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&mf(o)&&(o=J_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Sr?ZS(n,e):n instanceof Ar?JS(n,e):function(i,o){let s=YS(i,o),a=Nb(s)+Nb(i.Pe);return uv(s)&&uv(i.Pe)?KS(a):nw(i.serializer,a)}(n,e)}function Y2(n,e,t){return n instanceof Sr?ZS(n,e):n instanceof Ar?JS(n,e):t}function YS(n,e){return n instanceof mi?function(r){return uv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var gi=class extends qs{},Sr=class extends qs{constructor(e){super(),this.elements=e}};function ZS(n,e){let t=XS(e);for(let r of n.elements)t.some(i=>er(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ar=class extends qs{constructor(e){super(),this.elements=e}};function JS(n,e){let t=XS(e);for(let r of n.elements)t=t.filter(i=>!er(i,r));return{arrayValue:{values:t}}}var mi=class extends qs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Nb(n){return Ue(n.integerValue||n.doubleValue)}function XS(n){return Xc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var uo=class{constructor(e,t){this.field=e,this.transform=t}};function Z2(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Sr&&i instanceof Sr||r instanceof Ar&&i instanceof Ar?Bs(r.elements,i.elements,er):r instanceof mi&&i instanceof mi?er(r.Pe,i.Pe):r instanceof gi&&i instanceof gi}(n.transform,e.transform)}var Iv=class{constructor(e,t){this.version=e,this.transformResults=t}},Ze=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function mh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var zs=class{};function eA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new vi(n.key,Ze.none()):new yi(n.key,n.data,Ze.none());{let t=n.data,r=At.empty(),i=new Re(tt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ln(n.key,r,new an(i.toArray()),Ze.none())}}function J2(n,e,t){n instanceof yi?function(i,o,s){let a=i.value.clone(),c=kb(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ln?function(i,o,s){if(!mh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=kb(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(tA(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function zc(n,e,t,r){return n instanceof yi?function(o,s,a,c){if(!mh(o.precondition,s))return a;let l=o.value.clone(),h=Ob(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ln?function(o,s,a,c){if(!mh(o.precondition,s))return a;let l=Ob(o.fieldTransforms,c,s),h=s.data;return h.setAll(tA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return mh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function X2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=YS(r.transform,i||null);o!=null&&(t===null&&(t=At.empty()),t.set(r.field,o))}return t||null}function Pb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bs(r,i,(o,s)=>Z2(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var yi=class extends zs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ln=class extends zs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function tA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function kb(n,e,t){let r=new Map;Q(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Y2(s,a,t[i]))}return r}function Ob(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Q2(o,s,e))}return r}var vi=class extends zs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},eu=class extends zs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var tu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&J2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=zc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=zc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=WS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=eA(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ce())}isEqual(e){return this.batchId===e.batchId&&Bs(this.mutations,e.mutations,(t,r)=>Pb(t,r))&&Bs(this.baseMutations,e.baseMutations,(t,r)=>Pb(t,r))}},Ev=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Q(e.mutations.length===r.length);let i=function(){return G2}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var nu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Dv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var st,ve;function nA(n){switch(n){default:return G();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function rA(n){if(n===void 0)return et("GRPC error has no .code"),x.UNKNOWN;switch(n){case st.OK:return x.OK;case st.CANCELLED:return x.CANCELLED;case st.UNKNOWN:return x.UNKNOWN;case st.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case st.INTERNAL:return x.INTERNAL;case st.UNAVAILABLE:return x.UNAVAILABLE;case st.UNAUTHENTICATED:return x.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case st.NOT_FOUND:return x.NOT_FOUND;case st.ALREADY_EXISTS:return x.ALREADY_EXISTS;case st.PERMISSION_DENIED:return x.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case st.ABORTED:return x.ABORTED;case st.OUT_OF_RANGE:return x.OUT_OF_RANGE;case st.UNIMPLEMENTED:return x.UNIMPLEMENTED;case st.DATA_LOSS:return x.DATA_LOSS;default:return G()}}(ve=st||(st={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var Fb=null;function iA(){return new TextEncoder}var ej=new ri([4294967295,4294967295],0);function Lb(n){let e=iA().encode(n),t=new Vy;return t.update(e),new Uint8Array(t.digest())}function Vb(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ri([t,r],0),new ri([i,o],0)]}var Cv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ro(`Invalid padding: ${t}`);if(r<0)throw new ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ro(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ro(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ri.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ri.fromNumber(r)));return i.compare(ej)===1&&(i=new ri([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Lb(e),[r,i]=Vb(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=Lb(e),[r,i]=Vb(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ro=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ru=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Z.min(),i,new Le(ae),Qt(),ce())}},iu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ce(),ce(),ce())}};var js=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Mh=class{constructor(e,t){this.targetId=e,this.me=t}},Rh=class{constructor(e,t,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Nh=class{constructor(){this.fe=0,this.ge=Bb(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),t=ce(),r=ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G()}}),new iu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Bb()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Tv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qt(),this.qe=jb(),this.Qe=new Le(ae)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Sh(o))if(r===0){let s=new $(o.path);this.Ue(t,s,ut.newNoDocument(s,Z.min()))}else Q(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}Fb?.et(function(h,p,m,y,T){var M,N,B,z,F,X;let ne={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ee=p.unchangedNames;return ee&&(ne.bloomFilter={applied:T===0,hashCount:(M=ee?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(z=(B=(N=ee?.bits)===null||N===void 0?void 0:N.bitmap)===null||B===void 0?void 0:B.length)!==null&&z!==void 0?z:0,padding:(X=(F=ee?.bits)===null||F===void 0?void 0:F.padding)!==null&&X!==void 0?X:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),ne}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=hi(r).toUint8Array()}catch(c){if(c instanceof Ch)return On("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Cv(s,i,o)}catch(c){return On(c instanceof ro?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Sh(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,ut.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ce();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new ru(e,t,this.Qe,this.ke,r);return this.ke=Qt(),this.qe=jb(),this.Qe=new Le(ae),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Nh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Re(ae),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Nh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function jb(){return new Le($.comparator)}function Bb(){return new Le($.comparator)}var tj={asc:"ASCENDING",desc:"DESCENDING"},nj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rj={and:"AND",or:"OR"},bv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Sv(n,e){return n.useProto3Json||gu(e)?e:{value:e}}function Gs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ij(n,e){return Gs(n,e.toTimestamp())}function nt(n){return Q(!!n),Z.fromTimestamp(function(t){let r=br(t);return new qe(r.seconds,r.nanos)}(n))}function rw(n,e){return Av(n,e).canonicalString()}function Av(n,e){let t=function(i){return new _e(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function sA(n){let e=_e.fromString(n);return Q(mA(e)),e}function ou(n,e){return rw(n.databaseId,e.path)}function Jn(n,e){let t=sA(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(uA(t))}function aA(n,e){return rw(n.databaseId,e)}function cA(n){let e=sA(n);return e.length===4?_e.emptyPath():uA(e)}function xv(n){return new _e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uA(n){return Q(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Ub(n,e,t){return{name:ou(n,e),fields:t.value.mapValue.fields}}function lA(n,e,t){let r=Jn(n,e.name),i=nt(e.updateTime),o=e.createTime?nt(e.createTime):Z.min(),s=new At({mapValue:{fields:e.fields}}),a=ut.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function oj(n,e){return"found"in e?function(r,i){Q(!!i.found),i.found.name,i.found.updateTime;let o=Jn(r,i.found.name),s=nt(i.found.updateTime),a=i.found.createTime?nt(i.found.createTime):Z.min(),c=new At({mapValue:{fields:i.found.fields}});return ut.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){Q(!!i.missing),Q(!!i.readTime);let o=Jn(r,i.missing),s=nt(i.readTime);return ut.newNoDocument(o,s)}(n,e):G()}function sj(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Q(h===void 0||typeof h=="string"),rt.fromBase64String(h||"")):(Q(h===void 0||h instanceof Buffer||h instanceof Uint8Array),rt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:rA(l.code);return new P(h,l.message||"")}(s);t=new Rh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Jn(n,r.document.name),o=nt(r.document.updateTime),s=r.document.createTime?nt(r.document.createTime):Z.min(),a=new At({mapValue:{fields:r.document.fields}}),c=ut.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new js(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Jn(n,r.document),o=r.readTime?nt(r.readTime):Z.min(),s=ut.newNoDocument(i,o),a=r.removedTargetIds||[];t=new js([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Jn(n,r.document),o=r.removedTargetIds||[];t=new js([],o,i,null)}else{if(!("filter"in e))return G();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Dv(i,o),a=r.targetId;t=new Mh(a,s)}}return t}function su(n,e){let t;if(e instanceof yi)t={update:Ub(n,e.key,e.value)};else if(e instanceof vi)t={delete:ou(n,e.key)};else if(e instanceof Ln)t={update:Ub(n,e.key,e.data),updateMask:hj(e.fieldMask)};else{if(!(e instanceof eu))return G();t={verify:ou(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof gi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Sr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ar)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof mi)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw G()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:ij(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G()}(n,e.precondition)),t}function Mv(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Ze.updateTime(nt(o.updateTime)):o.exists!==void 0?Ze.exists(o.exists):Ze.none()}(e.currentDocument):Ze.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)Q(a.setToServerValue==="REQUEST_TIME"),c=new gi;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new Sr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new Ar(h)}else"increment"in a?c=new mi(s,a.increment):G();let l=tt.fromServerFormat(a.fieldPath);return new uo(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Jn(n,e.update.name),o=new At({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new an(l.map(h=>tt.fromServerFormat(h)))}(e.updateMask);return new Ln(i,o,s,t,r)}return new yi(i,o,t,r)}if(e.delete){let i=Jn(n,e.delete);return new vi(i,t)}if(e.verify){let i=Jn(n,e.verify);return new eu(i,t)}return G()}function aj(n,e){return n&&n.length>0?(Q(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?nt(i.updateTime):nt(o);return s.isEqual(Z.min())&&(s=nt(o)),new Iv(s,i.transformResults||[])}(t,e))):[]}function dA(n,e){return{documents:[aA(n,e.path)]}}function hA(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aA(n,i);let o=function(l){if(l.length!==0)return gA(Se.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ps(m.field),direction:uj(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Sv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function fA(n){let e=cA(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Q(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=pA(p);return m instanceof Se&&X_(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(T){return new ao(ks(T.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,gu(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,y=p.values||[];return new tr(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new tr(y,m)}(t.endAt)),US(e,i,s,o,a,"F",c,l)}function cj(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ks(t.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ks(t.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ks(t.unaryFilter.field);return ge.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ks(t.unaryFilter.field);return ge.create(s,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(n):n.fieldFilter!==void 0?function(t){return ge.create(ks(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Se.create(t.compositeFilter.filters.map(r=>pA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(t.compositeFilter.op))}(n):G()}function uj(n){return tj[n]}function lj(n){return nj[n]}function dj(n){return rj[n]}function Ps(n){return{fieldPath:n.canonicalString()}}function ks(n){return tt.fromServerFormat(n.fieldPath)}function gA(n){return n instanceof ge?function(t){if(t.op==="=="){if(Cb(t.value))return{unaryFilter:{field:Ps(t.field),op:"IS_NAN"}};if(Db(t.value))return{unaryFilter:{field:Ps(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cb(t.value))return{unaryFilter:{field:Ps(t.field),op:"IS_NOT_NAN"}};if(Db(t.value))return{unaryFilter:{field:Ps(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ps(t.field),op:lj(t.op),value:t.value}}}(n):n instanceof Se?function(t){let r=t.getFilters().map(i=>gA(i));return r.length===1?r[0]:{compositeFilter:{op:dj(t.op),filters:r}}}(n):G()}function hj(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ws=class n{constructor(e,t,r,i,o=Z.min(),s=Z.min(),a=rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ph=class{constructor(e){this.ct=e}};function fj(n,e){let t;if(e.document)t=lA(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=ho(e.noDocument.readTime);t=ut.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return G();{let r=$.fromSegments(e.unknownDocument.path),i=ho(e.unknownDocument.version);t=ut.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new qe(i[0],i[1]);return Z.fromTimestamp(o)}(e.readTime)),t}function $b(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:kh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:ou(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Gs(o,s.version.toTimestamp()),createTime:Gs(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:lo(e.version)};else{if(!e.isUnknownDocument())return G();r.unknownDocument={path:t.path.toArray(),version:lo(e.version)}}return r}function kh(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ho(n){let e=new qe(n.seconds,n.nanoseconds);return Z.fromTimestamp(e)}function eo(n,e){let t=(e.baseMutations||[]).map(o=>Mv(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Mv(n.ct,o)),i=qe.fromMillis(e.localWriteTimeMs);return new tu(e.batchId,i,t,r)}function $c(n){let e=ho(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ho(n.lastLimboFreeSnapshotVersion):Z.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Q(o.documents.length===1),Bt(ia(cA(o.documents[0])))}(n.query):function(o){return Bt(fA(o))}(n.query),new Ws(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,rt.fromBase64String(n.resumeToken))}function yA(n,e){let t=lo(e.snapshotVersion),r=lo(e.lastLimboFreeSnapshotVersion),i;i=Sh(e.target)?dA(n.ct,e.target):hA(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:co(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function iw(n){let e=fA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xh(e,e.limit,"L"):e}function qy(n,e){return new nu(e.largestBatchId,Mv(n.ct,e.overlayMutation))}function Hb(n,e){let t=e.path.lastSegment();return[n,jt(e.path.popLast()),t]}function qb(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:lo(r.readTime),documentKey:jt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Rv=class{getBundleMetadata(e,t){return zb(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:ho(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return zb(e).put(function(i){return{bundleId:i.id,createTime:lo(nt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Gb(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:iw(o.bundledQuery),readTime:ho(o.readTime)}}(r)})}saveNamedQuery(e,t){return Gb(e).put(function(i){return{name:i.name,readTime:lo(nt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function zb(n){return ht(n,"bundles")}function Gb(n){return ht(n,"namedQueries")}var Oh=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Lc(e).get(Hb(this.userId,t)).next(r=>r?qy(this.serializer,r):null)}getOverlays(e,t){let r=Yn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new nu(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(jt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Lc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Yn(),o=jt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Lc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=qy(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Yn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Lc(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=qy(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Lc(e).put(function(i,o,s){let[a,c,l]=Hb(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:su(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Lc(n){return ht(n,"documentOverlays")}var Nv=class{Pt(e){return ht(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?rt.fromUint8Array(r):rt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Cr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ue(e.integerValue));else if("doubleValue"in e){let r=Ue(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Qc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=br(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(hi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?PS(e)?this.dt(t,Number.MAX_SAFE_INTEGER):yf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):G()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ue(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Cr.vt=new Cr;function pj(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Wb(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=pj(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Pv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=Wb(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=Wb(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},kv=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Ov=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},to=class{constructor(){this.jt=new Pv,this.Ht=new kv(this.jt),this.Jt=new Ov(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var no=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function ii(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Kb(n.arrayValue,e.arrayValue),t!==0?t:(t=Kb(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function Kb(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Fh=class{constructor(e){this.Xt=new Re((t,r)=>tt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Q(e.collectionGroup===this.collectionId),this.nn)return!1;let t=nv(e);if(t!==void 0&&!this.sn(t))return!1;let r=Ji(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Re(tt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ls(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ls(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ls(r.field,r.dir==="asc"?0:1)));return new Us(Us.UNKNOWN_ID,this.collectionId,t,Kc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function vA(n){var e,t;if(Q(n instanceof ge||n instanceof Se),n instanceof ge){if(n instanceof bh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ge.create(n.field,"==",o)))||[];return Se.create(i,"or")}return n}let r=n.filters.map(i=>vA(i));return Se.create(r,n.op)}function gj(n){if(n.getFilters().length===0)return[];let e=Vv(vA(n));return Q(_A(e)),Fv(e)||Lv(e)?[e]:e.getFilters()}function Fv(n){return n instanceof ge}function Lv(n){return n instanceof Se&&X_(n)}function _A(n){return Fv(n)||Lv(n)||function(t){if(t instanceof Se&&lv(t)){for(let r of t.getFilters())if(!Fv(r)&&!Lv(r))return!1;return!0}return!1}(n)}function Vv(n){if(Q(n instanceof ge||n instanceof Se),n instanceof ge)return n;if(n.filters.length===1)return Vv(n.filters[0]);let e=n.filters.map(r=>Vv(r)),t=Se.create(e,n.op);return t=Lh(t),_A(t)?t:(Q(t instanceof Se),Q(Hs(t)),Q(t.filters.length>1),t.filters.reduce((r,i)=>ow(r,i)))}function ow(n,e){let t;return Q(n instanceof ge||n instanceof Se),Q(e instanceof ge||e instanceof Se),t=n instanceof ge?e instanceof ge?function(i,o){return Se.create([i,o],"and")}(n,e):Qb(n,e):e instanceof ge?Qb(e,n):function(i,o){if(Q(i.filters.length>0&&o.filters.length>0),Hs(i)&&Hs(o))return VS(i,o.getFilters());let s=lv(i)?i:o,a=lv(i)?o:i,c=s.filters.map(l=>ow(l,a));return Se.create(c,"or")}(n,e),Lh(t)}function Qb(n,e){if(Hs(e))return VS(e,n.getFilters());{let t=e.filters.map(r=>ow(n,r));return Se.create(t,"or")}}function Lh(n){if(Q(n instanceof ge||n instanceof Se),n instanceof ge)return n;let e=n.getFilters();if(e.length===1)return Lh(e[0]);if(FS(n))return n;let t=e.map(i=>Lh(i)),r=[];return t.forEach(i=>{i instanceof ge?r.push(i):i instanceof Se&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Se.create(r,n.op)}var jv=class{constructor(){this.un=new au}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(In.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(In.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},au=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Re(_e.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Re(_e.comparator)).toArray()}};var uh=new Uint8Array(0),Bv=class{constructor(e,t){this.databaseId=t,this.cn=new au,this.ln=new nr(r=>co(r),(r,i)=>mu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:jt(i)};return Yb(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[IS(t),""],!1,!0);return Yb(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Qn(s.parent))}return r})}addFieldIndex(e,t){let r=Vc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=xs(e);return o.next(a=>{s.put(qb(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Vc(e),i=xs(e),o=As(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Vc(e),r=As(e),i=xs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Fh(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=As(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ce(),a=[];return S.forEach(o,(c,l)=>{k("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`}(c)} to execute ${co(t)}`);let h=function(F,X){let ne=nv(X);if(ne===void 0)return null;for(let ee of Ah(F,ne.fieldPath))switch(ee.op){case"array-contains-any":return ee.value.arrayValue.values||[];case"array-contains":return[ee.value]}return null}(l,c),p=function(F,X){let ne=new Map;for(let ee of Ji(X))for(let I of Ah(F,ee.fieldPath))switch(I.op){case"==":case"in":ne.set(ee.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ne.set(ee.fieldPath.canonicalString(),I.value),Array.from(ne.values())}return null}(l,c),m=function(F,X){let ne=[],ee=!0;for(let I of Ji(X)){let v=I.kind===0?xb(F,I.fieldPath,F.startAt):Mb(F,I.fieldPath,F.startAt);ne.push(v.value),ee&&(ee=v.inclusive)}return new tr(ne,ee)}(l,c),y=function(F,X){let ne=[],ee=!0;for(let I of Ji(X)){let v=I.kind===0?Mb(F,I.fieldPath,F.endAt):xb(F,I.fieldPath,F.endAt);ne.push(v.value),ee&&(ee=v.inclusive)}return new tr(ne,ee)}(l,c),T=this.In(c,l,m),M=this.In(c,l,y),N=this.Tn(c,l,p),B=this.En(c.indexId,h,T,m.inclusive,M,y.inclusive,N);return S.forEach(B,z=>r.G(z,t.limit).next(F=>{F.forEach(X=>{let ne=$.fromSegments(X.documentKey);s.has(ne)||(s=s.add(ne),a.push(ne))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=gj(Se.create(e.filters,"and")).map(r=>_v(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):uh,y=this.An(e,m,r[p%l],i),T=this.Rn(e,m,o[p%l],s),M=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(y,T,M))}return h}An(e,t,r,i){let o=new no(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new no(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Fh(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Re(tt.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new to;for(let i of Ji(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Cr.vt.It(o,s)}return r.zt()}dn(e){let t=new to;return Cr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new to;return Cr.vt.It(so(this.databaseId,t),r.Yt(function(o){let s=Ji(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new to);let o=0;for(let s of Ji(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&Xc(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);Cr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new to;c.seed(a.zt()),Cr.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof ge&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Vc(e),i=xs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new Kc(p.sequenceNumber,new In(ho(p.readTime),new $(Qn(p.documentKey)),p.largestBatchId)):Kc.empty(),y=h.fields.map(([T,M])=>new Ls(tt.fromServerFormat(T),M));return new Us(h.indexId,h.collectionGroup,y,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ae(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Vc(e),o=xs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(qb(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return As(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return As(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=As(e),o=new Re(ii);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new no(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Re(ii),i=this.Vn(t,e);if(i==null)return r;let o=nv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Xc(s))for(let a of s.arrayValue.values||[])r=r.add(new no(t.indexId,e.key,this.dn(a),i))}else r=r.add(new no(t.indexId,e.key,uh,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let y=c.getIterator(),T=l.getIterator(),M=Ss(y),N=Ss(T);for(;M||N;){let B=!1,z=!1;if(M&&N){let F=h(M,N);F<0?z=!0:F>0&&(B=!0)}else M!=null?z=!0:B=!0;B?(p(N),N=Ss(T)):z?(m(M),M=Ss(y)):(M=Ss(y),N=Ss(T))}}(i,o,ii,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return xs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>ii(s,a)).filter((s,a,c)=>!a||ii(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ii(s,e),c=ii(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,uh,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,uh,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return ii(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Zb)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||G())).next(Zb)}};function Yb(n){return ht(n,"collectionParents")}function As(n){return ht(n,"indexEntries")}function Vc(n){return ht(n,"indexConfiguration")}function xs(n){return ht(n,"indexState")}function Zb(n){Q(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Q_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new In(e.readTime,e.documentKey,t)}var Jb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function wA(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{Q(a===1)}));let l=[];for(let h of t.mutations){let p=SS(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function Vh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw G();e=n.noDocument}return JSON.stringify(e).length}wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(41943040,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);var jh=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Q(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oi(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Os(e),s=oi(e);return s.add({}).next(a=>{Q(typeof a=="number");let c=new tu(a,t,r,i),l=function(y,T,M){let N=M.baseMutations.map(z=>su(y.ct,z)),B=M.mutations.map(z=>su(y.ct,z));return{userId:T,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:B}}(this.serializer,this.userId,c),h=[],p=new Re((m,y)=>ae(m.canonicalString(),y.canonicalString()));for(let m of i){let y=SS(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,I2))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return oi(e).get(t).next(r=>r?(Q(r.userId===this.userId),eo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return oi(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(Q(a.batchId>=r),o=eo(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return oi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return oi(e).U("userMutationsIndex",t).next(r=>r.map(i=>eo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=fh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Os(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=Qn(h);if(l===this.userId&&t.path.isEqual(m))return oi(e).get(p).next(y=>{if(!y)throw G();Q(y.userId===this.userId),o.push(eo(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(ae),i=[];return t.forEach(o=>{let s=fh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Os(e).J({range:a},(l,h,p)=>{let[m,y,T]=l,M=Qn(y);m===this.userId&&o.path.isEqual(M)?r=r.add(T):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=fh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Re(ae);return Os(e).J({range:s},(c,l,h)=>{let[p,m,y]=c,T=Qn(m);p===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(oi(e).get(o).next(s=>{if(s===null)throw G();Q(s.userId===this.userId),r.push(eo(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return wA(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Os(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Qn(o[1]);i.push(c)}else a.done()}).next(()=>{Q(i.length===0)})})}containsKey(e,t){return IA(e,this.userId,t)}Nn(e){return EA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function IA(n,e,t){let r=fh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Os(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function oi(n){return ht(n,"mutations")}function Os(n){return ht(n,"documentMutations")}function EA(n){return ht(n,"mutationQueues")}var Ks=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Uv=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Ks(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Z.fromTimestamp(new qe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ms(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Ms(e).J((s,a)=>{let c=$c(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ms(e).J((r,i)=>{let o=$c(i);t(o)})}qn(e){return Xb(e).get("targetGlobalKey").next(t=>(Q(t!==null),t))}Qn(e,t){return Xb(e).put("targetGlobalKey",t)}Kn(e,t){return Ms(e).put(yA(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=co(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ms(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=$c(a);mu(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=si(e);return t.forEach(s=>{let a=jt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=si(e);return S.forEach(t,o=>{let s=jt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=si(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=si(e),o=ce();return i.J({range:r,H:!0},(s,a,c)=>{let l=Qn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=jt(t.path),i=IDBKeyRange.bound([r],[IS(r)],!1,!0),o=0;return si(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Ms(e).get(t).next(r=>r?$c(r):null)}};function Ms(n){return ht(n,"targets")}function Xb(n){return ht(n,"targetGlobal")}function si(n){return ht(n,"targetDocuments")}function eS([n,e],[t,r]){let i=ae(n,t);return i===0?ae(e,r):i}var $v=class{constructor(e){this.Un=e,this.buffer=new Re(eS),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();eS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Hv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ii(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield wi(t)}yield this.Hn(3e5)}))}},qv=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(sn.oe);let r=new $v(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(Jb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jb):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Rs()<=Bn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function mj(n,e){return new qv(n,e)}var zv=class{constructor(e,t){this.db=e,this.garbageCollector=mj(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return lh(e,r)}removeReference(e,t,r){return lh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lh(e,t)}nr(e,t){return function(i,o){let s=!1;return EA(i).Y(a=>IA(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Z.min()),si(e).delete(function(p){return[0,jt(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lh(e,t)}tr(e,t){let r=si(e),i,o=sn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==sn.oe&&t(new $(Qn(i)),o),o=l,i=c):o=sn.oe}).next(()=>{o!==sn.oe&&t(new $(Qn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function lh(n,e){return si(n).put(function(r,i){return{targetId:0,path:jt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Bh=class{constructor(){this.changes=new nr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Gv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Zi(e).put(r)}removeEntry(e,t,r){return Zi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],kh(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=ut.newInvalidDocument(t);return Zi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(jc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:ut.newInvalidDocument(t)};return Zi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(jc(t))},(i,o)=>{r={document:this.ir(t,o),size:Vh(o)}}).next(()=>r)}getEntries(e,t){let r=Qt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Qt(),i=new Le($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Vh(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Re(rS);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(jc(i.first()),jc(i.last())),s=i.getIterator(),a=s.getNext();return Zi(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&rS(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(jc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),kh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zi(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Qt();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(vu(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Qt(),s=nS(t,r),a=nS(t,In.max());return Zi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Wv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tS(e).get("remoteDocumentGlobalKey").next(t=>(Q(!!t),t))}rr(e,t){return tS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=fj(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Z.min())))return r}return ut.newInvalidDocument(e)}};function DA(n){return new Gv(n)}var Wv=class extends Bh{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new nr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Re((o,s)=>ae(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=$b(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Vh(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=$b(this.cr.serializer,s.convertToNoDocument(Z.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function tS(n){return ht(n,"remoteDocumentGlobal")}function Zi(n){return ht(n,"remoteDocumentsV14")}function jc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nS(n,e){let t=e.documentKey.path.toArray();return[n,kh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ae(t[o],r[o]),i)return i;return i=ae(t.length,r.length),i||(i=ae(t[t.length-2],r[r.length-2]),i||ae(t[t.length-1],r[r.length-1]))}var Kv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Uh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&zc(r.mutation,i,an.empty(),qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ce()){let i=Yn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Uc();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Yn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Qt(),s=qc(),a=function(){return qc()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Ln)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),zc(h.mutation,l,h.mutation.getFieldMask(),qe.now())):s.set(l.key,an.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Kv(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=qc(),i=new Le((s,a)=>s-a),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||an.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ce()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=WS();h.forEach(m=>{if(!o.has(m)){let y=eA(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ew(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Yn()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ce())).next(h=>({batchId:a,changes:GS(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=Uc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Uc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new Fn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ut.newInvalidDocument(h)))});let a=Uc();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&zc(h.mutation,l,an.empty(),qe.now()),vu(t,l)&&(a=a.insert(c,l))}),a})}};var Qv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:nt(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:iw(i.bundledQuery),readTime:nt(i.readTime)}}(t)),S.resolve()}};var Yv=class{constructor(){this.overlays=new Le($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Yn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Yn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Le((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Yn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Yn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new nu(t,r));let o=this.Ir.get(t);o===void 0&&(o=ce(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Zv=class{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var cu=class{constructor(){this.Tr=new Re(at.Er),this.dr=new Re(at.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new at(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new at(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new _e([])),r=new at(t,e),i=new at(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new _e([])),r=new at(t,e),i=new at(t,e+1),o=ce();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new at(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},at=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||ae(e.wr,t.wr)}static Ar(e,t){return ae(e.wr,t.wr)||$.comparator(e.key,t.key)}};var Jv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Re(at.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new tu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new at(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new at(t,0),i=new at(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(ae);return t.forEach(i=>{let o=new at(i,0),s=new at(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new at(new $(o),0),a=new Re(ae);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Q(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new at(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new at(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Xv=class{constructor(e){this.Mr=e,this.docs=function(){return new Le($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(t))}getEntries(e,t){let r=Qt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ut.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Qt(),s=t.path,a=new $(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Q_(DS(h),r)<=0||(i.has(h.key)||vu(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){G()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new e_(this)}getSize(e){return S.resolve(this.size)}},e_=class extends Bh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var t_=class{constructor(e){this.persistence=e,this.Nr=new nr(t=>co(t),mu),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cu,this.targetCount=0,this.kr=Ks.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ks(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var $h=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new sn(0),this.Kr=!1,this.Kr=!0,this.$r=new Zv,this.referenceDelegate=e(this),this.Ur=new t_(this),this.indexManager=new jv,this.remoteDocumentCache=function(i){return new Xv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ph(t),this.Gr=new Qv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Yv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Jv(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new n_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},n_=class extends Ih{constructor(e){super(),this.currentSequenceNumber=e}},Hh=class n{constructor(e){this.persistence=e,this.Jr=new cu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var r_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Eh("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_b,{unique:!0}),c.createObjectStore("documentMutations")}(e),iS(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),iS(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_b,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:P2});l.createIndex("collectionPathOverlayIndex",k2,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",O2,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:E2});l.createIndex("documentKeyIndex",D2),l.createIndex("collectionGroupIndex",C2)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:x2}).createIndex("sequenceNumberIndex",M2,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:R2}).createIndex("documentKeyIndex",N2,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Vh(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{Q(c.userId===o.userId);let l=eo(this.serializer,c);return wA(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new _e(s),l=function(p){return[0,jt(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:jt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:A2});let r=t.store("collectionParents"),i=new au,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:jt(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new _e(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=Qn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=$c(i),s=yA(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new $(_e.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):G()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=DA(this.serializer),o=new $h(Hh.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ce();eo(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new ct(l),p=Oh.lt(this.serializer,h),m=o.getIndexManager(h),y=jh.lt(h,this.serializer,m,o.referenceDelegate);return new Uh(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Yc(t,sn.oe),c).next()})})}};function iS(n){n.createObjectStore("targetDocuments",{keyPath:b2}).createIndex("documentTargetsIndex",S2,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",T2,{unique:!0}),n.createObjectStore("targetGlobal")}var zy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",i_=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zv(this,i),this.Ai=t+"main",this.serializer=new Ph(c),this.Ri=new di(this.Ai,this.hi,new r_(this.serializer)),this.$r=new Nv,this.Ur=new Uv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=DA(this.serializer),this.Gr=new Rv,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&et("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,zy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new sn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ii(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Bc(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return dh(e).delete(this.clientId)}Fi(){return R(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ht(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):Bc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,zy);return!1}}return!(!this.networkEnabled||!this.inForeground)||dh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Yc(e,sn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>dh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return jh.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Bv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Oh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?V2:c===16?L2:c===15?Z_:c===14?MS:c===13?xS:c===12?F2:c===11?AS:void G()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Yc(a,this.Qr?this.Qr.next():sn.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,CS);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Bc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,zy)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bc(e).put("owner",t)}static D(){return di.D()}bi(e){let t=Bc(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(et(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;op()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return et("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){et("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Bc(n){return ht(n,"owner")}function dh(n){return ht(n,"clientMetadata")}function sw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var o_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ce(),i=ce();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var s_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var qh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return op()?8:TS(Na())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new s_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Rs()<=Bn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Ns(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Rs()<=Bn.DEBUG&&k("QueryEngine","Query:",Ns(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Rs()<=Bn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Ns(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bt(t))):S.resolve())}Yi(e,t){if(Rb(t))return S.resolve(null);let r=Bt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=xh(t,null,"F"),r=Bt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ce(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,xh(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return Rb(t)||i.isEqual(Z.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Rs()<=Bn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ns(t)),this.rs(e,s,t,ES(i,-1)).next(a=>a))})}ts(e,t){let r=new Re(qS(e));return t.forEach((i,o)=>{vu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Rs()<=Bn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Ns(t)),this.Ji.getDocumentsMatchingQuery(e,t,In.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var a_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Le(ae),this._s=new nr(o=>co(o),mu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function CA(n,e,t,r){return new a_(n,e,t,r)}function TA(n,e){return R(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ce();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function yj(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(T=>{y=y.next(()=>h.getEntry(c,T)).next(M=>{let N=l.docVersions.get(T);Q(N!==null),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function bA(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function vj(n,e){let t=U(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(rt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(M,N,B){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let c=Qt(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(SA(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(Z.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function SA(n,e,t){let r=ce(),i=ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Qt();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Z.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function _j(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qs(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Ws(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Ys(n,e,t){return R(this,null,function*(){let r=U(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ii(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function zh(n,e,t){let r=U(n),i=Z.min(),o=ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=U(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Bt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Z.min(),t?o:ce())).next(a=>(MA(r,HS(e),a),{documents:a,Ts:o})))}function AA(n,e){let t=U(n),r=U(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function xA(n,e){let t=U(n),r=t.us.get(e)||Z.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,ES(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(MA(t,e,i),i))}function MA(n,e,t){let r=n.us.get(e)||Z.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function wj(n,e,t,r){return R(this,null,function*(){let i=U(n),o=ce(),s=Qt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield Qs(i,function(h){return Bt(ia(_e.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>SA(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function Ij(r,i){return R(this,arguments,function*(n,e,t=ce()){let o=yield Qs(n,Bt(iw(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=nt(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(rt.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function oS(n,e){return`firestore_clients_${n}_${e}`}function sS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Gy(n,e){return`firestore_targets_${n}_${e}`}var Gh=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(et("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Gc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(et("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Wh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=tw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=bS(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(et("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},c_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(et("SharedClientState",`Failed to parse online state: ${e}`),null)}},uu=class{constructor(){this.activeTargetIds=tw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Wc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Le(ae),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=oS(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new uu),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return R(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(oS(this.persistenceKey,r));if(i){let o=Wh.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Gy(this.persistenceKey,e));if(i){let o=Gc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Gy(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void et("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>R(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=sn.oe;if(o!=null)try{let a=JSON.parse(o);Q(typeof a=="number"),s=a}catch(a){et("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==sn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Gh(this.currentUser,e,t,r),o=sS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=sS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Gy(this.persistenceKey,e),o=new Gc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Wh.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Gh.Rs(new ct(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Gc.Rs(i,t)}Ls(e){return c_.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return R(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=tw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Kh=class{constructor(){this.so=new uu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new uu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var u_=class{_o(e){}shutdown(){}};var Qh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var hh=null;function Wy(){return hh===null?hh=function(){return 268435456+Math.round(2147483648*Math.random())}():hh++,"0x"+hh.toString(16)}var Ej={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var l_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var St="WebChannelConnection",d_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Wy(),c=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw On("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ra}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=Ej[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Wy();return new Promise((s,a)=>{let c=new jy;c.setWithCredentials(!0),c.listenOnce(By.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Fc.NO_ERROR:let h=c.getResponseJson();k(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Fc.TIMEOUT:k(St,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case Fc.HTTP_ERROR:let p=c.getStatus();if(k(St,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let T=function(N){let B=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(B)>=0?B:x.UNKNOWN}(y.status);a(new P(T,y.message))}else a(new P(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{k(St,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(St,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Wy(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Hy(),a=$y(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");k(St,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,y=!1,T=new l_({Io:N=>{y?k(St,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(St,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(St,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),M=(N,B,z)=>{N.listen(B,F=>{try{z(F)}catch(X){setTimeout(()=>{throw X},0)}})};return M(p,bs.EventType.OPEN,()=>{y||(k(St,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),M(p,bs.EventType.CLOSE,()=>{y||(y=!0,k(St,`RPC '${e}' stream ${i} transport closed`),T.So())}),M(p,bs.EventType.ERROR,N=>{y||(y=!0,On(St,`RPC '${e}' stream ${i} transport errored:`,N),T.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,bs.EventType.MESSAGE,N=>{var B;if(!y){let z=N.data[0];Q(!!z);let F=z,X=F.error||((B=F[0])===null||B===void 0?void 0:B.error);if(X){k(St,`RPC '${e}' stream ${i} received error:`,X);let ne=X.status,ee=function(w){let E=st[w];if(E!==void 0)return rA(E)}(ne),I=X.message;ee===void 0&&(ee=x.INTERNAL,I="Unknown error status: "+ne+" with message "+X.message),y=!0,T.So(new P(ee,I)),p.close()}else k(St,`RPC '${e}' stream ${i} received:`,z),T.bo(z)}}),M(a,Uy.STAT_EVENT,N=>{N.stat===ch.PROXY?k(St,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===ch.NOPROXY&&k(St,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}};function RA(){return typeof window<"u"?window:null}function yh(){return typeof document<"u"?document:null}function _u(n){return new bv(n,!0)}var lu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Yh=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new lu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return R(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return R(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return R(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(et(t.toString()),et("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>R(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},h_=class extends Yh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=sj(this.serializer,e),r=function(o){if(!("targetChange"in o))return Z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?nt(s.readTime):Z.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=xv(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Sh(c)?{documents:dA(o,c)}:{query:hA(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=oA(o,s.resumeToken);let l=Sv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Z.min())>0){a.readTime=Gs(o,s.snapshotVersion.toTimestamp());let l=Sv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=cj(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=xv(this.serializer),t.removeTarget=e,this.a_(t)}},f_=class extends Yh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Q(!!e.streamToken),this.lastStreamToken=e.streamToken,Q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=aj(e.writeResults,e.commitTime),r=nt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=xv(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>su(this.serializer,r))};this.a_(t)}};var p_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Av(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Av(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},g_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(et(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var m_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>R(this,null,function*(){Ei(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(c){return R(this,null,function*(){let l=U(c);l.L_.add(4),yield oa(l),l.q_.set("Unknown"),l.L_.delete(4),yield wu(l)})}(this))}))}),this.q_=new g_(r,i)}};function wu(n){return R(this,null,function*(){if(Ei(n))for(let e of n.B_)yield e(!0)})}function oa(n){return R(this,null,function*(){for(let e of n.B_)yield e(!1)})}function vf(n,e){let t=U(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),uw(t)?cw(t):aa(t).r_()&&aw(t,e))}function Zs(n,e){let t=U(n),r=aa(t);t.N_.delete(e),r.r_()&&NA(t,e),t.N_.size===0&&(r.r_()?r.o_():Ei(t)&&t.q_.set("Unknown"))}function aw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}aa(n).A_(e)}function NA(n,e){n.Q_.xe(e),aa(n).R_(e)}function cw(n){n.Q_=new Tv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),aa(n).start(),n.q_.v_()}function uw(n){return Ei(n)&&!aa(n).n_()&&n.N_.size>0}function Ei(n){return U(n).L_.size===0}function PA(n){n.Q_=void 0}function Dj(n){return R(this,null,function*(){n.q_.set("Online")})}function Cj(n){return R(this,null,function*(){n.N_.forEach((e,t)=>{aw(n,e)})})}function Tj(n,e){return R(this,null,function*(){PA(n),uw(n)?(n.q_.M_(e),cw(n)):n.q_.set("Unknown")})}function bj(n,e,t){return R(this,null,function*(){if(n.q_.set("Online"),e instanceof Rh&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zh(n,r)}else if(e instanceof js?n.Q_.Ke(e):e instanceof Mh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Z.min()))try{let r=yield bA(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),NA(o,c);let p=new Ws(h.target,c,l,h.sequenceNumber);aw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Zh(n,r)}})}function Zh(n,e,t){return R(this,null,function*(){if(!Ii(e))throw e;n.L_.add(1),yield oa(n),n.q_.set("Offline"),t||(t=()=>bA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield wu(n)}))})}function kA(n,e){return e().catch(t=>Zh(n,t,e))}function sa(n){return R(this,null,function*(){let e=U(n),t=_i(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Sj(e);)try{let i=yield _j(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Aj(e,i)}catch(i){yield Zh(e,i)}OA(e)&&FA(e)})}function Sj(n){return Ei(n)&&n.O_.length<10}function Aj(n,e){n.O_.push(e);let t=_i(n);t.r_()&&t.V_&&t.m_(e.mutations)}function OA(n){return Ei(n)&&!_i(n).n_()&&n.O_.length>0}function FA(n){_i(n).start()}function xj(n){return R(this,null,function*(){_i(n).p_()})}function Mj(n){return R(this,null,function*(){let e=_i(n);for(let t of n.O_)e.m_(t.mutations)})}function Rj(n,e,t){return R(this,null,function*(){let r=n.O_.shift(),i=Ev.from(r,e,t);yield kA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield sa(n)})}function Nj(n,e){return R(this,null,function*(){e&&_i(n).V_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return nA(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();_i(r).s_(),yield kA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield sa(r)}})}(n,e)),OA(n)&&FA(n)})}function aS(n,e){return R(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Ei(t);t.L_.add(3),yield oa(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield wu(t)})}function y_(n,e){return R(this,null,function*(){let t=U(n);e?(t.L_.delete(2),yield wu(t)):e||(t.L_.add(2),yield oa(t),t.q_.set("Unknown"))})}function aa(n){return n.K_||(n.K_=function(t,r,i){let o=U(t);return o.w_(),new h_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Dj.bind(null,n),Ro:Cj.bind(null,n),mo:Tj.bind(null,n),d_:bj.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.K_.s_(),uw(n)?cw(n):n.q_.set("Unknown")):(yield n.K_.stop(),PA(n))}))),n.K_}function _i(n){return n.U_||(n.U_=function(t,r,i){let o=U(t);return o.w_(),new f_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:xj.bind(null,n),mo:Nj.bind(null,n),f_:Mj.bind(null,n),g_:Rj.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.U_.s_(),yield sa(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var v_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new dt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ca(n,e){if(et("AsyncQueue",`${e}: ${n}`),Ii(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var Jh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=Uc(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Xh=class{constructor(){this.W_=new Le($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Js=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Jh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var __=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},w_=class{constructor(){this.queries=cS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=cS(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function cS(){return new nr(n=>$S(n),yu)}function lw(n,e){return R(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new __,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ca(s,`Initialization of query '${Ns(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&hw(t)})}function dw(n,e){return R(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Pj(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&hw(t)}function kj(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function hw(n){n.Y_.forEach(e=>{e.next()})}var I_,uS;(uS=I_||(I_={})).ea="default",uS.Cache="cache";var du=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Js(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Js.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==I_.Cache}};var E_=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var ef=class{constructor(e){this.serializer=e}Es(e){return Jn(this.serializer,e)}ds(e){return e.metadata.exists?lA(this.serializer,e.document,!1):ut.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return nt(e)}},D_=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=LA(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=_e.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new ef(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ce()).add(o);t.set(s,a)}}return t}complete(){return R(this,null,function*(){let e=yield wj(this.localStore,new ef(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield Ij(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function LA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var tf=class{constructor(e){this.key=e}},nf=class{constructor(e){this.key=e}},rf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=qS(e),this.Ra=new Jh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Xh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=vu(this.query,p)?p:null,T=!!m&&this.mutatedKeys.has(m.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?T!==M&&(r.track({type:3,doc:y}),N=!0):this.ga(m,y)||(r.track({type:2,doc:y}),N=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(y?(s=s.add(y),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,T){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return M(y)-M(T)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new Js(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Xh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new nf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new tf(r))}),t}ba(e){this.Ta=e.Ts,this.da=ce();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Js.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},C_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},T_=class{constructor(e){this.key=e,this.va=!1}},b_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new nr(a=>$S(a),yu),this.Ma=new Map,this.xa=new Set,this.Oa=new Le($.comparator),this.Na=new Map,this.La=new cu,this.Ba={},this.ka=new Map,this.qa=Ks.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Oj(n,e,t=!0){return R(this,null,function*(){let r=_f(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield VA(r,e,t,!0),i})}function Fj(n,e){return R(this,null,function*(){let t=_f(n);yield VA(t,e,!0,!1)})}function VA(n,e,t,r){return R(this,null,function*(){let i=yield Qs(n.localStore,Bt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield fw(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&vf(n.remoteStore,i),a})}function fw(n,e,t,r,i){return R(this,null,function*(){n.Ka=(p,m,y)=>function(M,N,B,z){return R(this,null,function*(){let F=N.view.ma(B);F.ns&&(F=yield zh(M.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,F)));let X=z&&z.targetChanges.get(N.targetId),ne=z&&z.targetMismatches.get(N.targetId)!=null,ee=N.view.applyChanges(F,M.isPrimaryClient,X,ne);return S_(M,N.targetId,ee.wa),ee.snapshot})}(n,p,m,y);let o=yield zh(n.localStore,e,!0),s=new rf(e,o.Ts),a=s.ma(o.documents),c=iu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);S_(n,t,l.wa);let h=new C_(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function Lj(n,e,t){return R(this,null,function*(){let r=U(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!yu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ys(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Zs(r.remoteStore,i.targetId),Xs(r,i.targetId)}).catch(wi))):(Xs(r,i.targetId),yield Ys(r.localStore,i.targetId,!0))})}function Vj(n,e){return R(this,null,function*(){let t=U(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Zs(t.remoteStore,r.targetId))})}function jj(n,e,t){return R(this,null,function*(){let r=yw(n);try{let i=yield function(s,a){let c=U(s),l=qe.now(),h=a.reduce((y,T)=>y.add(T.key),ce()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Qt(),M=ce();return c.cs.getEntries(y,h).next(N=>{T=N,T.forEach((B,z)=>{z.isValidDocument()||(M=M.add(B))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,T)).next(N=>{p=N;let B=[];for(let z of a){let F=X2(z,p.get(z.key).overlayedDocument);F!=null&&B.push(new Ln(z.key,F,OS(F.value.mapValue),Ze.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,B,a)}).next(N=>{m=N;let B=N.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(y,N.batchId,B)})}).then(()=>({batchId:m.batchId,changes:GS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Le(ae)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Rr(r,i.changes),yield sa(r.remoteStore)}catch(i){let o=ca(i,"Failed to persist write");t.reject(o)}})}function jA(n,e){return R(this,null,function*(){let t=U(n);try{let r=yield vj(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Q(s.va):i.removedDocuments.size>0&&(Q(s.va),s.va=!1))}),yield Rr(t,r,e)}catch(r){yield wi(r)}})}function lS(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=U(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&hw(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Bj(n,e,t){return R(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Le($.comparator);s=s.insert(o,ut.newNoDocument(o,Z.min()));let a=ce().add(o),c=new ru(Z.min(),new Map,new Le(ae),s,a);yield jA(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),mw(r)}else yield Ys(r.localStore,e,!1).then(()=>Xs(r,e,t)).catch(wi)})}function Uj(n,e){return R(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield yj(t.localStore,e);gw(t,r,null),pw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Rr(t,i)}catch(i){yield wi(i)}})}function $j(n,e,t){return R(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let c=U(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(Q(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);gw(r,e,t),pw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Rr(r,i)}catch(i){yield wi(i)}})}function Hj(n,e){return R(this,null,function*(){let t=U(n);Ei(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=ca(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function pw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function gw(n,e,t){let r=U(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Xs(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||BA(n,r)})}function BA(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Zs(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),mw(n))}function S_(n,e,t){for(let r of t)r instanceof tf?(n.La.addReference(r.key,e),qj(n,r)):r instanceof nf?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||BA(n,r.key)):G()}function qj(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),mw(n))}function mw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(_e.fromString(e)),r=n.qa.next();n.Na.set(r,new T_(t)),n.Oa=n.Oa.insert(t,r),vf(n.remoteStore,new Ws(Bt(ia(t.path)),r,"TargetPurposeLimboResolution",sn.oe))}}function Rr(n,e,t){return R(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=o_.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return R(this,null,function*(){let h=U(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ii(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),T=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(m,M)}}})}(r.localStore,o))})}function zj(n,e){return R(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield TA(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Rr(t,r.hs)}})}function Gj(n,e){let t=U(n),r=t.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function Wj(n,e){return R(this,null,function*(){let t=U(n),r=yield zh(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&S_(t,e.targetId,i.wa),i})}function Kj(n,e){return R(this,null,function*(){let t=U(n);return xA(t.localStore,e).then(r=>Rr(t,r))})}function Qj(n,e,t,r){return R(this,null,function*(){let i=U(n),o=yield function(a,c){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield sa(i.remoteStore):t==="acknowledged"||t==="rejected"?(gw(i,e,r||null),pw(i,e),function(a,c){U(U(a).mutationQueue).On(c)}(i.localStore,e)):G(),yield Rr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function Yj(n,e){return R(this,null,function*(){let t=U(n);if(_f(t),yw(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield dS(t,r.toArray());t.Qa=!0,yield y_(t.remoteStore,!0);for(let o of i)vf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Xs(t,s),Ys(t.localStore,s,!0))),Zs(t.remoteStore,s)}),yield i,yield dS(t,r),function(s){let a=U(s);a.Na.forEach((c,l)=>{Zs(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Le($.comparator)}(t),t.Qa=!1,yield y_(t.remoteStore,!1)}})}function dS(n,e,t){return R(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield Qs(r.localStore,Bt(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield Wj(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield AA(r.localStore,s);a=yield Qs(r.localStore,l),yield fw(r,UA(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function UA(n){return US(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Zj(n){return function(t){return U(U(t).persistence).Qi()}(U(n).localStore)}function Jj(n,e,t,r){return R(this,null,function*(){let i=U(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield xA(i.localStore,HS(o[0])),a=ru.createSynthesizedRemoteEventForCurrentChange(e,t==="current",rt.EMPTY_BYTE_STRING);yield Rr(i,s,a);break}case"rejected":yield Ys(i.localStore,e,!0),Xs(i,e,r);break;default:G()}})}function Xj(n,e,t){return R(this,null,function*(){let r=_f(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield AA(r.localStore,i),s=yield Qs(r.localStore,o);yield fw(r,UA(o),s.targetId,!1,s.resumeToken),vf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Ys(r.localStore,i,!1).then(()=>{Zs(r.remoteStore,i),Xs(r,i)}).catch(wi))}})}function _f(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bj.bind(null,e),e.Ca.d_=Pj.bind(null,e.eventManager),e.Ca.$a=kj.bind(null,e.eventManager),e}function yw(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$j.bind(null,e),e}function eB(n,e,t){let r=U(n);(function(o,s,a){return R(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(y,T){let M=U(y),N=nt(T.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",B=>M.Gr.getBundleMetadata(B,T.id)).then(B=>!!B&&B.createTime.compareTo(N)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(LA(c));let l=new D_(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield Rr(o,p.Ia,void 0),yield function(y,T){let M=U(y);return M.persistence.runTransaction("Save bundle","readwrite",N=>M.Gr.saveBundleMetadata(N,T))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return On("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var A_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return R(this,null,function*(){this.serializer=_u(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return CA(this.persistence,new qh,t.initialUser,this.serializer)}Ga(t){return new $h(Hh.Zr,this.serializer)}Wa(t){return new Kh}terminate(){return R(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var of=class n extends A_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield rp(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield yw(this.Ja.syncEngine),yield sa(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return CA(this.persistence,new qh,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Hv(r,e.asyncQueue,t)}Ha(e,t){let r=new sv(t,this.persistence);return new ov(e.asyncQueue,r)}Ga(e){let t=sw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new i_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,RA(),yh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Kh}},x_=class n extends of{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return R(this,null,function*(){yield rp(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Wc&&(this.sharedClientState.syncEngine={no:Qj.bind(null,t),ro:Jj.bind(null,t),io:Xj.bind(null,t),Qi:Zj.bind(null,t),eo:Kj.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>R(this,null,function*(){yield Yj(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=RA();if(!Wc.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=sw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Wc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},vw=(()=>{class n{initialize(t,r){return R(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zj.bind(null,this.syncEngine),yield y_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new w_}()}createDatastore(t){let r=_u(t.databaseInfo.databaseId),i=function(s){return new d_(s)}(t.databaseInfo);return function(s,a,c,l){return new p_(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new m_(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>lS(this.syncEngine,r,0),function(){return Qh.D()?new Qh:new u_}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new b_(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){var t,r;yield function(o){return R(this,null,function*(){let s=U(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield oa(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function hS(n,e=10240){let t=0;return{read(){return R(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return R(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ea=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):et("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var M_=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new dt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return R(this,null,function*(){return this.metadata.promise})}Ua(){return R(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return R(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new E_(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return R(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return R(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return R(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var R_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return R(this,null,function*(){let s=U(i),a={documents:o.map(p=>ou(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,_e.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=oj(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());Q(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new eu(i,this.precondition(i)))}),yield function(r,i){return R(this,null,function*(){let o=U(r),s={writes:i.map(a=>su(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,_e.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw G();t=Z.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Z.min())?Ze.exists(!1):Ze.updateTime(t):Ze.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Z.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ze.updateTime(t)}return Ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var N_=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new lu(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>R(this,null,function*(){let e=new R_(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!gu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!nA(t)}return!1}};var P_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ct.UNAUTHENTICATED,this.clientId=_h.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new dt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ca(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ky(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield TA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function fS(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield _w(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>aS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>aS(e.remoteStore,i)),n._onlineComponents=e})}function _w(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ky(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;On("Error using user provided cache. Falling back to memory cache: "+t),yield Ky(n,new A_)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Ky(n,new A_);return n._offlineComponents})}function wf(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield fS(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield fS(n,new vw))),n._onlineComponents})}function $A(n){return _w(n).then(e=>e.persistence)}function ww(n){return _w(n).then(e=>e.localStore)}function HA(n){return wf(n).then(e=>e.remoteStore)}function Iw(n){return wf(n).then(e=>e.syncEngine)}function tB(n){return wf(n).then(e=>e.datastore)}function ta(n){return R(this,null,function*(){let e=yield wf(n),t=e.eventManager;return t.onListen=Oj.bind(null,e.syncEngine),t.onUnlisten=Lj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Fj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Vj.bind(null,e.syncEngine),t})}function nB(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield $A(n),t=yield HA(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.L_.delete(0),wu(o)}(t)}))}function rB(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield $A(n),t=yield HA(n);return e.setNetworkEnabled(!1),function(i){return R(this,null,function*(){let o=U(i);o.L_.add(0),yield oa(o),o.q_.set("Offline")})}(t)}))}function iB(n,e){let t=new dt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=ca(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield ww(n),e,t)})),t.promise}function qA(n,e,t={}){let r=new dt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new ea({next:m=>{h.Za(),s.enqueueAndForget(()=>dw(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new du(ia(a.path),h,{includeMetadataChanges:!0,_a:!0});return lw(o,p)}(yield ta(n),n.asyncQueue,e,t,r)})),r.promise}function oB(n,e){let t=new dt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield zh(i,o,!0),c=new rf(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=ca(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield ww(n),e,t)})),t.promise}function zA(n,e,t={}){let r=new dt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new ea({next:m=>{h.Za(),s.enqueueAndForget(()=>dw(o,p)),m.fromCache&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new du(a,h,{includeMetadataChanges:!0,_a:!0});return lw(o,p)}(yield ta(n),n.asyncQueue,e,t,r)})),r.promise}function sB(n,e){let t=new ea(e);return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){U(i).Y_.add(o),o.next()}(yield ta(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){U(i).Y_.delete(o)}(yield ta(n),t)}))}}function aB(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?iA().encode(s):s,function(h,p){return new M_(h,p)}(function(h,p){if(h instanceof Uint8Array)return hS(h,p);if(h instanceof ArrayBuffer)return hS(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,_u(e));n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){eB(yield Iw(n),i,r)}))}function cB(n,e){return n.asyncQueue.enqueue(()=>R(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield ww(n),e)}))}function GA(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var pS=new Map;function Ew(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Dw(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gS(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mS(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function If(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G()}function we(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=If(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function WA(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var sf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Dw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},fo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Qy;switch(r.type){case"firstParty":return new Xy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=pS.get(t);r&&(k("ComponentProvider","Removing Datastore"),pS.delete(t),r.terminate())}(this),Promise.resolve()}};function KA(n,e,t,r={}){var i;let o=(n=we(n,fo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&On("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=ct.MOCK_USER;else{a=YI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ct(l)}n._authCredentials=new Yy(new vh(a,c))}}var vt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Oe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Xn=class n extends vt{constructor(e,t,r){super(e,t,ia(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Cw(n,e,...t){if(n=$e(n),Ew("collection","path",e),n instanceof fo){let r=_e.fromString(e,...t);return mS(r),new Xn(n,null,r)}{if(!(n instanceof Oe||n instanceof Xn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_e.fromString(e,...t));return mS(r),new Xn(n.firestore,null,r)}}function QA(n,e){if(n=we(n,fo),Ew("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vt(n,null,function(r){return new Fn(_e.emptyPath(),r)}(e))}function Iu(n,e,...t){if(n=$e(n),arguments.length===1&&(e=_h.newId()),Ew("doc","path",e),n instanceof fo){let r=_e.fromString(e,...t);return gS(r),new Oe(n,null,new $(r))}{if(!(n instanceof Oe||n instanceof Xn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_e.fromString(e,...t));return gS(r),new Oe(n.firestore,n instanceof Xn?n.converter:null,new $(r))}}function Tw(n,e){return n=$e(n),e=$e(e),(n instanceof Oe||n instanceof Xn)&&(e instanceof Oe||e instanceof Xn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bw(n,e){return n=$e(n),e=$e(e),n instanceof vt&&e instanceof vt&&n.firestore===e.firestore&&yu(n._query,e._query)&&n.converter===e.converter}var af=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new lu(this,"async_queue_retry"),this.Vu=()=>{let r=yh();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=yh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=yh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new dt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return R(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ii(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw et("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=v_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&G()}verifyOperationInProgress(){}wu(){return R(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function k_(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var O_=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new dt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var YA=-1,ze=class extends fo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new af,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new af(e),this._firestoreClient=void 0,yield e}})}};function _t(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ZA(n),n._firestoreClient}function ZA(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new av(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,GA(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new P_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function JA(n,e){On("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return ex(n,vw.provider,{build:r=>new of(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function XA(n){return R(this,null,function*(){On("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();ex(n,vw.provider,{build:t=>new x_(t,e.cacheSizeBytes)})})}function ex(n,e,t){if((n=we(n,ze))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},ZA(n)}function tx(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new dt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{yield function(r){return R(this,null,function*(){if(!di.D())return Promise.resolve();let i=r+"main";yield di.delete(i)})}(sw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function nx(n){return function(t){let r=new dt;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Hj(yield Iw(t),r)})),r.promise}(_t(n=we(n,ze)))}function rx(n){return nB(_t(n=we(n,ze)))}function ix(n){return rB(_t(n=we(n,ze)))}function ox(n,e){let t=_t(n=we(n,ze)),r=new O_;return aB(t,n._databaseId,e,r),r}function sx(n,e){return cB(_t(n=we(n,ze)),e).then(t=>t?new vt(n,null,t.query):null)}var rr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(rt.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Vn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var xr=class{constructor(e){this._methodName=e}};var po=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var hu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var uB=/^__.*__$/,F_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ln(e,this.data,this.fieldMask,t,this.fieldTransforms):new yi(e,this.data,t,this.fieldTransforms)}},cf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ln(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function ax(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var uf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return lf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ax(this.Cu)&&uB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},L_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_u(e)}Qu(e,t,r,i=!1){return new uf({Cu:e,methodName:t,qu:r,path:tt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function vo(n){let e=n._freezeSettings(),t=_u(n._databaseId);return new L_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ef(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);xw("Data must be an object, but it was:",s,r);let a=lx(r,s),c,l;if(o.merge)c=new an(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=$_(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);hx(h,m)||h.push(m)}c=new an(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new F_(new At(a),c,l)}var fu=class n extends xr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function cx(n,e,t){return new uf({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var V_=class n extends xr{_toFieldTransform(e){return new uo(e.path,new gi)}isEqual(e){return e instanceof n}},j_=class n extends xr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=cx(this,e,!0),r=this.Ku.map(o=>_o(o,t)),i=new Sr(r);return new uo(e.path,i)}isEqual(e){return e instanceof n&&sp(this.Ku,e.Ku)}},B_=class n extends xr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=cx(this,e,!0),r=this.Ku.map(o=>_o(o,t)),i=new Ar(r);return new uo(e.path,i)}isEqual(e){return e instanceof n&&sp(this.Ku,e.Ku)}},U_=class n extends xr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new mi(e.serializer,QS(e.serializer,this.$u));return new uo(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function Sw(n,e,t,r){let i=n.Qu(1,e,t);xw("Data must be an object, but it was:",i,r);let o=[],s=At.empty();yo(r,(c,l)=>{let h=Mw(e,c,t);l=$e(l);let p=i.Nu(h);if(l instanceof fu)o.push(h);else{let m=_o(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new an(o);return new cf(s,a,i.fieldTransforms)}function Aw(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[$_(e,r,t)],c=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push($_(e,o[m])),c.push(o[m+1]);let l=[],h=At.empty();for(let m=a.length-1;m>=0;--m)if(!hx(l,a[m])){let y=a[m],T=c[m];T=$e(T);let M=s.Nu(y);if(T instanceof fu)l.push(y);else{let N=_o(T,M);N!=null&&(l.push(y),h.set(y,N))}}let p=new an(l);return new cf(h,p,s.fieldTransforms)}function ux(n,e,t,r=!1){return _o(t,n.Qu(r?4:3,e))}function _o(n,e){if(dx(n=$e(n)))return xw("Unsupported field value:",e,n),lx(n,e);if(n instanceof xr)return function(r,i){if(!ax(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=_o(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=qe.fromDate(r);return{timestampValue:Gs(i.serializer,o)}}if(r instanceof qe){let o=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gs(i.serializer,o)}}if(r instanceof po)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rr)return{bytesValue:oA(i.serializer,r._byteString)};if(r instanceof Oe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:rw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof hu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return nw(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${If(r)}`)}(n,e)}function lx(n,e){let t={};return RS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(n,(r,i)=>{let o=_o(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function dx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qe||n instanceof po||n instanceof rr||n instanceof Oe||n instanceof xr||n instanceof hu)}function xw(n,e,t){if(!dx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=If(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function $_(n,e,t){if((e=$e(e))instanceof Vn)return e._internalPath;if(typeof e=="string")return Mw(n,e);throw lf("Field path arguments must be of type string or ",n,!1,void 0,t)}var lB=new RegExp("[~\\*/\\[\\]]");function Mw(n,e,t){if(e.search(lB)>=0)throw lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vn(...e.split("."))._internalPath}catch{throw lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new P(x.INVALID_ARGUMENT,a+n+c)}function hx(n,e){return n.some(t=>t.isEqual(e))}var go=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new H_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Df("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},H_=class extends go{data(){return super.data()}};function Df(n,e){return typeof e=="string"?Mw(n,e):e instanceof Vn?e._internalPath:e._delegate._internalPath}function fx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pu=class{},mo=class extends pu{};function Nr(n,e,...t){let r=[];e instanceof pu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof q_).length,a=o.filter(c=>c instanceof df).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var df=class n extends mo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Dx(e._query,t),new vt(e.firestore,e.converter,wv(e._query,t))}_parse(e){let t=vo(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){vS(p,h);let y=[];for(let T of p)y.push(yS(c,o,T));m={arrayValue:{values:y}}}else m=yS(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||vS(p,h),m=ux(a,s,p,h==="in"||h==="not-in");return ge.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function px(n,e,t){let r=e,i=Df("where",n);return df._create(i,r,t)}var q_=class n extends pu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Se.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)Dx(s,c),s=wv(s,c)}(e._query,t),new vt(e.firestore,e.converter,wv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var z_=class n extends mo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ao(o,s)}(e._query,this._field,this._direction);return new vt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Fn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function gx(n,e="asc"){let t=e,r=Df("orderBy",n);return z_._create(r,t)}var hf=class n extends mo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new vt(e.firestore,e.converter,xh(e._query,this._limit,this._limitType))}};function mx(n){return WA("limit",n),hf._create("limit",n,"F")}function yx(n){return WA("limitToLast",n),hf._create("limitToLast",n,"L")}var ff=class n extends mo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Ex(e,this.type,this._docOrFields,this._inclusive);return new vt(e.firestore,e.converter,function(i,o){return new Fn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function vx(...n){return ff._create("startAt",n,!0)}function _x(...n){return ff._create("startAfter",n,!1)}var pf=class n extends mo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Ex(e,this.type,this._docOrFields,this._inclusive);return new vt(e.firestore,e.converter,function(i,o){return new Fn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function wx(...n){return pf._create("endBefore",n,!1)}function Ix(...n){return pf._create("endAt",n,!0)}function Ex(n,e,t,r){if(t[0]=$e(t[0]),t[0]instanceof go)return function(o,s,a,c,l){if(!c)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Vs(o))if(p.field.isKeyField())h.push(so(s,c.key));else{let m=c.data.field(p.field);if(mf(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new tr(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=vo(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let T=0;T<h.length;T++){let M=h[T];if(m[T].field.isKeyField()){if(typeof M!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof M}`);if(!ew(s)&&M.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${M}' contains a slash.`);let N=s.path.child(_e.fromString(M));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let B=new $(N);y.push(so(a,B))}else{let N=ux(c,l,M);y.push(N)}}return new tr(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function yS(n,e,t){if(typeof(t=$e(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ew(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(_e.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return so(n,new $(r))}if(t instanceof Oe)return so(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${If(t)}.`)}function vS(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dx(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var na=class{convertValue(e,t="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return yo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ue(s.doubleValue));return new hu(o)}convertGeoPoint(e){return new po(Ue(e.latitude),Ue(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=J_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zc(e));default:return null}}convertTimestamp(e){let t=br(e);return new qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=_e.fromString(e);Q(mA(r));let i=new fi(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||et(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Cf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var G_=class extends na{constructor(e){super(),this.firestore=e}convertBytes(e){return new rr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,t)}};var Tr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},En=class extends go{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ui(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Df("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ui=class extends En{data(e={}){return super.data(e)}},jn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Tr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ui(this._firestore,this._userDataWriter,r.key,r,new Tr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ui(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Tr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ui(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Tr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:dB(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function dB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}function Rw(n,e){return n instanceof En&&e instanceof En?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof jn&&e instanceof jn&&n._firestore===e._firestore&&bw(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Cx(n){n=we(n,Oe);let e=we(n.firestore,ze);return qA(_t(e),n._key).then(t=>Ow(e,n,t))}var Mr=class extends na{constructor(e){super(),this.firestore=e}convertBytes(e){return new rr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,t)}};function Tx(n){n=we(n,Oe);let e=we(n.firestore,ze),t=_t(e),r=new Mr(e);return iB(t,n._key).then(i=>new En(e,r,n._key,i,new Tr(i!==null&&i.hasLocalMutations,!0),n.converter))}function bx(n){n=we(n,Oe);let e=we(n.firestore,ze);return qA(_t(e),n._key,{source:"server"}).then(t=>Ow(e,n,t))}function Sx(n){n=we(n,vt);let e=we(n.firestore,ze),t=_t(e),r=new Mr(e);return fx(n._query),zA(t,n._query).then(i=>new jn(e,r,n,i))}function Ax(n){n=we(n,vt);let e=we(n.firestore,ze),t=_t(e),r=new Mr(e);return oB(t,n._query).then(i=>new jn(e,r,n,i))}function xx(n){n=we(n,vt);let e=we(n.firestore,ze),t=_t(e),r=new Mr(e);return zA(t,n._query,{source:"server"}).then(i=>new jn(e,r,n,i))}function Nw(n,e,t){n=we(n,Oe);let r=we(n.firestore,ze),i=Cf(n.converter,e,t);return ua(r,[Ef(vo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ze.none())])}function Pw(n,e,t,...r){n=we(n,Oe);let i=we(n.firestore,ze),o=vo(i),s;return s=typeof(e=$e(e))=="string"||e instanceof Vn?Aw(o,"updateDoc",n._key,e,t,r):Sw(o,"updateDoc",n._key,e),ua(i,[s.toMutation(n._key,Ze.exists(!0))])}function Mx(n){return ua(we(n.firestore,ze),[new vi(n._key,Ze.none())])}function Rx(n,e){let t=we(n.firestore,ze),r=Iu(n),i=Cf(n.converter,e);return ua(t,[Ef(vo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ze.exists(!1))]).then(()=>r)}function kw(n,...e){var t,r,i;n=$e(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||k_(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(k_(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Oe)l=we(n.firestore,ze),h=ia(n._key.path),c={next:p=>{e[s]&&e[s](Ow(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=we(n,vt);l=we(p.firestore,ze),h=p._query;let m=new Mr(l);c={next:y=>{e[s]&&e[s](new jn(l,m,p,y))},error:e[s+1],complete:e[s+2]},fx(n._query)}return function(m,y,T,M){let N=new ea(M),B=new du(y,N,T);return m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return lw(yield ta(m),B)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return dw(yield ta(m),B)}))}}(_t(l),h,a,c)}function Nx(n,e){return sB(_t(n=we(n,ze)),k_(e)?e:{next:e})}function ua(n,e){return function(r,i){let o=new dt;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return jj(yield Iw(r),i,o)})),o.promise}(_t(n),e)}function Ow(n,e,t){let r=t.docs.get(e._key),i=new Mr(n);return new En(n,i,e._key,r,new Tr(t.hasPendingWrites,t.fromCache),e.converter)}var hB={maxAttempts:5};var gf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vo(e)}set(e,t,r){this._verifyNotCommitted();let i=ai(e,this._firestore),o=Cf(i.converter,t,r),s=Ef(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ze.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=ai(e,this._firestore),s;return s=typeof(t=$e(t))=="string"||t instanceof Vn?Aw(this._dataReader,"WriteBatch.update",o._key,t,r,i):Sw(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ze.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=ai(e,this._firestore);return this._mutations=this._mutations.concat(new vi(t._key,Ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ai(n,e){if((n=$e(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var W_=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=vo(t)}get(t){let r=ai(t,this._firestore),i=new G_(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return G();let s=o[0];if(s.isFoundDocument())return new go(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new go(this._firestore,i,r._key,null,r.converter);throw G()})}set(t,r,i){let o=ai(t,this._firestore),s=Cf(o.converter,r,i),a=Ef(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=ai(t,this._firestore),a;return a=typeof(r=$e(r))=="string"||r instanceof Vn?Aw(this._dataReader,"Transaction.update",s._key,r,i,o):Sw(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=ai(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=ai(e,this._firestore),r=new Mr(this._firestore);return super.get(e).then(i=>new En(this._firestore,r,t._key,i._document,new Tr(!1,!1),t.converter))}};function Px(n,e,t){n=we(n,ze);let r=Object.assign(Object.assign({},hB),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new dt;return o.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){let l=yield tB(o);new N_(o.asyncQueue,l,a,s,c).au()})),c.promise}(_t(n),i=>e(new W_(n,i)),r)}function kx(){return new fu("deleteField")}function Ox(){return new V_("serverTimestamp")}function Fx(...n){return new j_("arrayUnion",n)}function Lx(...n){return new B_("arrayRemove",n)}function Vx(n){return new U_("increment",n)}(function(e,t=!0){(function(i){ra=i})(XI),Pa(new Si("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ze(new Zy(r.getProvider("auth-internal")),new tv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fi(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Lr(mb,"4.7.3",e),Lr(mb,"4.7.3","esm2017")})();var fB="@firebase/firestore-compat",pB="0.3.38";function Uw(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function jx(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function Bx(){if(!NS())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Tf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return Bx(),new n(rr.fromBase64String(e))}static fromUint8Array(e){return jx(),new n(rr.fromUint8Array(e))}toBase64(){return Bx(),this._delegate.toBase64()}toUint8Array(){return jx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Fw(n){return gB(n,["next","error","complete"])}function gB(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var Lw=class{enableIndexedDbPersistence(e,t){return JA(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return XA(e._delegate)}clearIndexedDbPersistence(e){return tx(e._delegate)}},bf=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&On("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){KA(this._delegate,e,t,r)}enableNetwork(){return rx(this._delegate)}disableNetwork(){return ix(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Dw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return nx(this._delegate)}onSnapshotsInSync(e){return Nx(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ha(this,Cw(this._delegate,e))}catch(t){throw Ut(t,"collection()","Firestore.collection()")}}doc(e){try{return new ir(this,Iu(this._delegate,e))}catch(t){throw Ut(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Do(this,QA(this._delegate,e))}catch(t){throw Ut(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Px(this._delegate,t=>e(new Sf(this,t)))}batch(){return _t(this._delegate),new Af(new gf(this._delegate,e=>ua(this._delegate,e)))}loadBundle(e){return ox(this._delegate,e)}namedQuery(e){return sx(this._delegate,e).then(t=>t?new Do(this,t):null)}},la=class extends na{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tf(new rr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return ir.forKey(t,this.firestore,null)}};function mB(n){_S(n)}var Sf=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new la(e)}get(e){let t=wo(e);return this._delegate.get(t).then(r=>new Io(this._firestore,new En(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=wo(e);return r?(Uw("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=wo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=wo(e);return this._delegate.delete(t),this}},Af=class{constructor(e){this._delegate=e}set(e,t,r){let i=wo(e);return r?(Uw("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=wo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=wo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},da=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new ui(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Eo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new la(e),t),i.set(t,o)),o}};da.INSTANCES=new WeakMap;var ir=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new la(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Oe(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Oe(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ha(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ha(this.firestore,Cw(this._delegate,e))}catch(t){throw Ut(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=$e(e),e instanceof Oe?Tw(this._delegate,e):!1}set(e,t){t=Uw("DocumentReference.set",t);try{return t?Nw(this._delegate,e,t):Nw(this._delegate,e)}catch(r){throw Ut(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Pw(this._delegate,e):Pw(this._delegate,e,t,...r)}catch(i){throw Ut(i,"updateDoc()","DocumentReference.update()")}}delete(){return Mx(this._delegate)}onSnapshot(...e){let t=Ux(e),r=$x(e,i=>new Io(this.firestore,new En(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return kw(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=Tx(this._delegate):e?.source==="server"?t=bx(this._delegate):t=Cx(this._delegate),t.then(r=>new Io(this.firestore,new En(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(da.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ut(n,e,t){return n.message=n.message.replace(e,t),n}function Ux(n){for(let e of n)if(typeof e=="object"&&!Fw(e))return e;return{}}function $x(n,e){var t,r;let i;return Fw(n[0])?i=n[0]:Fw(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Io=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ir(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Rw(this._delegate,e._delegate)}},Eo=class extends Io{data(e){let t=this._delegate.data(e);return this._delegate._converter||wS(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Do=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new la(e)}where(e,t,r){try{return new n(this.firestore,Nr(this._delegate,px(e,t,r)))}catch(i){throw Ut(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Nr(this._delegate,gx(e,t)))}catch(r){throw Ut(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Nr(this._delegate,mx(e)))}catch(t){throw Ut(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Nr(this._delegate,yx(e)))}catch(t){throw Ut(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Nr(this._delegate,vx(...e)))}catch(t){throw Ut(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Nr(this._delegate,_x(...e)))}catch(t){throw Ut(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Nr(this._delegate,wx(...e)))}catch(t){throw Ut(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Nr(this._delegate,Ix(...e)))}catch(t){throw Ut(t,"endAt()","Query.endAt()")}}isEqual(e){return bw(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=Ax(this._delegate):e?.source==="server"?t=xx(this._delegate):t=Sx(this._delegate),t.then(r=>new Eu(this.firestore,new jn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=Ux(e),r=$x(e,i=>new Eu(this.firestore,new jn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return kw(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(da.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Vw=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Eo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Eu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Do(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Eo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Vw(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Eo(this._firestore,r))})}isEqual(e){return Rw(this._delegate,e._delegate)}},ha=class n extends Do{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ir(this.firestore,e):null}doc(e){try{return e===void 0?new ir(this.firestore,Iu(this._delegate)):new ir(this.firestore,Iu(this._delegate,e))}catch(t){throw Ut(t,"doc()","CollectionReference.doc()")}}add(e){return Rx(this._delegate,e).then(t=>new ir(this.firestore,t))}isEqual(e){return Tw(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(da.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function wo(n){return we(n,Oe)}var jw=class n{constructor(...e){this._delegate=new Vn(...e)}static documentId(){return new n(tt.keyField().canonicalString())}isEqual(e){return e=$e(e),e instanceof Vn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Bw=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=Ox();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=kx();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=Fx(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=Lx(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=Vx(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var yB={Firestore:bf,GeoPoint:po,Timestamp:qe,Blob:Tf,Transaction:Sf,WriteBatch:Af,DocumentReference:ir,DocumentSnapshot:Io,Query:Do,QueryDocumentSnapshot:Eo,QuerySnapshot:Eu,CollectionReference:ha,FieldPath:jw,FieldValue:Bw,setLogLevel:mB,CACHE_SIZE_UNLIMITED:YA};function vB(n,e){n.INTERNAL.registerComponent(new Si("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},yB)))}function _B(n){vB(n,(e,t)=>new bf(e,t,new Lw)),n.registerVersion(fB,pB)}_B(Jt);function wB(n,e=La){return new me(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function Hx(n,e){return wB(n,e)}function IB(n,e){return Hx(n,e).pipe(Pi(void 0),Ba(),W(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function qw(n,e){return Hx(n,e).pipe(W(t=>({payload:t,type:"query"})))}var xf=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=Gx(r,t);return new Rf(i,o,this.afs)}snapshotChanges(){return IB(this.ref,this.afs.schedulers.outsideAngular).pipe(Kt)}valueChanges(e={}){return this.snapshotChanges().pipe(W(({payload:t})=>e.idField?Ne(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ee(this.ref.get(e)).pipe(Kt)}};function Mf(n,e){return qw(n,e).pipe(Pi(void 0),Ba(),W(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function qx(n,e,t){return Mf(n,t).pipe(Ni((r,i)=>EB(r,i.map(o=>o.payload),e),[]),Mp(),W(r=>r.map(i=>({type:i.type,payload:i}))))}function EB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=DB(n,r))}),n}function $w(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function DB(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return $w(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return $w(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $w(n,e.oldIndex,1);break}return n}function zx(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Rf=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Mf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(W(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Pi(void 0),Ba(),yt(([r,i])=>i.length>0||!r),W(([,r])=>r),Kt)}auditTrail(e){return this.stateChanges(e).pipe(Ni((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=zx(e);return qx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kt)}valueChanges(e={}){return qw(this.query,this.afs.schedulers.outsideAngular).pipe(W(t=>t.payload.docs.map(r=>e.idField?Ne(V({},r.data()),{[e.idField]:r.id}):r.data())),Kt)}get(e){return Ee(this.query.get(e)).pipe(Kt)}add(e){return this.ref.add(e)}doc(e){return new xf(this.ref.doc(e),this.afs)}},Hw=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Mf(this.query,this.afs.schedulers.outsideAngular).pipe(Kt):Mf(this.query,this.afs.schedulers.outsideAngular).pipe(W(t=>t.filter(r=>e.indexOf(r.type)>-1)),yt(t=>t.length>0),Kt)}auditTrail(e){return this.stateChanges(e).pipe(Ni((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=zx(e);return qx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kt)}valueChanges(e={}){return qw(this.query,this.afs.schedulers.outsideAngular).pipe(W(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),Kt)}get(e){return Ee(this.query.get(e)).pipe(Kt)}},CB=new K("angularfire2.enableFirestorePersistence"),TB=new K("angularfire2.firestore.persistenceSettings"),bB=new K("angularfire2.firestore.settings"),SB=new K("angularfire2.firestore.use-emulator");function Gx(n,e=t=>t){return{query:e(n),ref:n}}var Yt=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,y,T,M,N,B,z){this.schedulers=c;let F=Oc(t,a,r),X=h;p&&Ly(F,a,m,T,M,N,y,B),[this.firestore,this.persistenceEnabled$]=sh(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ne=a.runOutsideAngular(()=>F.firestore());if(o&&ne.settings(o),X&&ne.useEmulator(...X),i&&!Gi(s)){let ee=()=>{try{return Ee(ne.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),te(!1)}};return[ne,a.runOutsideAngular(ee)]}else return[ne,te(!1)]},[o,X,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=Gx(i,r),a=this.schedulers.ngZone.run(()=>o);return new Rf(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new Hw(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new xf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(Cs),O(Ts,8),O(CB,8),O(bB,8),O(qt),O(ye),O(rh),O(TB,8),O(SB,8),O(fb,8),O(Ry,8),O(Ny,8),O(Py,8),O(ky,8),O(Oy,8),O(Fy,8),O(Yi,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Wx=(()=>{class n{constructor(t){this.db=t,this.dbPath="/header",this.accesoHeader="header service running...",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(Yt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Kx=(()=>{class n{constructor(t){this.headerService=t,this.header=new th,console.log("HeaderService",t),this.headerService.getHeader().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log("Header",this.header)})}static{this.\u0275fac=function(r){return new(r||n)(Pe(Wx))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-header"]],decls:25,vars:7,consts:[[1,"header-container"],[1,"col-name-goal"],[1,"header-name"],[1,"header-goal"],[1,"col-photo"],["width","150","height","150","alt","header photo",1,"header-photo",3,"src"],[1,"header-contact"],[1,"contact-text"],[1,"fas","fa-envelope"],[1,"fas","fa-phone"],[1,"fas","fa-map-marker-alt"],[1,"fab","fa-linkedin"]],template:function(r,i){r&1&&(Y(0,"section",0)(1,"td",1)(2,"p",2),ie(3),q(),Y(4,"p",3),ie(5),q()(),Y(6,"td",4),Tt(7,"img",5),q(),Y(8,"td",6)(9,"p")(10,"span",7),ie(11),q(),Tt(12,"i",8),q(),Y(13,"p")(14,"span",7),ie(15),q(),Tt(16,"i",9),q(),Y(17,"p")(18,"span",7),ie(19),q(),Tt(20,"i",10),q(),Y(21,"p")(22,"span",7),ie(23),q(),Tt(24,"i",11),q()()()),r&2&&(re(3),Ye(i.header.name),re(2),Ye(i.header.goallife),re(2),fm("src",i.header.photoUrl,L0),re(4),Ye(i.header.email),re(4),Ye(i.header.phoneNumber),re(4),Ye(i.header.location),re(4),Ye(i.header.socialNetwork))},styles:['.header-container[_ngcontent-%COMP%]{vertical-align:middle;border-bottom:2px solid #085687}td[_ngcontent-%COMP%]{padding:25px 15px;vertical-align:top;border:none}td.col-name-goal[_ngcontent-%COMP%]{width:40%;padding-left:35px;position:relative}td.col-name-goal[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:25px;height:30%;width:30px;background-color:#085687;border-radius:1px}.header-name[_ngcontent-%COMP%]{font-size:2.4em;font-weight:700;margin:0 0 8px;line-height:1.1}.header-goal[_ngcontent-%COMP%]{font-size:1em;color:#7f8c8d;margin:0;line-height:1.5}td.col-photo[_ngcontent-%COMP%]{width:180px;text-align:center;vertical-align:middle}.header-photo[_ngcontent-%COMP%]{display:inline-block;border-radius:50%;object-fit:cover;border:4px solid #fff;box-shadow:0 4px 8px #00000026;width:150px;height:150px}td.header-contact[_ngcontent-%COMP%]{width:35%;text-align:right;padding-right:25px;font-size:.95em;vertical-align:middle}.header-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;display:flex;justify-content:flex-end;align-items:center}.header-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.header-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .contact-text[_ngcontent-%COMP%]{order:0}.header-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{order:1;color:#085687;margin-left:10px;font-size:1.2em;width:1.3em;text-align:center}.header-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-weight:500;transition:color .2s ease}.header-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#085687;text-decoration:none}']})}}return n})();var Qx=(()=>{class n{constructor(t){this.db=t,this.dbPath="/skills",this.accesoSkills="skills service running...",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Yt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RB(n,e){if(n&1&&(Y(0,"li",5)(1,"span",6),ie(2),q(),Y(3,"div",7),Tt(4,"div",8),q()()),n&2){let t=e.$implicit;re(2),Ye(t.skill),re(2),pd("width",t.level,"%")}}function NB(n,e){if(n&1&&(Y(0,"div")(1,"ul",3),Ve(2,RB,5,3,"li",4),q()()),n&2){let t=bt();re(2),je("ngForOf",t.Skills)}}function PB(n,e){n&1&&(Y(0,"p",9),ie(1,"No skills available."),q())}var Yx=(()=>{class n{constructor(t){this.skillsService=t,this.Skills=[],console.log("SkillsService",t),this.skillsService.getSkills().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.Skills=r,console.log("Skills",this.Skills)})}static{this.\u0275fac=function(r){return new(r||n)(Pe(Qx))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-skills"]],decls:6,vars:2,consts:[["noSkillsAvailable",""],[1,"skills-container"],[4,"ngIf","ngIfElse"],[1,"skills-list"],["class","skill-item",4,"ngFor","ngForOf"],[1,"skill-item"],[1,"skill-name"],[1,"skill-level-bar-container"],[1,"skill-level-bar-fill"],[1,"no-skills"]],template:function(r,i){if(r&1&&(Y(0,"section",1)(1,"h2"),ie(2,"Skills & Competences"),q(),Ve(3,NB,3,1,"div",2)(4,PB,2,0,"ng-template",null,0,Gt),q()),r&2){let o=zt(5);re(3),je("ngIf",i.Skills.length>0)("ngIfElse",o)}},dependencies:[yn,vn],styles:[".skills-container[_ngcontent-%COMP%]{max-width:750px;margin:20px auto;padding:0 20px;height:100%}.skills-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;margin-bottom:25px;padding-bottom:5px}.skills-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.skill-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}.skill-name[_ngcontent-%COMP%]{width:45%;padding-right:10px;font-size:.95em;text-align:right}.skill-level-bar-container[_ngcontent-%COMP%]{flex-basis:53%;height:12px;background-color:#fff;border-radius:6px;border:1px solid #e0e0e0;overflow:hidden;position:relative}.skill-level-bar-fill[_ngcontent-%COMP%]{height:100%;background-color:#085687;border-radius:6px;transition:width .5s ease-in-out}.sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.no-skills[_ngcontent-%COMP%]{font-size:1em;color:#888;padding:25px;text-align:center;background-color:#f9f9f9;border:1px dashed #ccc;border-radius:5px;margin-top:20px}"]})}}return n})();var Zx=(()=>{class n{constructor(t){this.db=t,this.dbPath="/certificates",this.accesoCertificates="certificates services running...",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}static{this.\u0275fac=function(r){return new(r||n)(O(Yt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function FB(n,e){if(n&1&&(Y(0,"span",10),ie(1),Yr(2,"date"),q()),n&2){let t=bt().$implicit;re(),tn(" (",Zr(2,1,t.date,"yyyy"),") ")}}function LB(n,e){if(n&1&&(Y(0,"p",11),ie(1),q()),n&2){let t=bt().$implicit;re(),tn(" ",t.description," ")}}function VB(n,e){if(n&1&&(Y(0,"li",5)(1,"h3",6)(2,"span",7),ie(3),q(),Ve(4,FB,3,4,"span",8),q(),Ve(5,LB,2,1,"p",9),q()),n&2){let t=e.$implicit;re(3),Ye(t.name),re(),je("ngIf",t.date),re(),je("ngIf",t.description)}}function jB(n,e){if(n&1&&(Y(0,"div")(1,"ul",3),Ve(2,VB,6,3,"li",4),q()()),n&2){let t=bt();re(2),je("ngForOf",t.certificates)}}function BB(n,e){n&1&&(Y(0,"p",12),ie(1,"No achievements or certificates available."),q())}var Jx=(()=>{class n{constructor(t){this.certificatesService=t,this.certificates=[],console.log("CertificatesService",t),this.certificatesService.getCertificates().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log("Certificates",this.certificates)})}static{this.\u0275fac=function(r){return new(r||n)(Pe(Zx))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-certificates"]],decls:6,vars:2,consts:[["noCertificates",""],[1,"certificates-container"],[4,"ngIf","ngIfElse"],[1,"certificates-list"],["class","certificate-item",4,"ngFor","ngForOf"],[1,"certificate-item"],[1,"certificate-title"],[1,"certificate-name"],["class","certificate-date",4,"ngIf"],["class","certificate-description",4,"ngIf"],[1,"certificate-date"],[1,"certificate-description"],[1,"no-certificates"]],template:function(r,i){if(r&1&&(Y(0,"section",1)(1,"h2"),ie(2,"Achievements & Certificates"),q(),Ve(3,jB,3,1,"div",2)(4,BB,2,0,"ng-template",null,0,Gt),q()),r&2){let o=zt(5);re(3),je("ngIf",i.certificates.length>0)("ngIfElse",o)}},dependencies:[yn,vn,ls],styles:[".certificates-container[_ngcontent-%COMP%]{max-width:750px;margin:20px auto 20px 20px}.certificates-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;margin-bottom:25px;padding-bottom:5px}.certificates-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.certificate-item[_ngcontent-%COMP%]{margin-bottom:20px}.certificate-title[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;margin:0 0 5px}.certificate-date[_ngcontent-%COMP%]{font-weight:400;font-size:.95em;margin-left:5px;white-space:nowrap}.certificate-description[_ngcontent-%COMP%]{font-size:.95em;margin:0;line-height:1.4}.no-certificates[_ngcontent-%COMP%]{font-size:1em;padding:25px;text-align:center;background-color:#f9f9f9;border:1px dashed #ccc;border-radius:5px;margin-top:20px}"]})}}return n})();var Xx=(()=>{class n{constructor(t){this.db=t,this.dbPath="/education",this.accesoEducation="education services running...",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}static{this.\u0275fac=function(r){return new(r||n)(O(Yt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function HB(n,e){n&1&&(ic(0),ie(1," Present "),oc())}function qB(n,e){if(n&1&&(ie(0),Yr(1,"date")),n&2){let t=bt().$implicit;tn(" ",Zr(1,1,t.endDate,"MM/yyyy")," ")}}function zB(n,e){if(n&1&&(Y(0,"li",6)(1,"p",7),ie(2),Yr(3,"date"),Ve(4,HB,2,0,"ng-container",3)(5,qB,2,4,"ng-template",null,1,Gt),q(),Y(7,"h3",8),ie(8),q(),Y(9,"p",9),ie(10),q()()),n&2){let t=e.$implicit,r=zt(6);re(2),tn(" ",Zr(3,5,t.startDate,"MM/yyyy")," - "),re(2),je("ngIf",t.endDate==="Present")("ngIfElse",r),re(4),Ye(t.degree),re(2),Ye(t.institution)}}function GB(n,e){if(n&1&&(Y(0,"div")(1,"ul",4),Ve(2,zB,11,8,"li",5),q()()),n&2){let t=bt();re(2),je("ngForOf",t.educations)}}function WB(n,e){n&1&&(Y(0,"p",10),ie(1,"No education records available."),q())}var eM=(()=>{class n{constructor(t){this.educationService=t,this.educations=[],console.log("EducationService",t),this.educationService.getEducation().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.educations=r,console.log("Educations",this.educations)})}static{this.\u0275fac=function(r){return new(r||n)(Pe(Xx))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-education"]],decls:6,vars:2,consts:[["noEducationRecords",""],["displayEndDate",""],[1,"education-container"],[4,"ngIf","ngIfElse"],[1,"education-list"],["class","education-item",4,"ngFor","ngForOf"],[1,"education-item"],[1,"education-dates"],[1,"education-degree"],[1,"education-institution"],[1,"no-education"]],template:function(r,i){if(r&1&&(Y(0,"section",2)(1,"h2"),ie(2,"Education"),q(),Ve(3,GB,3,1,"div",3)(4,WB,2,0,"ng-template",null,0,Gt),q()),r&2){let o=zt(5);re(3),je("ngIf",i.educations.length>0)("ngIfElse",o)}},dependencies:[yn,vn,ls],styles:['.education-container[_ngcontent-%COMP%]{max-width:750px;margin:20px auto}.education-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding-left:35px;font-size:1.8em;font-weight:700;margin-bottom:15px;padding-bottom:5px}.education-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.education-item[_ngcontent-%COMP%]{padding-left:35px;margin-bottom:20px;position:relative}.education-item[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:2px;height:45px;width:30px;background-color:#085687;border-radius:1px}.education-dates[_ngcontent-%COMP%]{font-size:.9em;color:#085687;font-weight:500;margin:0 0 3px}.education-degree[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;margin:0 0 4px}.education-institution[_ngcontent-%COMP%]{font-size:1em;margin:0}.no-education[_ngcontent-%COMP%]{font-size:1em;padding:25px;text-align:center;background-color:#f9f9f9;border:1px dashed #ccc;border-radius:5px;margin-top:20px}']})}}return n})();var tM=(()=>{class n{constructor(t){this.db=t,this.dbPath="/interest",this.accesoInterests="interests services running...",this.interestRef=t.collection(this.dbPath)}getInterests(){return this.interestRef}static{this.\u0275fac=function(r){return new(r||n)(O(Yt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YB(n,e){n&1&&(Y(0,"span",8),ie(1," | "),q())}function ZB(n,e){if(n&1&&(Y(0,"span",5)(1,"span",6),ie(2),q(),Ve(3,YB,2,0,"span",7),q()),n&2){let t=e.$implicit,r=e.last;re(2),Ye(t.interest),re(),je("ngIf",!r)}}function JB(n,e){if(n&1&&(Y(0,"div",3),Ve(1,ZB,4,2,"span",4),q()),n&2){let t=bt();re(),je("ngForOf",t.interests)}}function XB(n,e){n&1&&(Y(0,"p",9),ie(1,"No interests available."),q())}var nM=(()=>{class n{constructor(t){this.interestsService=t,this.interests=[],console.log("InterestsService",t),this.interestsService.getInterests().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r,console.log("Interests",this.interests)})}static{this.\u0275fac=function(r){return new(r||n)(Pe(tM))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-interests"]],decls:6,vars:2,consts:[["noInterestsAvailable",""],[1,"interests-container"],["class","interests-list",4,"ngIf","ngIfElse"],[1,"interests-list"],["class","interest-item-wrapper",4,"ngFor","ngForOf"],[1,"interest-item-wrapper"],[1,"interest-item"],["class","separator",4,"ngIf"],[1,"separator"],[1,"no-interests"]],template:function(r,i){if(r&1&&(Y(0,"section",1)(1,"h2"),ie(2,"Interests"),q(),Ve(3,JB,2,1,"div",2)(4,XB,2,0,"ng-template",null,0,Gt),q()),r&2){let o=zt(5);re(3),je("ngIf",i.interests.length>0)("ngIfElse",o)}},dependencies:[yn,vn],styles:[".interests-container[_ngcontent-%COMP%]{max-width:750px;margin:20px auto;padding:0 20px}.interests-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;margin-bottom:10px;padding-bottom:5px}.interests-list[_ngcontent-%COMP%]{line-height:1.6;text-align:left}.interest-item[_ngcontent-%COMP%]{font-size:1em;display:inline}.separator[_ngcontent-%COMP%]{color:#888;margin:0 .5em;display:inline}.no-interests[_ngcontent-%COMP%]{font-size:1em;padding:25px;text-align:center;background-color:#f9f9f9;border:1px dashed #ccc;border-radius:5px;margin-top:20px}"]})}}return n})();var rM=(()=>{class n{constructor(t){this.db=t,this.dbPath="/language",this.accesoLanguages="languages services running...",this.languagesRef=t.collection(this.dbPath)}getLanguages(){return this.languagesRef}static{this.\u0275fac=function(r){return new(r||n)(O(Yt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nU(n,e){if(n&1&&(Y(0,"span",5),ie(1),q()),n&2){let t=e.$implicit;re(),tn(" ",t.language," ")}}function rU(n,e){if(n&1&&(Y(0,"div",3),Ve(1,nU,2,1,"span",4),q()),n&2){let t=bt();re(),je("ngForOf",t.Languages)}}function iU(n,e){n&1&&(Y(0,"p",6),ie(1,"No languages available."),q())}var iM=(()=>{class n{constructor(t){this.languagesService=t,this.Languages=[],console.log("LanguagesService",t),this.languagesService.getLanguages().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.Languages=r,console.log("Languages",this.Languages)})}static{this.\u0275fac=function(r){return new(r||n)(Pe(rM))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-languages"]],decls:6,vars:2,consts:[["noLanguagesAvailable",""],[1,"languages-container"],["class","languages-list",4,"ngIf","ngIfElse"],[1,"languages-list"],["class","language-item",4,"ngFor","ngForOf"],[1,"language-item"],[1,"no-languages"]],template:function(r,i){if(r&1&&(Y(0,"section",1)(1,"h2"),ie(2,"Languages"),q(),Ve(3,rU,2,1,"div",2)(4,iU,2,0,"ng-template",null,0,Gt),q()),r&2){let o=zt(5);re(3),je("ngIf",i.Languages.length>0)("ngIfElse",o)}},dependencies:[yn,vn],styles:[".languages-container[_ngcontent-%COMP%]{max-width:750px;margin:20px auto;padding:0 35px}.languages-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;margin-bottom:15px;padding-bottom:5px}.languages-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;padding:0;margin:0}.language-item[_ngcontent-%COMP%]{font-size:1em}.no-languages[_ngcontent-%COMP%]{font-size:1em;padding:25px;text-align:center;background-color:#f9f9f9;border:1px dashed #ccc;border-radius:5px;margin-top:20px}"]})}}return n})();var oM=(()=>{class n{constructor(t){this.db=t,this.dbPath="/work-experience",this.accesoWorkExperience="work esperience service running...",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}static{this.\u0275fac=function(r){return new(r||n)(O(Yt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function aU(n,e){n&1&&(ic(0),ie(1," Present "),oc())}function cU(n,e){if(n&1&&(ie(0),Yr(1,"date")),n&2){let t=bt().$implicit;tn(" ",Zr(1,1,t.endDate,"MM/yyyy")," ")}}function uU(n,e){if(n&1&&(Y(0,"li",6)(1,"div",7)(2,"span",8),ie(3),Yr(4,"date"),Ve(5,aU,2,0,"ng-container",3)(6,cU,2,4,"ng-template",null,1,Gt),q(),Y(8,"span",9),ie(9),q()(),Y(10,"h3",10),ie(11),q(),Y(12,"p",11),ie(13),q(),Y(14,"div",12)(15,"h4",13),ie(16,"Accomplishments"),q(),Y(17,"div",14)(18,"p"),ie(19),q()()()()),n&2){let t=e.$implicit,r=zt(7);re(3),tn(" ",Zr(4,7,t.startDate,"MM/yyyy")," - "),re(2),je("ngIf",t.endDate==="Present")("ngIfElse",r),re(4),Ye(t.location),re(2),Ye(t.position),re(2),Ye(t.company),re(6),Ye(t.accomplishments)}}function lU(n,e){if(n&1&&(Y(0,"div")(1,"ul",4),Ve(2,uU,20,10,"li",5),q()()),n&2){let t=bt();re(2),je("ngForOf",t.WorkExperiences)}}function dU(n,e){n&1&&(Y(0,"div",15)(1,"h2"),ie(2,"Work Experience"),q(),Y(3,"p",16),ie(4,"No work experience available."),q()())}var sM=(()=>{class n{constructor(t){this.workExperienceService=t,this.WorkExperiences=[],console.log("WorkExperienceService",t),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(W(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.WorkExperiences=r,console.log("WorkExperience",this.WorkExperiences)})}static{this.\u0275fac=function(r){return new(r||n)(Pe(oM))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-work-experience"]],decls:6,vars:2,consts:[["noExperience",""],["displayEndDate",""],[1,"work-experience-section"],[4,"ngIf","ngIfElse"],[1,"experience-list"],["class","experience-item",4,"ngFor","ngForOf"],[1,"experience-item"],[1,"item-header"],[1,"dates"],[1,"location"],[1,"position"],[1,"company"],[1,"accomplishments-section"],[1,"accomplishments-label"],[1,"accomplishments-text"],[1,"no-experience-fallback"],[1,"no-experience-message"]],template:function(r,i){if(r&1&&(Y(0,"section",2)(1,"h2"),ie(2,"Work Experience"),q(),Ve(3,lU,3,1,"div",3)(4,dU,5,0,"ng-template",null,0,Gt),q()),r&2){let o=zt(5);re(3),je("ngIf",i.WorkExperiences.length>0)("ngIfElse",o)}},dependencies:[yn,vn,ls],styles:['.work-experience-section[_ngcontent-%COMP%]{max-width:750px;margin:20px auto}.work-experience-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;margin-bottom:25px;padding-bottom:5px;padding-left:35px}.experience-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.experience-item[_ngcontent-%COMP%]{padding-left:25px;margin-bottom:20px;position:relative}.experience-item[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:2px;height:50px;width:10px;background-color:#085687;border-radius:1px}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px;font-size:.9em}.dates[_ngcontent-%COMP%]{color:#085687;font-weight:500;white-space:nowrap}.location[_ngcontent-%COMP%]{color:#085687;font-weight:500;white-space:nowrap;padding-left:10px}.position[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin-top:0;margin-bottom:2px}.company[_ngcontent-%COMP%]{font-size:1.1em;margin-top:0;margin-bottom:15px}.accomplishments-section[_ngcontent-%COMP%]{margin-top:10px}.accomplishments-label[_ngcontent-%COMP%]{font-size:.9em;color:#085687;margin-top:0;margin-bottom:5px;font-weight:600}.accomplishments-text[_ngcontent-%COMP%]{font-size:.95em}.accomplishments-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.no-experience-fallback[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6em;border-bottom:1px solid #ccc;padding-bottom:5px;margin-bottom:20px;font-weight:600}.no-experience-message[_ngcontent-%COMP%]{font-size:1em;padding:25px;text-align:center;background-color:#f9f9f9;border:1px dashed #ccc;border-radius:5px;margin-top:20px}']})}}return n})();var aM=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ft({type:n,selectors:[["app-root"]],decls:14,vars:0,consts:[[1,"cv-table-layout"],["colspan","2",1,"cv-table-header"],[1,"cv-table-col-left"],[1,"cv-table-col-right"]],template:function(r,i){r&1&&(Y(0,"table",0)(1,"tr")(2,"td",1),Tt(3,"app-header"),q()(),Y(4,"tr")(5,"td",2),Tt(6,"app-work-experience")(7,"app-education")(8,"app-languages"),q(),Y(9,"td",3),Tt(10,"app-skills")(11,"app-certificates")(12,"app-interests"),q()()(),Tt(13,"router-outlet"))},dependencies:[my,Kx,Yx,Jx,eM,nM,iM,sM],styles:['body[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;background-color:#f4f4f4;margin:0;padding:0;color:#333}.cv-table-layout[_ngcontent-%COMP%]{width:100%;max-width:800px;background-color:#fff;border:1px solid #ddd;box-shadow:0 0 15px #00000012;border-collapse:collapse}.cv-table-layout[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;vertical-align:top}.cv-table-header[_ngcontent-%COMP%]{padding:0;border-bottom:1px solid #eee}.cv-table-col-left[_ngcontent-%COMP%], .cv-table-col-right[_ngcontent-%COMP%]{width:50%}.cv-table-layout[_ngcontent-%COMP%]   app-work-experience[_ngcontent-%COMP%], .cv-table-layout[_ngcontent-%COMP%]   app-education[_ngcontent-%COMP%], .cv-table-layout[_ngcontent-%COMP%]   app-skills[_ngcontent-%COMP%], .cv-table-layout[_ngcontent-%COMP%]   app-certificates[_ngcontent-%COMP%], .cv-table-layout[_ngcontent-%COMP%]   app-languages[_ngcontent-%COMP%], .cv-table-layout[_ngcontent-%COMP%]   app-interests[_ngcontent-%COMP%]{display:block;margin-bottom:30px}.cv-table-layout[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{margin-bottom:0}@media (max-width: 768px){.cv-table-layout[_ngcontent-%COMP%], .cv-table-layout[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .cv-table-layout[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .cv-table-layout[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%!important;box-sizing:border-box}.cv-table-layout[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{margin-bottom:20px}.cv-table-layout[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{margin-bottom:0}.cv-table-layout[_ngcontent-%COMP%]{margin:15px}.cv-table-header[_ngcontent-%COMP%]{border-bottom:none}}']})}}return n})();var cM={production:!1,firebase:{apiKey:"AIzaSyCT3Su-7kQ3v9NHgOWhE6a3L1afWoyU_pY",authDomain:"echodavid-cv.firebaseapp.com",projectId:"echodavid-cv",storageBucket:"echodavid-cv.firebasestorage.app",messagingSenderId:"210541340833",appId:"1:210541340833:web:36775c380c29caf2c7e8e0"}};var uM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Lt({type:n,bootstrap:[aM]})}static{this.\u0275inj=Ft({imports:[rT,YT,hb.initializeApp(cM.firebase)]})}}return n})();nT().bootstrapModule(uM,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
